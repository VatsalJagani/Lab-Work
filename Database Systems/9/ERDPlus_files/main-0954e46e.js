/* Blob.js
 * A Blob implementation.
 * 2014-07-24
 *
 * By Eli Grey, http://eligrey.com
 * By Devin Samarin, https://github.com/dsamarin
 * License: X11/MIT
 *   See https://github.com/eligrey/Blob.js/blob/master/LICENSE.md
 */
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
!function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(t){}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},a=n.prototype,o=i.prototype,r=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),d=l.length,c=e.URL||e.webkitURL||e,u=c.createObjectURL,p=c.revokeObjectURL,h=c,m=e.btoa,g=e.atob,f=e.ArrayBuffer,v=e.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=o.fake=!0;d--;)s.prototype[l[d]]=d+1;return c.createObjectURL||(h=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(y),n.origin=t&&t[1])),n}),h.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof i?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):m?t+";base64,"+m(e.data):t+","+encodeURIComponent(e.data)):u?u.call(c,e):void 0},h.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&p&&p.call(c,e)},a.append=function(e){var n=this.data;if(v&&(e instanceof f||e instanceof v)){for(var a="",o=new v(e),l=0,d=o.length;d>l;l++)a+=String.fromCharCode(o[l]);n.push(a)}else if("Blob"===t(e)||"File"===t(e)){if(!r)throw new s("NOT_READABLE_ERR");var c=new r;n.push(c.readAsBinaryString(e))}else e instanceof i?"base64"===e.encoding&&g?n.push(g(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},a.getBlob=function(e){return arguments.length||(e=null),new i(this.data.join(""),e,"raw")},a.toString=function(){return"[object BlobBuilder]"},o.slice=function(e,t,n){var a=arguments.length;return 3>a&&(n=null),new i(this.data.slice(e,a>1?t:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,t){var i=t?t.type||"":"",a=new n;if(e)for(var o=0,r=e.length;r>o;o++)Uint8Array&&e[o]instanceof Uint8Array?a.append(e[o].buffer):a.append(e[o]);var s=a.getBlob(i);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var i=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=i(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),/* canvas-toBlob.js
 * A canvas.toBlob() implementation.
 * 2013-12-27
 * 
 * By Eli Grey, http://eligrey.com and Devin Samarin, https://github.com/eboyjr
 * License: X11/MIT
 *   See https://github.com/eligrey/canvas-toBlob.js/blob/master/LICENSE.md
 */
/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */
function(e){"use strict";var t,n=e.Uint8Array,i=e.HTMLCanvasElement,a=i&&i.prototype,o=/\s*;\s*base64\s*(?:;|$)/i,r="toDataURL",s=function(e){for(var i,a,o,r=e.length,s=new n(r/4*3|0),l=0,d=0,c=[0,0],u=0,p=0;r--;)a=e.charCodeAt(l++),i=t[a-43],255!==i&&i!==o&&(c[1]=c[0],c[0]=a,p=p<<6|i,u++,4===u&&(s[d++]=p>>>16,61!==c[1]&&(s[d++]=p>>>8),61!==c[0]&&(s[d++]=p),u=0));return s};n&&(t=new n([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),i&&!a.toBlob&&(a.toBlob=function(e,t){if(t||(t="image/png"),this.mozGetAsFile)return void e(this.mozGetAsFile("canvas",t));if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(t))return void e(this.msToBlob());var i,a=Array.prototype.slice.call(arguments,1),l=this[r].apply(this,a),d=l.indexOf(","),c=l.substring(d+1),u=o.test(l.substring(0,d));Blob.fake?(i=new Blob,u?i.encoding="base64":i.encoding="URI",i.data=c,i.size=c.length):n&&(i=u?new Blob([s(c)],{type:t}):new Blob([decodeURIComponent(c)],{type:t})),e(i)},a.toDataURLHD?a.toBlobHD=function(){r="toDataURLHD";var e=this.toBlob();return r="toDataURL",e}:a.toBlobHD=a.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);/* FileSaver.js
 * A saveAs() FileSaver implementation.
 * 2015-03-04
 *
 * By Eli Grey, http://eligrey.com
 * License: X11/MIT
 *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md
 */
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in i,o=function(n){var i=t.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)},r=e.webkitRequestFileSystem,s=e.requestFileSystem||r||e.mozRequestFileSystem,l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},d="application/octet-stream",c=0,u=500,p=function(t){var i=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?i():setTimeout(i,u)},h=function(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var a=e["on"+t[i]];if("function"==typeof a)try{a.call(e,n||e)}catch(o){l(o)}}},m=function(t,l){var u,m,g,f=this,v=t.type,y=!1,b=function(){h(f,"writestart progress write writeend".split(" "))},w=function(){if((y||!u)&&(u=n().createObjectURL(t)),m)m.location.href=u;else{var i=e.open(u,"_blank");void 0==i&&"undefined"!=typeof safari&&(e.location.href=u)}f.readyState=f.DONE,b(),p(u)},C=function(e){return function(){return f.readyState!==f.DONE?e.apply(this,arguments):void 0}},A={create:!0,exclusive:!1};return f.readyState=f.INIT,l||(l="download"),a?(u=n().createObjectURL(t),i.href=u,i.download=l,o(i),f.readyState=f.DONE,b(),void p(u)):(/^\s*(?:text\/(?:plain|xml)|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)&&(t=new Blob(["\ufeff",t],{type:t.type})),e.chrome&&v&&v!==d&&(g=t.slice||t.webkitSlice,t=g.call(t,0,t.size,d),y=!0),r&&"download"!==l&&(l+=".download"),(v===d||r)&&(m=e),s?(c+=t.size,void s(e.TEMPORARY,c,C(function(e){e.root.getDirectory("saved",A,C(function(e){var n=function(){e.getFile(l,A,C(function(e){e.createWriter(C(function(n){n.onwriteend=function(t){m.location.href=e.toURL(),f.readyState=f.DONE,h(f,"writeend",t),p(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=f["on"+e]}),n.write(t),f.abort=function(){n.abort(),f.readyState=f.DONE},f.readyState=f.WRITING}),w)}),w)};e.getFile(l,{create:!1},C(function(e){e.remove(),n()}),C(function(e){e.code===e.NOT_FOUND_ERR?n():w()}))}),w)}),w)):void w())},g=m.prototype,f=function(e,t){return new m(e,t)};return g.abort=function(){var e=this;e.readyState=e.DONE,h(e,"abort")},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,f}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),/*!
 * ZeroClipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.
 * Copyright (c) 2009-2015 Jon Rohan, James M. Greene
 * Licensed MIT
 * http://zeroclipboard.org/
 * v2.3.0-beta.1
 */
function(e,t){"use strict";var n,i,a,o=e,r=o.document,s=o.navigator,l=o.setTimeout,d=o.clearTimeout,c=o.setInterval,u=o.clearInterval,p=o.getComputedStyle,h=o.encodeURIComponent,m=o.ActiveXObject,g=o.Error,f=o.Number.parseInt||o.parseInt,v=o.Number.parseFloat||o.parseFloat,y=o.Number.isNaN||o.isNaN,b=o.Date.now,w=o.Object.keys,C=o.Object.defineProperty,A=o.Object.prototype.hasOwnProperty,k=o.Array.prototype.slice,x=function(){var e=function(e){return e};if("function"==typeof o.wrap&&"function"==typeof o.unwrap)try{var t=r.createElement("div"),n=o.unwrap(t);1===t.nodeType&&n&&1===n.nodeType&&(e=o.unwrap)}catch(i){}return e}(),S=function(e){return k.call(e,0)},T=function(){var e,n,i,a,o,r,s=S(arguments),l=s[0]||{};for(e=1,n=s.length;n>e;e++)if(null!=(i=s[e]))for(a in i)A.call(i,a)&&(o=l[a],r=i[a],l!==r&&r!==t&&(l[a]=r));return l},E=function(e){var t,n,i,a;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],n=0,i=e.length;i>n;n++)A.call(e,n)&&(t[n]=E(e[n]));else{t={};for(a in e)A.call(e,a)&&(t[a]=E(e[a]))}return t},I=function(e,t){for(var n={},i=0,a=t.length;a>i;i++)t[i]in e&&(n[t[i]]=e[t[i]]);return n},D=function(e,t){var n={};for(var i in e)-1===t.indexOf(i)&&(n[i]=e[i]);return n},M=function(e){if(e)for(var t in e)A.call(e,t)&&delete e[t];return e},$=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},P=function(e){var t;return"string"==typeof e&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},R=function(e){var t,n;return"string"==typeof e&&e&&(n=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?t=n[1]:(n=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(t=n[1]))),t},F=function(){var e,t;try{throw new g}catch(n){t=n}return t&&(e=t.sourceURL||t.fileName||R(t.stack)),e},U=function(){var e,n,i;if(r.currentScript&&(e=r.currentScript.src))return e;if(n=r.getElementsByTagName("script"),1===n.length)return n[0].src||t;if("readyState"in n[0])for(i=n.length;i--;)if("interactive"===n[i].readyState&&(e=n[i].src))return e;return"loading"===r.readyState&&(e=n[n.length-1].src)?e:(e=F())?e:t},q=function(){var e,n,i,a=r.getElementsByTagName("script");for(e=a.length;e--;){if(!(i=a[e].src)){n=null;break}if(i=P(i),null==n)n=i;else if(n!==i){n=null;break}}return n||t},_=function(){var e=P(U())||q()||"";return e+"ZeroClipboard.swf"},N=function(){var e=/win(dows|[\s]?(nt|me|ce|xp|vista|[\d]+))/i;return!!s&&(e.test(s.appVersion||"")||e.test(s.platform||"")||-1!==(s.userAgent||"").indexOf("Windows"))},O=function(){return null==e.opener&&(!!e.top&&e!=e.top||!!e.parent&&e!=e.parent)}(),B={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},L="11.0.0",H={},W={},z=null,j=0,G=0,Y={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},V=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],K=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],X=new RegExp("^flash-("+K.map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),Q=new RegExp("^flash-("+K.slice(1).map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),Z={swfPath:_(),trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,fixLineEndings:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},J=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(A.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents|fixLineEndings)$/.test(t))Z[t]=e[t];else if(null==B.bridge)if("containerId"===t||"swfObjectId"===t){if(!me(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");Z[t]=e[t]}else Z[t]=e[t];{if("string"!=typeof e||!e)return E(Z);if(A.call(Z,e))return Z[e]}},ee=function(){return Ye(),{browser:I(s,["userAgent","platform","appName","appVersion"]),flash:D(B,["bridge"]),zeroclipboard:{version:Ke.version,config:Ke.config()}}},te=function(){return!!(B.disabled||B.outdated||B.sandboxed||B.unavailable||B.degraded||B.deactivated)},ne=function(e,i){var a,o,r,s={};if("string"==typeof e&&e)r=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof i)for(a in e)A.call(e,a)&&"string"==typeof a&&a&&"function"==typeof e[a]&&Ke.on(a,e[a]);if(r&&r.length){for(a=0,o=r.length;o>a;a++)e=r[a].replace(/^on/,""),s[e]=!0,H[e]||(H[e]=[]),H[e].push(i);if(s.ready&&B.ready&&Ke.emit({type:"ready"}),s.error){for(a=0,o=K.length;o>a;a++)if(B[K[a].replace(/^flash-/,"")]===!0){Ke.emit({type:"error",name:K[a]});break}n!==t&&Ke.version!==n&&Ke.emit({type:"error",name:"version-mismatch",jsVersion:Ke.version,swfVersion:n})}}return Ke},ie=function(e,t){var n,i,a,o,r;if(0===arguments.length)o=w(H);else if("string"==typeof e&&e)o=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)A.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&Ke.off(n,e[n]);if(o&&o.length)for(n=0,i=o.length;i>n;n++)if(e=o[n].toLowerCase().replace(/^on/,""),r=H[e],r&&r.length)if(t)for(a=r.indexOf(t);-1!==a;)r.splice(a,1),a=r.indexOf(t,a);else r.length=0;return Ke},ae=function(e){var t;return t="string"==typeof e&&e?E(H[e])||null:E(H)},oe=function(e){var t,n,i;return e=ge(e),e&&!Ae(e)?"ready"===e.type&&B.overdue===!0?Ke.emit({type:"error",name:"flash-overdue"}):(t=T({},e),we.call(this,t),"copy"===e.type&&(i=Me(W),n=i.data,z=i.formatMap),n):void 0},re=function(){var e=B.sandboxed;if(Ye(),"boolean"!=typeof B.ready&&(B.ready=!1),B.sandboxed!==e&&B.sandboxed===!0)B.ready=!1,Ke.emit({type:"error",name:"flash-sandboxed"});else if(!Ke.isFlashUnusable()&&null===B.bridge){var t=Z.flashLoadTimeout;"number"==typeof t&&t>=0&&(j=l(function(){"boolean"!=typeof B.deactivated&&(B.deactivated=!0),B.deactivated===!0&&Ke.emit({type:"error",name:"flash-deactivated"})},t)),B.overdue=!1,Ie()}},se=function(){Ke.clearData(),Ke.blur(),Ke.emit("destroy"),De(),Ke.off()},le=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,Ke.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var i in n)"string"==typeof i&&i&&A.call(n,i)&&"string"==typeof n[i]&&n[i]&&(W[i]=Ge(n[i]))},de=function(e){"undefined"==typeof e?(M(W),z=null):"string"==typeof e&&A.call(W,e)&&delete W[e]},ce=function(e){return"undefined"==typeof e?E(W):"string"==typeof e&&A.call(W,e)?W[e]:void 0},ue=function(e){if(e&&1===e.nodeType){i&&(Ne(i,Z.activeClass),i!==e&&Ne(i,Z.hoverClass)),i=e,_e(e,Z.hoverClass);var t=e.getAttribute("title")||Z.title;if("string"==typeof t&&t){var n=Ee(B.bridge);n&&n.setAttribute("title",t)}var a=Z.forceHandCursor===!0||"pointer"===Oe(e,"cursor");ze(a),We()}},pe=function(){var e=Ee(B.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px"),i&&(Ne(i,Z.hoverClass),Ne(i,Z.activeClass),i=null)},he=function(){return i||null},me=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},ge=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){t=t.toLowerCase(),!e.target&&(/^(copy|aftercopy|_click)$/.test(t)||"error"===t&&"clipboard-error"===e.name)&&(e.target=a),T(e,{type:t,target:e.target||i||null,relatedTarget:e.relatedTarget||null,currentTarget:B&&B.bridge||null,timeStamp:e.timeStamp||b()||null});var n=Y[e.type];return"error"===e.type&&e.name&&n&&(n=n[e.name]),n&&(e.message=n),"ready"===e.type&&T(e,{target:null,version:B.version}),"error"===e.type&&(X.test(e.name)&&T(e,{target:null,minimumVersion:L}),Q.test(e.name)&&T(e,{version:B.version})),"copy"===e.type&&(e.clipboardData={setData:Ke.setData,clearData:Ke.clearData}),"aftercopy"===e.type&&(e=$e(e,z)),e.target&&!e.relatedTarget&&(e.relatedTarget=fe(e.target)),ve(e)}},fe=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?r.getElementById(t):null},ve=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,i="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,a="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,s=Be(n),l=o.screenLeft||o.screenX||0,d=o.screenTop||o.screenY||0,c=r.body.scrollLeft+r.documentElement.scrollLeft,u=r.body.scrollTop+r.documentElement.scrollTop,p=s.left+("number"==typeof e._stageX?e._stageX:0),h=s.top+("number"==typeof e._stageY?e._stageY:0),m=p-c,g=h-u,f=l+m,v=d+g,y="number"==typeof e.movementX?e.movementX:0,b="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,T(e,{srcElement:n,fromElement:i,toElement:a,screenX:f,screenY:v,pageX:p,pageY:h,clientX:m,clientY:g,x:m,y:g,movementX:y,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},ye=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},be=function(e,t,n,i){i?l(function(){e.apply(t,n)},0):e.apply(t,n)},we=function(e){if("object"==typeof e&&e&&e.type){var t=ye(e),n=H["*"]||[],i=H[e.type]||[],a=n.concat(i);if(a&&a.length){var r,s,l,d,c,u=this;for(r=0,s=a.length;s>r;r++)l=a[r],d=u,"string"==typeof l&&"function"==typeof o[l]&&(l=o[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(d=l,l=l.handleEvent),"function"==typeof l&&(c=T({},e),be(l,d,[c],t))}return this}},Ce=function(e){var t=null;return(O===!1||e&&"error"===e.type&&e.name&&-1!==V.indexOf(e.name))&&(t=!1),t},Ae=function(e){var t=e.target||i||null,o="swf"===e._source;switch(delete e._source,e.type){case"error":var r="flash-sandboxed"===e.name||Ce(e);"boolean"==typeof r&&(B.sandboxed=r),-1!==K.indexOf(e.name)?T(B,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1}):"version-mismatch"===e.name&&(n=e.swfVersion,T(B,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),He();break;case"ready":n=e.swfVersion;var s=B.deactivated===!0;T(B,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:s,ready:!s}),He();break;case"beforecopy":a=t;break;case"copy":var l,d,c=e.relatedTarget;!W["text/html"]&&!W["text/plain"]&&c&&(d=c.value||c.outerHTML||c.innerHTML)&&(l=c.value||c.textContent||c.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l),d!==l&&e.clipboardData.setData("text/html",d)):!W["text/plain"]&&e.target&&(l=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l));break;case"aftercopy":ke(e),Ke.clearData(),t&&t!==qe()&&t.focus&&t.focus();break;case"_mouseover":Ke.focus(t),Z.bubbleEvents===!0&&o&&(t&&t!==e.relatedTarget&&!$(e.relatedTarget,t)&&xe(T({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),xe(T({},e,{type:"mouseover"})));break;case"_mouseout":Ke.blur(),Z.bubbleEvents===!0&&o&&(t&&t!==e.relatedTarget&&!$(e.relatedTarget,t)&&xe(T({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),xe(T({},e,{type:"mouseout"})));break;case"_mousedown":_e(t,Z.activeClass),Z.bubbleEvents===!0&&o&&xe(T({},e,{type:e.type.slice(1)}));break;case"_mouseup":Ne(t,Z.activeClass),Z.bubbleEvents===!0&&o&&xe(T({},e,{type:e.type.slice(1)}));break;case"_click":a=null,Z.bubbleEvents===!0&&o&&xe(T({},e,{type:e.type.slice(1)}));break;case"_mousemove":Z.bubbleEvents===!0&&o&&xe(T({},e,{type:e.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)?!0:void 0},ke=function(e){if(e.errors&&e.errors.length>0){var t=E(e);T(t,{type:"error",name:"clipboard-error"}),delete t.success,l(function(){Ke.emit(t)},0)}},xe=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,i=n&&n.ownerDocument||r,a={view:i.defaultView||o,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:i.createEvent?0:1},s=T(a,e);n&&i.createEvent&&n.dispatchEvent&&(s=[s.type,s.canBubble,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget],t=i.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,s),t._source="js",n.dispatchEvent(t)))}},Se=function(){var e=Z.flashLoadTimeout;if("number"==typeof e&&e>=0){var t=Math.min(1e3,e/10),n=Z.swfObjectId+"_fallbackContent";G=c(function(){var e=r.getElementById(n);Le(e)&&(He(),B.deactivated=null,Ke.emit({type:"error",name:"swf-not-found"}))},t)}},Te=function(){var e=r.createElement("div");return e.id=Z.containerId,e.className=Z.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+je(Z.zIndex),e},Ee=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},Ie=function(){var e,t=B.bridge,n=Ee(t);if(!t){var i=Ue(o.location.host,Z),a="never"===i?"none":"all",s=Re(T({jsVersion:Ke.version},Z)),l=Z.swfPath+Pe(Z.swfPath,Z);n=Te();var d=r.createElement("div");n.appendChild(d),r.body.appendChild(n);var c=r.createElement("div"),u="activex"===B.pluginType;c.innerHTML='<object id="'+Z.swfObjectId+'" name="'+Z.swfObjectId+'" width="100%" height="100%" '+(u?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(u?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+i+'"/><param name="allowNetworking" value="'+a+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+s+'"/><div id="'+Z.swfObjectId+'_fallbackContent">&nbsp;</div></object>',t=c.firstChild,c=null,x(t).ZeroClipboard=Ke,n.replaceChild(t,d),Se()}return t||(t=r[Z.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),B.bridge=t||null,t},De=function(){var e=B.bridge;if(e){var i=Ee(e);i&&("activex"===B.pluginType&&"readyState"in e?(e.style.display="none",function a(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode&&e.parentNode.removeChild(e),i.parentNode&&i.parentNode.removeChild(i)}else l(a,10)}()):(e.parentNode&&e.parentNode.removeChild(e),i.parentNode&&i.parentNode.removeChild(i))),He(),B.ready=null,B.bridge=null,B.deactivated=null,n=t}},Me=function(e){var t={},n={};if("object"==typeof e&&e){for(var i in e)if(i&&A.call(e,i)&&"string"==typeof e[i]&&e[i])switch(i.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[i],n.text=i;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[i],n.html=i;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[i],n.rtf=i}return{data:t,formatMap:n}}},$e=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var i in e)if(A.call(e,i))if("errors"===i){n[i]=e[i]?e[i].slice():[];for(var a=0,o=n[i].length;o>a;a++)n[i][a].format=t[n[i][a].format]}else if("success"!==i&&"data"!==i)n[i]=e[i];else{n[i]={};var r=e[i];for(var s in r)s&&A.call(r,s)&&A.call(t,s)&&(n[i][t[s]]=r[s])}return n},Pe=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(-1===e.indexOf("?")?"?":"&")+"noCache="+b():""},Re=function(e){var t,n,i,a,r="",s=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?a=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(a=e.trustedDomains)),a&&a.length)for(t=0,n=a.length;n>t;t++)if(A.call(a,t)&&a[t]&&"string"==typeof a[t]){if(i=Fe(a[t]),!i)continue;if("*"===i){s.length=0,s.push(i);break}s.push.apply(s,[i,"//"+i,o.location.protocol+"//"+i])}return s.length&&(r+="trustedOrigins="+h(s.join(","))),e.forceEnhancedClipboard===!0&&(r+=(r?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(r+=(r?"&":"")+"swfObjectId="+h(e.swfObjectId)),"string"==typeof e.jsVersion&&e.jsVersion&&(r+=(r?"&":"")+"jsVersion="+h(e.jsVersion)),r},Fe=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var n=e.indexOf("/");return e=-1===n?e:-1===t||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},Ue=function(){var e=function(e){var t,n,i,a=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return a;for(t=0,n=e.length;n>t;t++)if(A.call(e,t)&&(i=Fe(e[t]))){if("*"===i){a.length=0,a.push("*");break}-1===a.indexOf(i)&&a.push(i)}return a};return function(t,n){var i=Fe(n.swfPath);null===i&&(i=t);var a=e(n.trustedDomains),o=a.length;if(o>0){if(1===o&&"*"===a[0])return"always";if(-1!==a.indexOf(t))return 1===o&&t===i?"sameDomain":"always"}return"never"}}(),qe=function(){try{return r.activeElement}catch(e){return null}},_e=function(e,t){var n,i,a,o=[];if("string"==typeof t&&t&&(o=t.split(/\s+/)),e&&1===e.nodeType&&o.length>0){for(a=(" "+(e.className||"")+" ").replace(/[\t\r\n\f]/g," "),n=0,i=o.length;i>n;n++)-1===a.indexOf(" "+o[n]+" ")&&(a+=o[n]+" ");a=a.replace(/^\s+|\s+$/g,""),a!==e.className&&(e.className=a)}return e},Ne=function(e,t){var n,i,a,o=[];if("string"==typeof t&&t&&(o=t.split(/\s+/)),e&&1===e.nodeType&&o.length>0&&e.className){for(a=(" "+e.className+" ").replace(/[\t\r\n\f]/g," "),n=0,i=o.length;i>n;n++)a=a.replace(" "+o[n]+" "," ");a=a.replace(/^\s+|\s+$/g,""),a!==e.className&&(e.className=a)}return e},Oe=function(e,t){var n=p(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},Be=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),i=o.pageXOffset,a=o.pageYOffset,s=r.documentElement.clientLeft||0,l=r.documentElement.clientTop||0,d=0,c=0;if("relative"===Oe(r.body,"position")){var u=r.body.getBoundingClientRect(),p=r.documentElement.getBoundingClientRect();d=u.left-p.left||0,c=u.top-p.top||0}t.left=n.left+i-s-d,t.top=n.top+a-l-c,t.width="width"in n?n.width:n.right-n.left,t.height="height"in n?n.height:n.bottom-n.top}return t},Le=function(e){if(!e)return!1;var t=p(e,null);if(!t)return!1;var n=v(t.height)>0,i=v(t.width)>0,a=v(t.top)>=0,o=v(t.left)>=0,r=n&&i&&a&&o,s=r?null:Be(e),l="none"!==t.display&&"collapse"!==t.visibility&&(r||!!s&&(n||s.height>0)&&(i||s.width>0)&&(a||s.top>=0)&&(o||s.left>=0));return l},He=function(){d(j),j=0,u(G),G=0},We=function(){var e;if(i&&(e=Ee(B.bridge))){var t=Be(i);T(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+je(Z.zIndex)})}},ze=function(e){B.ready===!0&&(B.bridge&&"function"==typeof B.bridge.setHandCursor?B.bridge.setHandCursor(e):B.ready=!1)},je=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||y(e)?"string"==typeof e&&(t=je(f(e,10))):t=e,"number"==typeof t?t:"auto"},Ge=function(e){var t=/(\r\n|\r|\n)/g;return"string"==typeof e&&Z.fixLineEndings===!0&&(N()?/((^|[^\r])\n|\r([^\n]|$))/.test(e)&&(e=e.replace(t,"\r\n")):/\r/.test(e)&&(e=e.replace(t,"\n"))),e},Ye=function(t){var n,i,a,o=B.sandboxed,r=null;if(t=t===!0,O===!1)r=!1;else{try{i=e.frameElement||null}catch(s){a={name:s.name,message:s.message}}if(i&&1===i.nodeType&&"IFRAME"===i.nodeName)try{r=i.hasAttribute("sandbox")}catch(s){r=null}else{try{n=document.domain||null}catch(s){n=null}(null===n||a&&"SecurityError"===a.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(a.message.toLowerCase()))&&(r=!0)}}return B.sandboxed=r,o===r||t||Ve(m),r},Ve=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function i(e){e&&(l=!0,e.version&&(u=t(e.version)),!u&&e.description&&(u=t(e.description)),e.filename&&(c=n(e.filename)))}var a,o,r,l=!1,d=!1,c=!1,u="";if(s.plugins&&s.plugins.length)a=s.plugins["Shockwave Flash"],i(a),s.plugins["Shockwave Flash 2.0"]&&(l=!0,u="2.0.0.11");else if(s.mimeTypes&&s.mimeTypes.length)r=s.mimeTypes["application/x-shockwave-flash"],a=r&&r.enabledPlugin,i(a);else if("undefined"!=typeof e){d=!0;try{o=new e("ShockwaveFlash.ShockwaveFlash.7"),l=!0,u=t(o.GetVariable("$version"))}catch(p){try{o=new e("ShockwaveFlash.ShockwaveFlash.6"),l=!0,u="6.0.21"}catch(h){try{o=new e("ShockwaveFlash.ShockwaveFlash"),l=!0,u=t(o.GetVariable("$version"))}catch(m){d=!1}}}}B.disabled=l!==!0,B.outdated=u&&v(u)<v(L),B.version=u||"0.0.0",B.pluginType=c?"pepper":d?"activex":l?"netscape":"unknown"};Ve(m),Ye(!0);var Ke=function(){return this instanceof Ke?void("function"==typeof Ke._createClient&&Ke._createClient.apply(this,S(arguments))):new Ke};C(Ke,"version",{value:"2.3.0-beta.1",writable:!1,configurable:!0,enumerable:!0}),Ke.config=function(){return J.apply(this,S(arguments))},Ke.state=function(){return ee.apply(this,S(arguments))},Ke.isFlashUnusable=function(){return te.apply(this,S(arguments))},Ke.on=function(){return ne.apply(this,S(arguments))},Ke.off=function(){return ie.apply(this,S(arguments))},Ke.handlers=function(){return ae.apply(this,S(arguments))},Ke.emit=function(){return oe.apply(this,S(arguments))},Ke.create=function(){return re.apply(this,S(arguments))},Ke.destroy=function(){return se.apply(this,S(arguments))},Ke.setData=function(){return le.apply(this,S(arguments))},Ke.clearData=function(){return de.apply(this,S(arguments))},Ke.getData=function(){return ce.apply(this,S(arguments))},Ke.focus=Ke.activate=function(){return ue.apply(this,S(arguments))},Ke.blur=Ke.deactivate=function(){return pe.apply(this,S(arguments))},Ke.activeElement=function(){return he.apply(this,S(arguments))};var Xe=0,Qe={},Ze=0,Je={},et={};T(Z,{autoActivate:!0});var tt=function(e){var t=this;t.id=""+Xe++,Qe[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),Ke.on("*",function(e){return t.emit(e)}),Ke.on("destroy",function(){t.destroy()}),Ke.create()},nt=function(e,i){var a,o,r,s={},l=Qe[this.id],d=l&&l.handlers;if(!l)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&&e)r=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof i)for(a in e)A.call(e,a)&&"string"==typeof a&&a&&"function"==typeof e[a]&&this.on(a,e[a]);if(r&&r.length){for(a=0,o=r.length;o>a;a++)e=r[a].replace(/^on/,""),s[e]=!0,d[e]||(d[e]=[]),d[e].push(i);if(s.ready&&B.ready&&this.emit({type:"ready",client:this}),s.error){for(a=0,o=K.length;o>a;a++)if(B[K[a].replace(/^flash-/,"")]){this.emit({type:"error",name:K[a],client:this});break}n!==t&&Ke.version!==n&&this.emit({type:"error",name:"version-mismatch",jsVersion:Ke.version,swfVersion:n})}}return this},it=function(e,t){var n,i,a,o,r,s=Qe[this.id],l=s&&s.handlers;if(!l)return this;if(0===arguments.length)o=w(l);else if("string"==typeof e&&e)o=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)A.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(o&&o.length)for(n=0,i=o.length;i>n;n++)if(e=o[n].toLowerCase().replace(/^on/,""),r=l[e],r&&r.length)if(t)for(a=r.indexOf(t);-1!==a;)r.splice(a,1),a=r.indexOf(t,a);else r.length=0;return this},at=function(e){var t=null,n=Qe[this.id]&&Qe[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:E(n)),t},ot=function(e){if(ct.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=T({},e));var t=T({},ge(e),{client:this});ut.call(this,t)}return this},rt=function(e){if(!Qe[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=pt(e);for(var t=0;t<e.length;t++)if(A.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===Je[e[t].zcClippingId].indexOf(this.id)&&Je[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Ze++,Je[e[t].zcClippingId]=[this.id],Z.autoActivate===!0&&ht(e[t]));var n=Qe[this.id]&&Qe[this.id].elements;-1===n.indexOf(e[t])&&n.push(e[t])}return this},st=function(e){var t=Qe[this.id];if(!t)return this;var n,i=t.elements;e="undefined"==typeof e?i.slice(0):pt(e);for(var a=e.length;a--;)if(A.call(e,a)&&e[a]&&1===e[a].nodeType){for(n=0;-1!==(n=i.indexOf(e[a],n));)i.splice(n,1);var o=Je[e[a].zcClippingId];if(o){for(n=0;-1!==(n=o.indexOf(this.id,n));)o.splice(n,1);0===o.length&&(Z.autoActivate===!0&&mt(e[a]),delete e[a].zcClippingId)}}return this},lt=function(){var e=Qe[this.id];return e&&e.elements?e.elements.slice(0):[]},dt=function(){Qe[this.id]&&(this.unclip(),this.off(),delete Qe[this.id])},ct=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=Qe[this.id],n=t&&t.elements,i=!!n&&n.length>0,a=!e.target||i&&-1!==n.indexOf(e.target),o=e.relatedTarget&&i&&-1!==n.indexOf(e.relatedTarget),r=e.client&&e.client===this;return t&&(a||o||r)?!0:!1},ut=function(e){var t=Qe[this.id];if("object"==typeof e&&e&&e.type&&t){var n=ye(e),i=t&&t.handlers["*"]||[],a=t&&t.handlers[e.type]||[],r=i.concat(a);if(r&&r.length){var s,l,d,c,u,p=this;for(s=0,l=r.length;l>s;s++)d=r[s],c=p,"string"==typeof d&&"function"==typeof o[d]&&(d=o[d]),"object"==typeof d&&d&&"function"==typeof d.handleEvent&&(c=d,d=d.handleEvent),"function"==typeof d&&(u=T({},e),be(d,c,[u],n))}}},pt=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},ht=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=o.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=o.event))&&(t(n),Ke.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),et[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},mt=function(e){if(e&&1===e.nodeType){var t=et[e.zcClippingId];if("object"==typeof t&&t){for(var n,i,a=["move","leave","enter","out","over"],o=0,r=a.length;r>o;o++)n="mouse"+a[o],i=t[n],"function"==typeof i&&e.removeEventListener(n,i,!1);delete et[e.zcClippingId]}}};Ke._createClient=function(){tt.apply(this,S(arguments))},Ke.prototype.on=function(){return nt.apply(this,S(arguments))},Ke.prototype.off=function(){return it.apply(this,S(arguments))},Ke.prototype.handlers=function(){return at.apply(this,S(arguments))},Ke.prototype.emit=function(){return ot.apply(this,S(arguments))},Ke.prototype.clip=function(){return rt.apply(this,S(arguments))},Ke.prototype.unclip=function(){return st.apply(this,S(arguments))},Ke.prototype.elements=function(){return lt.apply(this,S(arguments))},Ke.prototype.destroy=function(){return dt.apply(this,S(arguments))},Ke.prototype.setText=function(e){if(!Qe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.setData("text/plain",e),this},Ke.prototype.setHtml=function(e){if(!Qe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.setData("text/html",e),this},Ke.prototype.setRichText=function(e){if(!Qe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.setData("application/rtf",e),this},Ke.prototype.setData=function(){if(!Qe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.setData.apply(this,S(arguments)),this},Ke.prototype.clearData=function(){if(!Qe[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.clearData.apply(this,S(arguments)),this},Ke.prototype.getData=function(){if(!Qe[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Ke.getData.apply(this,S(arguments))},"function"==typeof define&&define.amd?define(function(){return Ke}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Ke:e.ZeroClipboard=Ke}(function(){return this||window}()),angular.module("web",["ui.bootstrap","ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ngRoute","ngDragDrop","ui.utils","cfp.hotkeys","angularFileUpload","init"]),angular.module("web").config(["$routeProvider","hotkeysProvider",function(e,t){e.otherwise({redirectTo:"/"}),t.includeCheatSheet=!1}]),angular.module("web").run(["$rootScope","$location","$window",function(e,t,n){e.$on("$routeChangeError",function(){t.path("/")}),e.$on("$viewContentLoaded",function(e){for(var i=t.path(),a=["/edit-diagram/","/finish-password-reset/"],o=0;o<a.length;o++)if(i.startsWith(a[o])){i=a[o];break}n.ga("send","pageview",i)})}]),angular.module("web").factory("pageAccessService",["sessionService","$rootScope","$location","$q",function(e,t,n,i){var a={};return a.requireUser=function(){return e.getUserPromise()},a.requireNoUser=function(){var t=i.defer();return e.getUserPromise().then(function(){t.reject(!1)},function(){t.resolve(!0)}),t.promise},a}]),angular.module("init",[]).run(["sessionService",function(e){e.getUserPromise()}]),angular.module("web").config(["$routeProvider",function(e){e.when("/",{templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("web").controller("MainCtrl",["$scope","$location","$anchorScroll",function(e,t,n){e.jumpTo=function(e,t){e.preventDefault(),e.stopPropagation();var n=$(t).offset().top-25;$("body").animate({scrollTop:n},400)}}]),angular.module("web").config(["$routeProvider",function(e){e.when("/legacy",{templateUrl:"app/legacy/legacy.html",controller:"LegacyCtrl"})}]),angular.module("web").controller("LegacyCtrl",["$scope","$window",function(e,t){e.goLegacy=function(){t.open("http://legacy.erdplus.com","_blank")}}]),angular.module("web").config(["$routeProvider",function(e){e.when("/login",{templateUrl:"app/login/login.html",controller:"LoginCtrl",resolve:{requireNoUser:["pageAccessService",function(e){return e.requireNoUser()}]}})}]),angular.module("web").controller("LoginCtrl",["$scope","sessionService","$location","$timeout",function(e,t,n,i){e.credentials={},e.login=function(){e.$emit("clearSiteErrors"),
t.login(e.credentials.email,e.credentials.password,e.credentials.remember).then(function(){n.path("/diagrams"),n.url(n.path())},function(t){e.$emit("siteError","Unknown user or incorrect password.")})},e.setup=function(){var t=n.search();"string"==typeof t.email&&t.email.length>1?(e.credentials.email=t.email,e.focusTextInput("#passwordInput")):e.focusTextInput("#emailInput")},e.focusTextInput=function(e){i(function(){var t=angular.element(e);t.focus(),t.select()},0)},e.loginOnEnter=function(t){13===t.charCode&&e.login()},e.resetPassword=function(){n.path("/request-password-reset")},e.setup()}]),angular.module("web").config(["$routeProvider",function(e){e.when("/logout",{templateUrl:"app/logout/logout.html",controller:"LogoutCtrl"})}]),angular.module("web").controller("LogoutCtrl",["sessionService","$location","$window",function(e,t,n){e.logout().then(function(){t.path("/"),n.location.reload()},function(){t.path("/")})}]),angular.module("web").config(["$routeProvider",function(e){e.when("/diagrams",{templateUrl:"app/diagrams/diagrams.html",controller:"DiagramsCtrl",resolve:{requireUser:["pageAccessService",function(e){return e.requireUser()}]}})}]),angular.module("web").controller("DiagramsCtrl",["$scope","folderService","diagramService","$location","$modal","$rootScope",function(e,t,n,i,a,o){t.init(),n.init(),e.toggleFolder=function(e,n){e.stopPropagation(),t.toggleFolder(n)},e.selectFolder=function(e){t.selectFolder(e)},e.dropDiagrams=function(e,t){var i=t.draggable.context.attributes.getNamedItem("data-diagram-id").value,a=e.target.attributes.getNamedItem("data-folder-id").value;n.completeDragDrop(i,a)},e.newFolder=function(){t.createSubfolder(o.currentFolder)},e.enableNewFolder=function(){return null!==o.currentFolder&&void 0!==o.currentFolder&&0===o.currentFolder.trash},e.renameFolder=function(e,t){e.preventDefault(),e.stopPropagation(),a.open({templateUrl:"renameFolderModal.html",controller:"RenameFolderCtrl",resolve:{folder:function(){return t}}})},e.deleteFolder=function(e,t){e.preventDefault(),e.stopPropagation(),a.open({templateUrl:"confirmDeleteFolderModal.html",controller:"ConfirmDeleteFolderCtrl",size:"sm",resolve:{folder:function(){return t}}})},e.stopPropagationOnDropdown=function(e){e.preventDefault(),e.stopPropagation()},e.newDiagram=function(t,i){e.status.isopen=!1,t.preventDefault(),t.stopPropagation(),n.createDiagram(i)},e.convertToRelational=function(e,t){e.preventDefault(),e.stopPropagation(),n.convertErDiagramToRelational(t)},e.openDiagram=function(e,t){e.preventDefault(),e.stopPropagation(),i.path("/edit-diagram/"+t.id)},e.renameDiagram=function(e,t){e.preventDefault(),e.stopPropagation(),a.open({templateUrl:"renameDiagramModal.html",controller:"RenameDiagramCtrl",resolve:{diagram:function(){return t}}})},e.cloneDiagram=function(e,t){e.preventDefault(),e.stopPropagation(),n.cloneDiagram(t)},e.exportDiagram=function(e,t){e.preventDefault(),e.stopPropagation(),n.exportDiagram(t)},e.deleteDiagram=function(e,t){e.preventDefault(),e.stopPropagation(),a.open({templateUrl:"confirmDeleteDiagramModal.html",controller:"ConfirmDeleteDiagramCtrl",size:"sm",resolve:{diagram:function(){return t}}})},e.importDiagram=function(e){e&&1===e.length&&n.uploadDiagram(e[0])}}]),angular.module("web").factory("diagramService",["$q","$rootScope","$http","$window","$upload",function(e,t,n,i,a){var o={};return t.diagrams=[],o.init=function(){t.$watch("currentFolder",function(e,t){null!==e&&void 0!==e?(void 0===t||null===t||e.id!==t.id)&&o.getDiagramsOfFolder(e):o.getDiagramsOfFolder(null)})},o.getDiagramsOfFolder=function(e){null!==e&&void 0!==e?(t.$emit("clearSiteErrors"),n.get("/api/v1/folders/"+e.id+"/diagrams").success(function(e){t.diagrams=e}).error(function(){t.$emit("serverError")})):t.diagrams=[]},o.saveDiagram=function(e){t.$emit("clearSiteErrors"),n.put("/api/v1/diagrams/"+e.id,e).success(function(){}).error(function(){t.$emit("serverError")})},o.cloneDiagram=function(i){t.$emit("clearSiteErrors");var a=e.all([n.get("/api/v1/diagrams/"+i.id),n.get("/api/v1/diagrams/"+i.id+"/content")]);a.then(function(e){var i=e[0].data;i.name="Clone of "+i.name;var a=e[1].data;n.post("/api/v1/folders/"+t.currentFolder.id+"/diagrams",i).success(function(e){n.put("/api/v1/diagrams/"+e.id+"/content",a).success(function(){o.getDiagramsOfFolder(t.currentFolder)}).error(function(){t.$emit("serverError")})}).error(function(){t.$emit("serverError")})},function(){t.$emit("serverError")})},o.convertErDiagramToRelational=function(i){t.$emit("clearSiteErrors");var a=e.all([n.get("/api/v1/diagrams/"+i.id),n.get("/api/v1/diagrams/"+i.id+"/relational")]);a.then(function(e){var i=e[0].data;i.name=i.name+" (Converted from ERD)",i.kind="relational";var a={content:JSON.stringify(e[1].data.relational)};n.post("/api/v1/folders/"+t.currentFolder.id+"/diagrams",i).success(function(e){n.put("/api/v1/diagrams/"+e.id+"/content",a).success(function(){o.getDiagramsOfFolder(t.currentFolder)}).error(function(){t.$emit("serverError")})}).error(function(){t.$emit("serverError")})},function(){t.$emit("serverError")})},o.deleteDiagram=function(e){t.$emit("clearSiteErrors"),n["delete"]("/api/v1/diagrams/"+e.id).success(function(){o.getDiagramsOfFolder(t.currentFolder)}).error(function(){t.$emit("serverError")})},o.createDiagram=function(e){if(t.currentFolder){var i={kind:e};"er"===e?i.name="New ER Diagram":"relational"===e?i.name="New Relational Schema":"star"===e&&(i.name="New Star Schema"),t.$emit("clearSiteErrors"),n.post("/api/v1/folders/"+t.currentFolder.id+"/diagrams",i).success(function(e){t.diagrams.push(e)}).error(function(){t.$emit("serverError")})}},o.exportDiagram=function(e){i.location.href="/api/v1/diagrams/"+e.id+"/export"},o.exportDiagramById=function(e){i.location.href="/api/v1/diagrams/"+e+"/export"},o.loadDiagramContent=function(e,i){t.$emit("clearSiteErrors"),n.get("/api/v1/diagrams/"+e+"/content").success(function(e){i(e)}).error(function(){t.$emit("serverError"),i(null)})},o.loadDiagramSql=function(e,i){t.$emit("clearSiteErrors"),n.get("/api/v1/diagrams/"+e+"/sql").success(function(e){i(e)}).error(function(){t.$emit("serverError"),i(null)})},o.saveDiagramContent=function(e,i,a){var o={content:i};t.$emit("clearSiteErrors"),n.put("/api/v1/diagrams/"+e+"/content",o).success(function(e){a(!0)}).error(function(){t.$emit("serverError"),a(!1)})},o.completeDragDrop=function(e,i){var a={diagramId:e,folderId:i};t.$emit("clearSiteErrors"),n.post("/api/v1/dragdrop",a).success(function(){o.getDiagramsOfFolder(t.currentFolder)}).error(function(){t.$emit("serverError")})},o.uploadDiagram=function(e){a.upload({url:"/api/v1/folders/"+t.currentFolder.id+"/import",method:"POST",file:e}).success(function(){o.getDiagramsOfFolder(t.currentFolder)}).error(function(){t.$emit("serverError")})},o.openStandaloneFile=function(e){return a.upload({url:"/api/v1/standalone/open",method:"POST",file:e})},o}]),angular.module("web").filter("diagramDate",["$filter",function(e){return function(t,n,i){return i?e("date")(t.deletedAt,n):"0000"===t.updatedAt.substr(0,4)?e("date")(t.createdAt,n):e("date")(t.updatedAt,n)}}]),angular.module("web").controller("RenameDiagramCtrl",["$scope","$modalInstance","diagramService","diagram","$timeout",function(e,t,n,i,a){e.name=i.name,e.ok=function(){i.name=e.name,n.saveDiagram(i),t.close()},e.cancel=function(){t.close()};var o=function(){a(function(){var e=angular.element("#name")[0];e.focus(),e.select()},500)};o()}]),angular.module("web").controller("RenameFolderCtrl",["$scope","$modalInstance","folderService","folder","$timeout",function(e,t,n,i,a){e.name=i.name,e.ok=function(){i.name=e.name,n.updateFolder(i),t.close()},e.cancel=function(){t.close()};var o=function(){a(function(){var e=angular.element("#name")[0];e.focus(),e.select()},500)};o()}]),angular.module("web").controller("ConfirmDeleteDiagramCtrl",["$scope","$modalInstance","diagramService","diagram",function(e,t,n,i){e.name=i.name,e.ok=function(){n.deleteDiagram(i),t.close()},e.cancel=function(){t.close()}}]),angular.module("web").controller("ConfirmDeleteFolderCtrl",["$scope","$modalInstance","folderService","folder",function(e,t,n,i){e.name=i.name,e.ok=function(){n.deleteSubfolder(i),t.close()},e.cancel=function(){t.close()}}]),angular.module("web").config(["$routeProvider",function(e){e.when("/signup",{templateUrl:"app/signup/signup.html",controller:"SignupCtrl",resolve:{requireNoUser:["pageAccessService",function(e){return e.requireNoUser()}]}})}]),angular.module("web").controller("SignupCtrl",["$scope","$http","$location",function(e,t,n){e.user={},e.signup=function(){if(e.signupForm.name.$dirty=!0,e.signupForm.email.$dirty=!0,e.signupForm.password.$dirty=!0,e.signupForm.confirmPassword.$dirty=!0,e.signupForm.$valid){e.$emit("clearSiteErrors");var i={name:e.user.name,email:e.user.email,password:e.user.password};t.post("/api/v1/user",i).success(function(){n.path("/login").search("email",i.email)}).error(function(t){e.$emit("serverError",t)})}},e.nameHasError=function(){return e.signupForm.name.$invalid&&e.signupForm.name.$dirty},e.emailHasError=function(){return e.signupForm.email.$invalid&&e.signupForm.email.$dirty},e.passwordHasError=function(){return e.signupForm.password.$invalid&&e.signupForm.password.$dirty},e.confirmPasswordHasError=function(){return e.signupForm.confirmPassword.$invalid&&e.signupForm.confirmPassword.$dirty},e.validatePasswordsMatch=function(t){return t===e.user.password},e.resetPassword=function(){n.path("/request-password-reset")}}]),angular.module("web").config(["$routeProvider",function(e){e.when("/faq",{templateUrl:"app/faq/faq.html",controller:"FaqCtrl"})}]),angular.module("web").controller("FaqCtrl",["$scope","$location","$anchorScroll","$timeout",function(e,t,n,i){e.scrollToQuestion=function(e){t.hash(e),n()},i(function(){n()},300)}]),angular.module("web").config(["$routeProvider",function(e){e.when("/account",{templateUrl:"app/account/account.html",controller:"AccountCtrl",resolve:{currentUser:["pageAccessService",function(e){return e.requireUser()}]}})}]),angular.module("web").controller("AccountCtrl",["currentUser","$scope","accountService","$timeout","$rootScope","$location","$window",function(e,t,n,i,a,o,r){t.mode=null,t.changeUser={},t.isModeNull=function(){return null===t.mode},t.isMode=function(e){return t.mode===e},t.cancel=function(){t.mode=null},t.startNameChange=function(){t.nameForm.currentPassword.$dirty=!1,t.nameForm.name.$dirty=!1,t.changeUser={currentPassword:"",name:e.name},t.mode="name",s("#name")},t.saveNameChange=function(){if(t.nameForm.currentPassword.$dirty=!0,t.nameForm.name.$dirty=!0,t.nameForm.$valid){var i=n.updateName(e.id,t.changeUser.currentPassword,t.changeUser.name);i.then(function(n){a.user=n,e=n,t.mode=null})}},t.startEmailChange=function(){t.emailForm.currentPassword.$dirty=!1,t.emailForm.email.$dirty=!1,t.changeUser={currentPassword:"",email:e.email},t.mode="email",s("#email")},t.saveEmailChange=function(){if(t.emailForm.currentPassword.$dirty=!0,t.emailForm.email.$dirty=!0,t.emailForm.$valid){var i=n.updateEmail(e.id,t.changeUser.currentPassword,t.changeUser.email);i.then(function(n){a.user=n,e=n,t.mode=null})}},t.startPasswordChange=function(){t.passwordForm.currentPassword.$dirty=!1,t.passwordForm.password.$dirty=!1,t.passwordForm.confirmPassword.$dirty=!1,t.changeUser={currentPassword:"",password:"",confirmPassword:""},t.mode="password",s("#currentPassword")},t.savePasswordChange=function(){if(t.passwordForm.currentPassword.$dirty=!0,t.passwordForm.password.$dirty=!0,t.passwordForm.confirmPassword.$dirty=!0,t.passwordForm.$valid){var i=n.updatePassword(e.id,t.changeUser.currentPassword,t.changeUser.password);i.then(function(e){t.mode=null})}},t.startDelete=function(){t.mode="delete"},t.doDelete=function(){n["delete"](e.id).then(function(){a.hasUser=!1,a.user=null,a.session=null,o.path("/"),r.location.reload()})};var s=function(e){i(function(){var t=angular.element(e)[0];t.focus(),t.select()},1)};t.nameHasError=function(){return t.nameForm.name.$invalid&&t.nameForm.name.$dirty},t.emailHasError=function(){return t.emailForm.email.$invalid&&t.emailForm.email.$dirty},t.passwordHasError=function(){return t.passwordForm.password.$invalid&&t.passwordForm.password.$dirty},t.currentPasswordHasError=function(){return"name"===t.mode?t.nameForm.currentPassword.$invalid&&t.nameForm.currentPassword.$dirty:"email"===t.mode?t.emailForm.currentPassword.$invalid&&t.emailForm.currentPassword.$dirty:"password"===t.mode?t.passwordForm.currentPassword.$invalid&&t.passwordForm.currentPassword.$dirty:!1},t.confirmPasswordHasError=function(){return t.passwordForm.confirmPassword.$invalid&&t.passwordForm.confirmPassword.$dirty},t.validatePasswordsMatch=function(e){return e===t.changeUser.password}}]),angular.module("web").factory("accountService",["$q","$http","$rootScope",function(e,t,n){var i={};return i.updateName=function(e,t,n){var a={currentPassword:t,name:n};return i.update(e,a)},i.updateEmail=function(e,t,n){var a={currentPassword:t,email:n};return i.update(e,a)},i.updatePassword=function(e,t,n){var a={currentPassword:t,password:n};return i.update(e,a)},i.update=function(i,a){var o=e.defer();return n.$emit("clearSiteErrors"),t.put("/api/v1/user/"+i,a).success(function(e){o.resolve(e)}).error(function(e){n.$emit("serverError",e),o.reject(e)}),o.promise},i["delete"]=function(i){var a=e.defer();return n.$emit("clearSiteErrors"),t["delete"]("/api/v1/user/"+i).success(function(e){a.resolve(e)}).error(function(e){n.$emit("serverError",e),a.reject(e)}),a.promise},i}]),angular.module("web").factory("sessionService",["$q","$rootScope","$http",function(e,t,n){t.hasUser=!1,t.user=null,t.session=null;var i={};return i._getUserDeferred=null,i.login=function(a,o,r){var s=e.defer(),l={email:a,password:o,remember:r};return n.post("/api/v1/session",l).success(function(e){t.session=e,n.get("/api/v1/user/"+e.userId).success(function(e){t.user=e,t.hasUser=!0,i._getUserDeferred=s,s.resolve(e)}).error(function(){s.reject(!1)})}).error(function(){s.reject(!1)}),s.promise},i.logout=function(){var a=e.defer();return n["delete"]("/api/v1/session").success(function(){t.hasUser=!1,t.user=null,i._getUserDeferred=null,a.resolve(!0)}).error(function(){a.reject(!1),i._getUserDeferred=null}),a.promise},i.getUserPromise=function(){return null===i._getUserDeferred&&(i._getUserDeferred=e.defer(),n.get("/api/v1/session").success(function(e){t.session=e,n.get("/api/v1/user/"+e.userId).success(function(e){t.user=e,t.hasUser=!0,i._getUserDeferred.resolve(e)}).error(function(){i._getUserDeferred.reject(!1)})}).error(function(){i._getUserDeferred.reject(!1)})),i._getUserDeferred.promise},i}]),angular.module("web").factory("folderService",["$rootScope","$http",function(e,t){var n={};e.displayFolderListItem=function(e){return e.state.visible},n.init=function(){void 0===e.folderList&&(e.folderList=[],e.currentFolder=null,n.hasFolders()?e.currentFolder=e.folderList[0].folder:(e.currentFolder=void 0,n.loadRootFolders(e.user)),e.$watch("user",function(e,t){void 0!==e&&null!==e&&(void 0===t||null===t||e.id!==t.id)&&n.loadRootFolders(e)}))},n.toggleFolder=function(t){"unknown"===t.state.icon?n.loadSubfolders(t):"open"===t.state.icon?(o(t.state.subfolders,!1),t.state.icon="closed",null!==e.currentFolder&&e.currentFolder.state.visible===!1&&n.selectFolder(e.currentFolder[0])):"closed"===t.state.icon&&(o(t.state.subfolders,!0),t.state.icon="open")},n.selectFolder=function(t){e.currentFolder=t},n.loadRootFolders=function(a){null!==a?n.hasFolders()||(e.$emit("clearSiteErrors"),t.get("/api/v1/folders").success(function(t){e.folderTree=t,i(),e.currentFolder=t[0]}).error(function(){e.$emit("serverError")})):e.folderList=[]},n.loadSubfolders=function(n){n.state.icon="fetching",e.$emit("clearSiteErrors"),t.get("/api/v1/folders/"+n.id+"/folders").success(function(e){n.state.subfolders=e,i(),o(e,!0),n.state.icon="open"}).error(function(){e.$emit("serverError")})},n.hasFolders=function(){return null!==e.folderList&&void 0!==e.folderList&&e.folderList.length>0},n.createSubfolder=function(i){var a={name:"New Folder"};e.$emit("clearSiteErrors"),t.post("/api/v1/folders/"+i.id+"/folders",a).success(function(){n.loadSubfolders(i)}).error(function(){e.$emit("serverError")})},n.deleteSubfolder=function(i){var a=i.parentId;e.$emit("clearSiteErrors"),t["delete"]("/api/v1/folders/"+i.id).success(function(){var t=r(a);e.currentFolder=t,n.loadSubfolders(t)}).error(function(){e.$emit("serverError")})},n.updateFolder=function(n){e.$emit("clearSiteErrors"),t.put("/api/v1/folders/"+n.id,n).success(function(){}).error(function(){e.$emit("serverError")})};var i=function(){var t=a(e.folderTree,0);o(t,!0),e.folderList=t},a=function(e,t){var n=[];if(null!==e&&void 0!==e)for(var i=0;i<e.length;++i){void 0===e[i].state&&(e[i].state={depth:t,visible:!1,icon:e[i].trash?"trash":"unknown",subfolders:[]}),n.push(e[i]);var o=a(e[i].state.subfolders,t+1);n=n.concat(o)}return n},o=function(e,t){for(var n=0;n<e.length;++n)e[n].state.visible=t},r=function(t){for(var n=0;n<e.folderList.length;++n)if(e.folderList[n].id===t)return e.folderList[n];return null};return n}]),angular.module("web").controller("BaseEditorCtrl",["$scope","$modal","$timeout",function(e,t,n){e.DEFAULT_CANVAS_WIDTH=2e3,e.DEFAULT_CANVAS_HEIGHT=1e3,e.$on("deleteSelection",function(){e["delete"]()}),e.kind=null,e.canvasWidth=e.DEFAULT_CANVAS_WIDTH,e.canvasHeight=e.DEFAULT_CANVAS_HEIGHT,e.diagramDropdown={isOpen:!1},e.isMode=function(t){return e.stage.mouseMode===t},e.changeMode=function(t){e.$broadcast("commitContextEdit"),e.stage.mouseMode=t},e.canUndo=function(){return e.stage.undoManager.canUndo()},e.canRedo=function(){return e.stage.undoManager.canRedo()},e.undo=function(){e.$broadcast("commitContextEdit"),e.stage.undoManager.undo()},e.redo=function(){e.$broadcast("commitContextEdit"),e.stage.undoManager.redo()},e["delete"]=function(){e.$broadcast("endContextEdit"),e.stage.deleteSelection(),e.stage.draw()},e.exportImage=function(n){n.preventDefault(),n.stopPropagation(),e.$broadcast("commitContextEdit");t.open({templateUrl:"exportImage.html",controller:"ExportImageCtrl",windowClass:"editor-modal-window export-image",backdrop:!0,resolve:{stage:function(){return e.stage}}});e.diagramDropdown.isOpen=!1},e.printDiagram=function(t){t.preventDefault(),t.stopPropagation(),e.$broadcast("commitContextEdit"),e.diagramDropdown.isOpen=!1;var n=e.stage.canvas.toDataURL(),i="<!doctype html>";i+="<html>",i+="<head><title>Print canvas</title></head>",i+="<body>",i+='<img src="'+n+'">',i+="</body>",i+="</html>";var a=window.open("","","width=480,height=350");a.document.open(),a.document.write(i),a.document.close(),a.focus(),a.print(),a.close()},e.canvasDimensions=function(i){i.preventDefault(),i.stopPropagation(),e.diagramDropdown.isOpen=!1,e.$broadcast("commitContextEdit");var a=t.open({templateUrl:"canvasDimensions.html",controller:"CanvasDimensionsCtrl",windowClass:"canvas-dimensions",backdrop:!0,resolve:{stage:function(){return e.stage}}});a.result.then(function(t){e.canvasWidth=t.width,e.canvasHeight=t.height,e.stage.undoManager.clear(),n(function(){e.stage.draw()},0)},function(){})},e.stageActiveItemChanged=function(t){e.$broadcast("endContextEdit"),null!==t&&e.$broadcast("startContextEdit",t),e.$apply()},e.stageStartMove=function(){e.$broadcast("commitContextEdit"),e.stage.undoManager.startAction(),e.$apply(),null!==e.autoSavePromise&&n.cancel(e.autoSavePromise)},e.stageEndMove=function(){e.stage.undoManager.endAction(),e.$apply(),e.stageDirty()},e.stageConnectModeEnd=function(){e.$apply()},e.stageDirty=function(){},e.loadStage=function(t,i){e.kind=i;var a=new erd.DiagramArchive(e.stage),o=a.fromJson(t);if("number"==typeof o.width&&"number"==typeof o.height)e.canvasWidth=o.width,e.canvasHeight=o.height;else{var r=e.stage.getBounds();e.canvasWidth=Math.max(e.DEFAULT_CANVAS_WIDTH,100*Math.ceil(r.right/100)),e.canvasHeight=Math.max(e.DEFAULT_CANVAS_HEIGHT,100*Math.ceil(r.bottom/100))}n(function(){e.stage.draw()},0)},e.$on("selectNewShape",function(t,i){e.stage.clearSelection(),i.setIsSelected(!0),n(function(){e.stageActiveItemChanged(i),e.stage.draw()},0)})}]),angular.module("web").config(["$routeProvider",function(e){e.when("/edit-diagram/:diagramId",{templateUrl:"app/editor/editor.html",controller:"EditorCtrl",resolve:{requireUser:["pageAccessService",function(e){return e.requireUser()}]},hotkeys:[["del",null,"delete()"]]})}]),angular.module("web").controller("EditorCtrl",["$scope","$modal","$timeout","$routeParams","diagramService","$q","$controller","$window",function(e,t,n,i,a,o,r,s){r("BaseEditorCtrl",{$scope:e,$modal:t,$timeout:n}),e.saveState="clean",e.autoSavePromise=null,e.init=function(){e.diagramId=i.diagramId,e.stage=new erd.DiagramStage("diagram-canvas",e.stageActiveItemChanged,e.stageStartMove,e.stageEndMove,e.stageConnectModeEnd,e.stageDirty),a.loadDiagramContent(e.diagramId,function(t){t&&e.loadStage(t.content,t.kind)})},e.save=function(){null!==e.autoSavePromise&&n.cancel(e.autoSavePromise);var t=o.defer();e.$broadcast("commitContextEdit");var i=new erd.DiagramArchive(e.stage),r=i.toJson();return e.pendingSaveState="clean",e.saveState="saving",a.saveDiagramContent(e.diagramId,r,function(n){t.resolve(n),e.saveState=e.pendingSaveState}),t.promise},e.exportFile=function(t){t.preventDefault(),t.stopPropagation(),e.save().then(function(){e.diagramDropdown.isOpen=!1,a.exportDiagramById(e.diagramId)})},e.stageDirty=function(){"clean"===e.saveState&&(e.saveState="dirty"),e.pendingSaveState="dirty",null!==e.autoSavePromise&&n.cancel(e.autoSavePromise),erd.debug.enable||(e.autoSavePromise=n(function(){e.save(),e.autoSavePromise=null},8e3))},e.$on("$destroy",function(){null!==e.autoSavePromise&&e.save()}),e.exportSql=function(n){n.preventDefault(),n.stopPropagation(),s.ga("send","event","editor","export-sql"),e.diagramDropdown.isOpen=!1,e.save().then(function(){a.loadDiagramSql(e.diagramId,function(n){e.$broadcast("commitContextEdit");t.open({templateUrl:"exportSql.html",controller:"ExportSqlCtrl",windowClass:"editor-modal-window export-sql",backdrop:!0,resolve:{sql:function(){return n.sql},name:function(){return n.name}}})})})},e.init()}]),angular.module("web").config(["$routeProvider",function(e){e.when("/standalone",{templateUrl:"app/editor/standalone.html",controller:"StandaloneCtrl",hotkeys:[["del",null,"delete()"]]})}]),angular.module("web").controller("StandaloneCtrl",["$scope","$modal","$timeout","$controller","diagramService","$rootScope","$window",function(e,t,n,i,a,o,r){i("BaseEditorCtrl",{$scope:e,$modal:t,$timeout:n}),e.kind="none",e.documentName="untitled.erdplus",e.init=function(){e.stage=new erd.DiagramStage("diagram-canvas",e.stageActiveItemChanged,e.stageStartMove,e.stageEndMove,e.stageConnectModeEnd,e.stageDirty)},e.newDiagram=function(t,n){t.preventDefault(),t.stopPropagation(),e.diagramDropdown.isOpen=!1,o.$emit("clearSiteErrors"),o.$broadcast("endContextEdit"),e.stage.clear(),e.documentName="untitled.erdplus",e.kind=n,e.canvasWidth=e.DEFAULT_CANVAS_WIDTH,e.canvasHeight=e.DEFAULT_CANVAS_HEIGHT,e.stage.draw()},e.openFile=function(t){e.diagramDropdown.isOpen=!1,t&&1===t.length&&a.openStandaloneFile(t[0]).success(function(n){e.stage.clear(),e.loadStage(n.content,n.kind),e.documentName=t[0].name}).error(function(){o.$emit("serverError",{errors:[{messages:["Unable to open the document "+t[0].name]}]})})},e.saveFile=function(t){t.preventDefault(),t.stopPropagation(),e.diagramDropdown.isOpen=!1,o.$emit("clearSiteErrors");var n=new erd.DiagramArchive(e.stage),i=n.toJson(),a=new Blob([i],{type:"text/plain;charset=utf-8"});saveAs(a,e.documentName)},e.exportSql=function(n){n.preventDefault(),n.stopPropagation(),r.ga("send","event","editor","export-sql"),e.diagramDropdown.isOpen=!1,e.$broadcast("commitContextEdit");t.open({templateUrl:"exportSql.html",controller:"ExportSqlCtrl",windowClass:"editor-modal-window export-sql unavailable",backdrop:!0,resolve:{sql:function(){return""},name:function(){return""}}})},e.init()}]);var app=angular.module("web");app.controller("NavbarCtrl",["$scope","$location",function(e,t){e.getNavClass=function(e){return e.length>2&&t.path().length<2?"":0===e.length&&t.path().length>2?"":t.path().substr(0,e.length)===e?"active":""}}]);var app=angular.module("web");app.controller("ErrorCtrl",["$rootScope","$scope",function(e,t){t.showSiteErrors=!1,t.errors=[],t.closeError=function(){t.showSiteErrors=!1,t.errors=[]},t.showErrors=function(e){t.errors.push.apply(t.errors,e),t.errors=_.uniq(t.errors),t.showSiteErrors=!0},e.$on("siteError",function(e,n){_.isArray(n)?t.showErrors(n):t.showErrors([n])}),e.$on("serverError",function(e,n){if(null!==n&&void 0!==n&&Array.isArray(n.errors))for(var i=0;i<n.errors.length;++i){var a=n.errors[i].messages;t.showErrors(a)}else t.showErrors(["A problem occurred communicating with the server."])}),e.$on("clearSiteErrors",function(){t.closeError()})}]),window.erd=window.erd||{},function(){erd.settings={},erd.settings.shapeFill="#fff",erd.settings.arrowFill="#000",erd.settings.selectedShapeFill="#aff",erd.settings.stroke="#000",erd.settings.lineWidth=1,erd.settings.font="12px Helvetica",erd.settings.smallFont="9px Helvetica",erd.settings.boldFont="Bold 12px Helvetica",erd.settings.dashArray=[5,3],erd.settings.fontColor="#000",erd.settings.selectRectFill="rgba(0,255,255,0.5)",erd.settings.connectMissStroke="#d00",erd.settings.connectHitStroke="#0c0",erd.settings.connectStrokeWidth=3,erd.settings.labelResizeShapeFill="#0c0"}(),window.erd=window.erd||{},function(){erd.Selectable=function(){},erd.Selectable.prototype._isSelected=!1,erd.Selectable.prototype.clearSelection=function(){this._isSelected=!1},erd.Selectable.prototype.getIsSelected=function(){return this._isSelected},erd.Selectable.prototype.setIsSelected=function(e){this._isSelected=e},erd.Selectable.prototype.toggleSelected=function(){this._isSelected=!this._isSelected},erd.Selectable.prototype.postLoad=function(){}}(),window.erd=window.erd||{},function(){erd.AttributeOwner=function(){this.childAttributes=[]},erd.AttributeOwner.prototype.addAttribute=function(e){this.containsAttribute(e)||(this.childAttributes.push(e),e.setOwner(this))},erd.AttributeOwner.prototype.removeAttribute=function(e){this.childAttributes=_.reject(this.childAttributes,function(t){return t.details.id===e.details.id})},erd.AttributeOwner.prototype.containsAttribute=function(e){var t=_.find(this.childAttributes,function(t){return t.details.id===e.details.id});return void 0!==t},erd.AttributeOwner.prototype.moveChildAttributes=function(e,t){for(var n=0;n<this.childAttributes.length;++n)this.childAttributes[n].move(e,t)},erd.AttributeOwner.prototype.removeAllChildAttributes=function(e){for(var t=this.childAttributes.length-1;t>=0;--t)this.childAttributes[t].removeFromStage(e);this.childAttributes=[]},erd.AttributeOwner.prototype.getChildAttributeBounds=function(){for(var e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE},t=0;t<this.childAttributes.length;++t){var n=this.childAttributes[t].getBounds(!0);e=erd.utils.combineBounds(e,n)}return e};var e=[0,Math.PI/16,Math.PI/-16],t=[{x:0,y:-84},{x:72,y:-48},{x:100,y:0},{x:72,y:48},{x:0,y:84},{x:-72,y:48},{x:-100,y:0},{x:-72,y:-48},{x:0,y:-140},{x:86,y:-112},{x:165,y:-76},{x:188,y:-25},{x:188,y:25},{x:165,y:76},{x:86,y:112},{x:0,y:140},{x:-86,y:112},{x:-165,y:76},{x:-188,y:25},{x:-188,y:-25},{x:-165,y:-76},{x:-86,y:-112}];erd.AttributeOwner.prototype.getNextAutomaticPosition=function(){for(var n=this.getCenterPoint(),i=0;i<e.length;++i)for(var a=e[i],o=0;o<t.length;++o){var r=t[o],s={x:n.x+r.x,y:n.y+r.y};if(s=erd.utils.rotate(s,n,a),null===this.findAttributeAtPosition(s))return s}return{x:n.x,y:n.y+50}},erd.AttributeOwner.prototype.findAttributeAtPosition=function(e){for(var t=0;t<this.childAttributes.length;++t){var n=this.childAttributes[t];if(n.details.x===e.x&&n.details.y===e.y)return n}return null}}(),window.erd=window.erd||{},function(){erd.utils={};var e={x:0,y:0,maxWidth:void 0,underline:!1,dottedUnderline:!1,textAlign:"left",textBaseline:"middle",font:erd.settings.font,fillStyle:erd.settings.fontColor},t={x:0,y:0,width:100,height:100,font:erd.settings.font,fillStyle:erd.settings.fontColor};erd.utils.fillText=function(t,n,i){void 0===i&&(i={}),_.defaults(i,e),t.save(),t.font=i.font,t.fillStyle=i.fillStyle,t.textAlign=i.textAlign,t.textBaseline=i.textBaseline,"number"==typeof i.maxWidth?t.fillText(n,i.x,i.y,i.maxWidth):t.fillText(n,i.x,i.y);var a=t.measureText(n);if(i.underline){var o,r,s=Math.min(a.width,i.maxWidth);"center"===i.textAlign?(o=i.x-s/2,r=i.y+5.5):"left"===i.textAlign&&(o=i.x,r=i.y+5.5),t.beginPath(),i.dottedUnderline?t.setLineDash(erd.settings.dashArray):t.setLineDash([]),t.lineWidth=erd.settings.strokeWidth,t.strokeStyle=erd.settings.stroke,t.moveTo(o,r),t.lineTo(o+s,r),t.stroke()}return t.restore(),a},erd.utils.wrapText=function(e,n,i){void 0===i&&(i={}),_.defaults(i,t),e.save(),e.font=i.font,e.fillStyle=i.fillStyle,e.textAlign=i.textAlign,e.textBaseline=i.textBaseline;var a=parseInt(i.font)+2,o=erd.utils._fragmentText(e,n,i.width),r=i.y;if("center"===i.textAlign&&"middle"===i.textBaseline&&o.length>0){var s=a*(o.length-1);r-=s/2}for(var l=0;l<o.length;++l){var d=o[l],c={x:i.x,y:r,dottedUnderline:i.dottedUnderline,underline:i.underline,textAlign:i.textAlign,textBaseline:i.textBaseline,maxWidth:i.maxWidth};if(erd.utils.fillText(e,d,c),r+=a,i.height-r<a)break}e.restore()},erd.utils._fragmentText=function(e,t,n){var i=t.split(" "),a=[],o="";if(e.measureText(t).width<n)return[t];for(;i.length>0;){for(;e.measureText(i[0]).width>=n;){var r=i[0];i[0]=r.slice(0,-1),i.length>1?i[1]=r.slice(-1)+i[1]:i.push(r.slice(-1))}e.measureText(o+i[0]).width<n?o+=i.shift()+" ":(a.push(o),o=""),0===i.length&&a.push(o)}return a},erd.utils.distance=function(e,t){var n=(t.x-e.x)*(t.x-e.x),i=(t.y-e.y)*(t.y-e.y);return Math.sqrt(n+i)},erd.utils.rectContainsPoint=function(e,t,n){return e.x<t&&e.y<n&&e.x+e.w>t&&e.y+e.h>n},erd.utils.combineBounds=function(e,t){return{left:Math.min(e.left,t.left),top:Math.min(e.top,t.top),right:Math.max(e.right,t.right),bottom:Math.max(e.bottom,t.bottom)}},erd.utils.rotate=function(e,t,n){var i=t.x+(e.x-t.x)*Math.cos(n)-(e.y-t.y)*Math.sin(n),a=t.y+(e.x-t.x)*Math.sin(n)+(e.y-t.y)*Math.cos(n);return{x:i,y:a}}}(),window.erd=window.erd||{},function(){erd.debug={},erd.debug.enable="true"===window.localStorage.getItem("debug"),erd.debug._activeStage=null,erd.debug.printStage=function(){if(null!==erd.debug._activeStage){for(var e=erd.debug._activeStage,t=0;t<e.shapes.length;++t){var n=e.shapes[t];erd.debug.printShape(n)}for(var i=0;i<e.connectors.length;++i){var a=e.connectors[i];erd.debug.printConnector(a)}}},erd.debug.printShape=function(e){var t=e.getType()+" "+e.details.name+" ("+e.details.id+")";"Relationship"===e.getType()&&(t=t+" slot entities "+e.details.slots[0].entityId+", "+e.details.slots[1].entityId),console.log(t)},erd.debug.printConnector=function(e){var t=e.sourceItem,n=e.destinationItem,i=e.getType()+" ("+e.details.id+") "+t.details.id+" -> "+n.details.id;"RelationshipConnector"===e.getType()&&(i=i+" slot index "+e.details.slotIndex),console.log(i)}}(),window.erd=window.erd||{},function(){erd.DiagramStage=function(t,n,i,a,o,r){this.factory=new erd.Factory(this),this.connect=new erd.ConnectHelper(this),this.shapes=[],this.connectors=[],this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.undoManager=new erd.UndoManager(this),this.activeItemChangedCallback=n,this.startMoveCallback=i,this.endMoveCallback=a,this.connectModeEndCallback=o,this.dirtyCallback=r,erd.debug._activeStage=this,this.scaleX=1,this.scaleY=1,e(this,"mousemove",this.onMouseMove),e(this,"mousedown",this.onMouseDown),e(this,"mouseup",this.onMouseUp),this.mouseHandlers={select:new erd.SelectMouseHandler(this),connect:new erd.ConnectMouseHandler(this),entity:new erd.EntityMouseHandler(this),attribute:new erd.AttributeMouseHandler(this),relationship:new erd.RelationshipMouseHandler(this),table:new erd.TableMouseHandler(this),
fact:new erd.FactMouseHandler(this),dimension:new erd.DimensionMouseHandler(this),label:new erd.LabelMouseHandler(this)},this.mouseMode="select"},erd.DiagramStage.prototype.setScale=function(e,t){this.scaleX=e,this.scaleY=t},erd.DiagramStage.prototype.clear=function(){this.factory=new erd.Factory(this),this.shapes=[],this.connectors=[],this.undoManager.clear()},erd.DiagramStage.prototype.handleMouseDropItem=function(e){this.undoManager.startAction(),this.addItem(e),this.draw(),this.undoManager.endAction(),this.invokeActiveItemChangedCallback(e),this.mouseMode="select"},erd.DiagramStage.prototype.invokeActiveItemChangedCallback=function(e){this.activeItemChangedCallback(e)},erd.DiagramStage.prototype.invokeStartMoveCallback=function(){this.startMoveCallback()},erd.DiagramStage.prototype.invokeEndMoveCallback=function(){this.endMoveCallback()},erd.DiagramStage.prototype.invokeConnectModeEndCallback=function(){this.connectModeEndCallback()},erd.DiagramStage.prototype.invokeDirtyCallback=function(){this.dirtyCallback()},erd.DiagramStage.prototype.hitTest=function(e,t){for(var n=this.shapes.length-1;n>=0;n--)if(this.shapes[n].hitTest(e,t))return this.shapes[n];return null},erd.DiagramStage.prototype.moveSelectedShapes=function(e,t){for(var n=0;n<this.shapes.length;++n)this.shapes[n].getIsSelected()&&this.shapes[n].move(e,t);for(var i=0;i<this.shapes.length;++i)this.shapes[i].moved=!1},erd.DiagramStage.prototype.onMouseMove=function(e,t,n){this.mouseHandlers[this.mouseMode].onMouseMove(e,t,n)},erd.DiagramStage.prototype.onMouseDown=function(e,t,n){this.mouseHandlers[this.mouseMode].onMouseDown(e,t,n)},erd.DiagramStage.prototype.onMouseUp=function(e,t,n){this.mouseHandlers[this.mouseMode].onMouseUp(e,t,n)},erd.DiagramStage.prototype.draw=function(){var e=this.context;e.save(),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.scale(this.scaleX,this.scaleY);for(var t=0;t<this.connectors.length;++t)this.connectors[t].draw(e);for(var n=0;n<this.shapes.length;++n)this.shapes[n].draw(e);e.restore(),this.mouseHandlers[this.mouseMode].drawSpecial(e)},erd.DiagramStage.prototype.clearSelection=function(){for(var e=0;e<this.shapes.length;e++)this.shapes[e].clearSelection()},erd.DiagramStage.prototype.selectedCount=function(){for(var e=0,t=this.shapes.length-1;t>=0;t--){var n=this.shapes[t];n.getIsSelected()&&(e+=1)}return e},erd.DiagramStage.prototype.selectByRect=function(e){for(var t=0;t<this.shapes.length;++t)this.shapes[t].containedBy(e)&&this.shapes[t].setIsSelected(!0)},erd.DiagramStage.prototype.deleteSelection=function(){if(this.selectedCount()>0){this.undoManager.startAction();for(var e=this.shapes.length-1;e>=0;e--){var t=this.shapes[e];t.getIsSelected()&&this.shapes[e].removeFromStage(this)}this.undoManager.endAction()}},erd.DiagramStage.prototype.addItem=function(e){switch(e.getType()){case"Entity":case"Attribute":case"Relationship":case"Table":case"Fact":case"Dimension":case"Label":this.shapes.push(e);break;case"Connector":case"RelationshipConnector":case"TableConnector":e.updateAnchors(),this.connectors.push(e);break;default:throw"erd.DiagramStage.addItem unable to add "+e.getType()}},erd.DiagramStage.prototype.removeItem=function(e){switch(e.getType()){case"Entity":case"Attribute":case"Relationship":case"Table":case"Fact":case"Dimension":case"Label":this.shapes=_.reject(this.shapes,function(t){return t.details.id===e.details.id});break;case"Connector":case"RelationshipConnector":case"TableConnector":this.connectors=_.reject(this.connectors,function(t){return t.details.id===e.details.id});break;default:throw"erd.DiagramStage.removeItem unable to remove "+e.getType()}},erd.DiagramStage.prototype.findById=function(e){"string"==typeof e&&(e=parseInt(e));for(var t=0;t<this.shapes.length;++t)if(this.shapes[t].details.id===e)return this.shapes[t];for(var n=0;n<this.connectors.length;++n)if(this.connectors[n].details.id===e)return this.connectors[n];return null},erd.DiagramStage.prototype.findConnectorByIds=function(e,t){for(var n=0;n<this.connectors.length;++n){var i=this.connectors[n];if(i.sourceItem.details.id===e&&i.destinationItem.details.id===t||i.sourceItem.details.id===t&&i.destinationItem.details.id===e)return i}return null},erd.DiagramStage.prototype.findByName=function(e){for(var t=0;t<this.shapes.length;++t)if(this.shapes[t].details.name===e)return this.shapes[t];return null},erd.DiagramStage.prototype.findAllByType=function(e){for(var t=[],n=0;n<this.shapes.length;++n)this.shapes[n].getType()===e&&t.push(this.shapes[n]);return t},erd.DiagramStage.prototype.getBounds=function(e){for(var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE},n=0;n<this.shapes.length;++n)if(e&&this.shapes[n].getIsSelected()){var i=this.shapes[n].getBounds(!0);t=erd.utils.combineBounds(t,i)}else if(!e){var i=this.shapes[n].getBounds(!1);t=erd.utils.combineBounds(t,i)}return t};var e=function(e,t,n){e.canvas.addEventListener(t,function(t){t.stopImmediatePropagation();var i=e.canvas.getBoundingClientRect(),a=t.clientX-i.left,o=t.clientY-i.top;n.call(e,t,a,o)})}}(),window.erd=window.erd||{},function(){var e=100,t=50,n=e/2,i=t/2,a=5,o=20;erd.EntityType={Regular:"regular",Weak:"weak",Associative:"associative"},erd.Entity=function(e){erd.Selectable.call(this),erd.AttributeOwner.call(this),this.details={name:"Entity",type:erd.EntityType.Regular,x:0,y:0},_.assign(this.details,e),this.moved=!1,this.centerAnchor=new erd.Anchor(this,0,0),this.entityAnchors=[new erd.EntityAnchor(this,-50-o,.5,"left"),new erd.EntityAnchor(this,-50.5+o,-25-o,"top"),new erd.EntityAnchor(this,.5,-25-o,"top"),new erd.EntityAnchor(this,50.5-o,-25-o,"top"),new erd.EntityAnchor(this,50+o,.5,"right"),new erd.EntityAnchor(this,50.5-o,25+o,"bottom"),new erd.EntityAnchor(this,.5,25+o,"bottom"),new erd.EntityAnchor(this,-50.5+o,25+o,"bottom")]},_.assign(erd.Entity.prototype,erd.Selectable.prototype),_.assign(erd.Entity.prototype,erd.AttributeOwner.prototype),erd.Entity.prototype.getType=function(){return"Entity"},erd.Entity.prototype.getCenterPoint=function(){return{x:this.details.x,y:this.details.y}},erd.Entity.prototype.hitTest=function(e,t){return this.details.x-n<e&&this.details.y-i<t&&this.details.x+n>e&&this.details.y+i>t},erd.Entity.prototype.containedBy=function(e){return erd.utils.rectContainsPoint(e,this.details.x,this.details.y)},erd.Entity.prototype.move=function(e,t){this.moved||(this.moved=!0,this.details.x+=e,this.details.y+=t,this.moveChildAttributes(e,t),this.updateConnectors())},erd.Entity.prototype.drawAsConnectTarget=function(a,o){this.draw(a),a.save(),a.beginPath(),a.translate(this.details.x,this.details.y),a.rect(-n,-i,e,t),a.strokeStyle=o,a.lineWidth=2*erd.settings.connectStrokeWidth,a.stroke(),a.restore()},erd.Entity.prototype.draw=function(o){o.save(),o.translate(this.details.x+.5,this.details.y+.5),o.beginPath(),this.getIsSelected()?o.fillStyle=erd.settings.selectedShapeFill:o.fillStyle=erd.settings.shapeFill,o.rect(-n,-i,e,t),o.lineWidth=erd.settings.strokeWidth,o.strokeStyle=erd.settings.stroke,o.fill(),o.stroke(),o.closePath(),this.details.type===erd.EntityType.Weak?(o.beginPath(),o.rect(-n+a,-i+a,e-2*a,t-2*a),o.stroke()):this.details.type===erd.EntityType.Associative&&(o.beginPath(),o.moveTo(0,-i),o.lineTo(n,0),o.lineTo(0,i),o.lineTo(-n,0),o.closePath(),o.stroke());var r=this.details.name;erd.debug.enable&&(r=r+" "+this.details.id),erd.utils.wrapText(o,r,{textAlign:"center",textBaseline:"middle",maxWidth:e}),o.restore();for(var s=0;s<this.entityAnchors.length;++s)this.entityAnchors[s].draw(o)},erd.Entity.prototype.updateConnectors=function(){for(var e=0;e<this.entityAnchors.length;++e){var t=this.entityAnchors[e];t.updateAllConnectors()}},erd.Entity.prototype.removeFromStage=function(e){this.centerAnchor.removeAllConnectorsFromStage(e);for(var t=0;t<this.entityAnchors.length;++t)this.entityAnchors[t].removeAllConnectorsFromStage(e);e.removeItem(this)},erd.Entity.prototype.getBounds=function(e){var t={left:this.details.x-n,top:this.details.y-i,right:this.details.x+n+1,bottom:this.details.y+i+1};if(e){var a=this.getChildAttributeBounds();t=erd.utils.combineBounds(t,a)}return t}}(),window.erd=window.erd||{},function(){var e=100,t=50,n=e/2,i=t/2;erd.Attribute=function(e){erd.Selectable.call(this),erd.AttributeOwner.call(this),this.details={name:"Attribute",isDerived:!1,isMultivalued:!1,isOptional:!1,isComposite:!1,isUnique:!1,x:0,y:0},_.assign(this.details,e),this.centerAnchor=new erd.Anchor(this,0,0),this.owner=null},_.assign(erd.Attribute.prototype,erd.Selectable.prototype),_.assign(erd.Attribute.prototype,erd.AttributeOwner.prototype),erd.Attribute.prototype.getType=function(){return"Attribute"},erd.Attribute.prototype.isPartiallyUnique=function(){return null!==this.owner&&"Entity"===this.owner.getType()&&"weak"===this.owner.details.type},erd.Attribute.prototype.getCenterPoint=function(){return{x:this.details.x,y:this.details.y}},erd.Attribute.prototype.hitTest=function(e,t){var a=e-this.details.x,o=t-this.details.y;return 1>=a*a/(n*n)+o*o/(i*i)},erd.Attribute.prototype.containedBy=function(e){return erd.utils.rectContainsPoint(e,this.details.x,this.details.y)},erd.Attribute.prototype.move=function(e,t){this.moved||(this.moved=!0,this.details.x+=e,this.details.y+=t,this.moveChildAttributes(e,t))},erd.Attribute.prototype.getOwner=function(){return this.owner},erd.Attribute.prototype.setOwner=function(e){this.owner=e},erd.Attribute.prototype.removeFromStage=function(e){this.centerAnchor.removeAllConnectorsFromStage(e),null!==this.owner&&this.owner.removeAttribute(this),e.removeItem(this)},erd.Attribute.prototype.drawAsConnectTarget=function(e,t){this.draw(e),e.save(),e.beginPath(),e.translate(this.details.x,this.details.y),e.scale(1,.5),e.strokeStyle=t,e.lineWidth=2*erd.settings.connectStrokeWidth,e.arc(0,0,n,0,2*Math.PI,!1),e.stroke(),e.restore()},erd.Attribute.prototype.draw=function(t){t.save(),t.translate(this.details.x,this.details.y),t.save(),t.beginPath(),t.scale(1,.5),this.details.isDerived?t.setLineDash(erd.settings.dashArray):t.setLineDash([]),this.getIsSelected()?t.fillStyle=erd.settings.selectedShapeFill:t.fillStyle=erd.settings.shapeFill,t.arc(0,0,n,0,2*Math.PI,!1),t.lineWidth=erd.settings.strokeWidth,t.strokeStyle=erd.settings.stroke,t.fill(),t.stroke(),this.details.isMultivalued&&(t.beginPath(),t.scale(1,.92),t.arc(0,0,n-3,0,2*Math.PI,!1),t.stroke()),t.restore();var i=this.details.name;this.details.isOptional?i+=" (O)":this.details.isComposite&&(i="( "+i+" )"),erd.utils.wrapText(t,i,{textAlign:"center",textBaseline:"middle",underline:this.details.isUnique,dottedUnderline:this.isPartiallyUnique(),maxWidth:e}),t.restore()},erd.Attribute.prototype.getBounds=function(e){var t={left:this.details.x-n,top:this.details.y-i,right:this.details.x+n+1,bottom:this.details.y+i+1};if(e){var a=this.getChildAttributeBounds();t=erd.utils.combineBounds(t,a)}return t}}(),window.erd=window.erd||{},function(){var e=100,t=50,n=e/2,i=t/2,a=8,o=5;erd.Relationship=function(e){erd.Selectable.call(this),erd.AttributeOwner.call(this),this.details={name:"Relationship",isIdentifying:!1,x:0,y:0,slots:[{slotIndex:0,minimum:"",maximum:"",participation:erd.ParticipationType.unspecified,cardinality:erd.CardinalityType.unspecified,role:"",entityId:0},{slotIndex:1,minimum:"",maximum:"",participation:erd.ParticipationType.unspecified,cardinality:erd.CardinalityType.unspecified,role:"",entityId:0}]},_.assign(this.details,e),this.centerAnchor=new erd.Anchor(this,0,0),this.outerAnchors=[new erd.RelationshipAnchor(this,-n,0,"left"),new erd.RelationshipAnchor(this,0,-i,"top"),new erd.RelationshipAnchor(this,n,0,"right"),new erd.RelationshipAnchor(this,0,i,"bottom")]},_.assign(erd.Relationship.prototype,erd.Selectable.prototype),_.assign(erd.Relationship.prototype,erd.AttributeOwner.prototype),erd.Relationship.prototype.getType=function(){return"Relationship"},erd.Relationship.prototype.getCenterPoint=function(){return{x:this.details.x,y:this.details.y}},erd.Relationship.prototype.getOppositeAnchor=function(e){switch(e.side){case"left":return this.outerAnchors[2];case"top":return this.outerAnchors[3];case"right":return this.outerAnchors[0];case"bottom":return this.outerAnchors[1]}},erd.Relationship.prototype.hitTest=function(e,t){return this.details.x-n<e&&this.details.y-i<t&&this.details.x+n>e&&this.details.y+i>t},erd.Relationship.prototype.containedBy=function(e){return erd.utils.rectContainsPoint(e,this.details.x,this.details.y)},erd.Relationship.prototype.move=function(e,t){this.moved||(this.moved=!0,this.details.x+=e,this.details.y+=t,this.moveChildAttributes(e,t),this.updateConnectors())},erd.Relationship.prototype.drawAsConnectTarget=function(e,t){this.draw(e),e.save(),e.beginPath(),e.translate(this.details.x,this.details.y),e.strokeStyle=t,e.lineWidth=2*erd.settings.connectStrokeWidth,e.moveTo(0,-i),e.lineTo(n,0),e.lineTo(0,i),e.lineTo(-n,0),e.closePath(),e.stroke(),e.restore()},erd.Relationship.prototype.draw=function(t){t.save(),t.translate(this.details.x+.5,this.details.y+.5),t.lineWidth=erd.settings.strokeWidth,t.strokeStyle=erd.settings.stroke,this.getIsSelected()?t.fillStyle=erd.settings.selectedShapeFill:t.fillStyle=erd.settings.shapeFill,t.beginPath(),t.moveTo(0,-i),t.lineTo(n,0),t.lineTo(0,i),t.lineTo(-n,0),t.closePath(),t.fill(),t.stroke(),this.details.isIdentifying&&(t.beginPath(),t.moveTo(0,-i+o),t.lineTo(n-a,0),t.lineTo(0,i-o),t.lineTo(-n+a,0),t.closePath(),t.stroke());var r=this.details.name;erd.debug.enable&&(r+=" "+this.details.id),erd.utils.wrapText(t,this.details.name,{textAlign:"center",textBaseline:"middle",maxWidth:e}),t.restore()},erd.Relationship.prototype.updateConnectors=function(){for(var e=0;e<this.outerAnchors.length;++e){var t=this.outerAnchors[e];t.updateAllConnectors()}},erd.Relationship.prototype.getSlot=function(e){return"number"==typeof e&&e>=0&&e<this.details.slots.length?this.details.slots[e]:null},erd.Relationship.prototype.getAvailableSlot=function(){for(var e=0;e<this.details.slots.length;++e)if(0===this.details.slots[e].entityId)return this.details.slots[e];return null},erd.Relationship.prototype.getSlotConnector=function(e){for(var t=this.details.slots[e].entityId,n=0;n<this.outerAnchors.length;++n)for(var i=this.outerAnchors[n],a=0;a<i.connectors.length;++a)if(i.connectors[a].entity.details.id===t&&i.connectors[a].details.slotIndex===e)return i.connectors[a];return null},erd.Relationship.prototype.removeFromStage=function(e){this.centerAnchor.removeAllConnectorsFromStage(e);for(var t=0;t<this.outerAnchors.length;++t)this.outerAnchors[t].removeAllConnectorsFromStage(e);e.removeItem(this)},erd.Relationship.prototype.relatedEntityCount=function(){for(var e=0,t=0;t<this.details.slots.length;++t)0!==this.details.slots[t].entityId&&(e+=1);return e},erd.Relationship.prototype.getBounds=function(e){var t={left:this.details.x-n,top:this.details.y-i,right:this.details.x+n+1,bottom:this.details.y+i+1};if(e){var a=this.getChildAttributeBounds();t=erd.utils.combineBounds(t,a)}return t}}(),window.erd=window.erd||{},function(){erd.Factory=function(e){this.stage=e,this.nextId=1},erd.Factory.prototype.entity=function(e){return this.initItem(new erd.Entity(e))},erd.Factory.prototype.attribute=function(e){return this.initItem(new erd.Attribute(e))},erd.Factory.prototype.relationship=function(e){return this.initItem(new erd.Relationship(e))},erd.Factory.prototype.table=function(e){return this.initItem(new erd.Table(e))},erd.Factory.prototype.fact=function(e){return this.initItem(new erd.Fact(e))},erd.Factory.prototype.dimension=function(e){return this.initItem(new erd.Dimension(e))},erd.Factory.prototype.label=function(e){return this.initItem(new erd.Label(e))},erd.Factory.prototype.initItem=function(e){return"number"==typeof e.details.id?this.nextId<=e.details.id&&(this.nextId=e.details.id+1):(e.details.id=this.nextId,this.nextId+=1),e},erd.Factory.prototype.createConnector=function(e,t,n){return this.initItem(new erd.Connector(e,t,n))},erd.Factory.prototype.createRelationshipConnector=function(e,t,n){return this.initItem(new erd.RelationshipConnector(e,t,n))},erd.Factory.prototype.createTableConnector=function(e,t,n){return this.initItem(new erd.TableConnector(e,t,n))}}(),window.erd=window.erd||{},function(){erd.Anchor=function(e,t,n){this.owner=e,this.dx=t,this.dy=n,this.connectors=[]},erd.Anchor.prototype.setOffsetX=function(e){this.dx=e},erd.Anchor.prototype.setOffsetY=function(e){this.dy=e},erd.Anchor.prototype.getPoint=function(){var e=this.owner.getCenterPoint();return{x:e.x+this.dx,y:e.y+this.dy}},erd.Anchor.prototype.addConnector=function(e){this.connectors.push(e)},erd.Anchor.prototype.removeConnector=function(e){this.connectors=_.reject(this.connectors,function(t){return t.details.id===e.details.id})},erd.Anchor.prototype.firstConnector=function(){return this.connectors.length>0?this.connectors[0]:null},erd.Anchor.prototype.countConnectors=function(){return this.connectors.length},erd.Anchor.prototype.updateAllConnectors=function(){for(var e=0;e<this.connectors.length;++e)this.connectors[e].updateAnchors()},erd.Anchor.prototype.removeAllConnectorsFromStage=function(e){for(var t=this.connectors.length-1;t>=0;--t){var n=this.connectors[t];n.removeFromStage(e)}}}(),window.erd=window.erd||{},function(){var e=20;erd.EntityAnchor=function(e,t,n,i){erd.Anchor.call(this,e,t,n),this.side=i},_.assign(erd.EntityAnchor.prototype,erd.Anchor.prototype),erd.EntityAnchor.prototype.draw=function(t){if(null!==this.firstConnector()){t.save();var n=this.getPoint();switch(t.translate(n.x,n.y),t.fillStyle=erd.settings.shapeFill,t.strokeStyle=erd.settings.stroke,t.save(),this.side){case"right":t.rotate(Math.PI/2);break;case"bottom":t.rotate(Math.PI);break;case"left":t.rotate(Math.PI/-2)}t.beginPath(),t.moveTo(0,0),t.lineTo(0,e),t.stroke();var i=this.firstConnector().getOppositeRelationshipSlot();null!==i?(this.drawCardinality(t,i.cardinality),this.drawParticipation(t,i.participation),t.restore(),this.drawExactConstraints(t,i.minimum,i.maximum),t.restore(),this.drawRole(t,i.role)):(t.restore(),t.restore())}},erd.EntityAnchor.prototype.drawExactConstraints=function(t,n,i){if(n.length>0||i.length>0){0===n.length&&(n="1"),0===i.length&&(i="M");var a="("+n+","+i+")";switch(this.side){case"top":case"bottom":erd.utils.fillText(t,a,{x:-e/2,textAlign:"right"});break;case"right":erd.utils.fillText(t,a,{y:e/2,textAlign:"left"});break;case"left":erd.utils.fillText(t,a,{y:-e/2,textAlign:"right"})}}},erd.EntityAnchor.prototype.drawRole=function(e,t){if("string"==typeof t){e.save();var n=this.getPoint(),i=this.firstConnector().destinationAnchor.getPoint(),a=(n.x+i.x)/2,o=(n.y+i.y)/2;e.translate(a,o),erd.utils.fillText(e,t,{textAlign:"center"}),e.restore()}},erd.EntityAnchor.prototype.drawParticipation=function(t,n){n===erd.ParticipationType.mandatory?(t.beginPath(),t.moveTo(-8,e/2-2.5),t.lineTo(8,e/2-2.5),t.stroke()):n===erd.ParticipationType.optional&&(t.beginPath(),t.scale(1,.4),t.arc(0,15,8,0,2*Math.PI,!1),t.fill(),t.stroke())},erd.EntityAnchor.prototype.drawCardinality=function(t,n){n===erd.CardinalityType.many?(t.moveTo(0,e-9),t.lineTo(-9,e),t.moveTo(0,e-9),t.lineTo(9,e),t.stroke()):n===erd.CardinalityType.one&&(t.beginPath(),t.moveTo(-8,e/2+4.5),t.lineTo(8,e/2+4.5),t.stroke())}}(),window.erd=window.erd||{},function(){erd.RelationshipAnchor=function(e,t,n,i){erd.Anchor.call(this,e,t,n),this.side=i},_.assign(erd.RelationshipAnchor.prototype,erd.Anchor.prototype)}(),window.erd=window.erd||{},function(){erd.Connector=function(e,t,n){this.sourceItem=e,this.destinationItem=t,this.sourceAnchor=null,this.destinationAnchor=null,this.details={},_.assign(this.details,n)},erd.Connector.prototype.draw=function(e){if(null!==this.sourceAnchor&&null!==this.destinationAnchor){var t=this.sourceAnchor.getPoint(),n=this.destinationAnchor.getPoint();e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.stroke(),erd.debug.enable&&erd.utils.fillText(e,this.details.id,{x:(t.x+n.x)/2,y:(t.y+n.y)/2})}},erd.Connector.prototype.getType=function(){return"Connector"},erd.Connector.prototype.updateAnchors=function(){(null===this.sourceAnchor||null===this.destinationAnchor)&&(this.sourceAnchor=this.sourceItem.centerAnchor,this.sourceAnchor.addConnector(this),this.destinationAnchor=this.destinationItem.centerAnchor,this.destinationAnchor.addConnector(this))},erd.Connector.prototype.removeFromStage=function(e){null!==this.sourceAnchor&&(this.sourceAnchor.removeConnector(this),this.sourceAnchor=null,this.sourceItem=null),null!==this.destinationAnchor&&(this.destinationAnchor.removeConnector(this),this.destinationAnchor=null,this.destinationItem=null),e.removeItem(this)}}(),window.erd=window.erd||{},function(){erd.ParticipationType={mandatory:"mandatory",optional:"optional",unspecified:"unspecified"},erd.CardinalityType={many:"many",one:"one",unspecified:"unspecified"},erd.RelationshipConnector=function(e,t,n){erd.Connector.call(this,e,t,n),this.entity=e,this.relationship=t},_.assign(erd.RelationshipConnector.prototype,erd.Connector.prototype),erd.RelationshipConnector.prototype.getType=function(){return"RelationshipConnector"},erd.RelationshipConnector.prototype.removeFromStage=function(e){var t=this.getRelationshipSlot();null!==t&&(t.entityId=0),erd.Connector.prototype.removeFromStage.call(this,e)},erd.RelationshipConnector.prototype.getRelationshipSlot=function(){return this.relationship.getSlot(this.details.slotIndex)},erd.RelationshipConnector.prototype.getOppositeRelationshipSlot=function(){var e=(this.details.slotIndex+1)%2,t=this.relationship.getSlot(e);return 0!==t.entityId?t:null},erd.RelationshipConnector.prototype.updateAnchors=function(){null!==this.sourceAnchor&&(this.sourceAnchor.removeConnector(this),this.sourceAnchor=null),null!==this.destinationAnchor&&(this.destinationAnchor.removeConnector(this),this.destinationAnchor=null);var e=this.getOtherConnector();null===e?this.updateAnchorsSingleConnector():this.isUnary()?this.updateAnchorsUnaryConnector(e):this.updateAnchorsDoubleConnector(e)},erd.RelationshipConnector.prototype.updateAnchorsSingleConnector=function(){var e=this.computeDistances(),t=this.getClosestPair(e);this.sourceAnchor=t.eAnchor,this.destinationAnchor=t.rAnchor,this.sourceAnchor.addConnector(this),this.destinationAnchor.addConnector(this)},erd.RelationshipConnector.prototype.updateAnchorsDoubleConnector_old=function(e){var t=this.computeDistances(),n=this.getClosestPair(t),i=e.computeDistances();e.replaceAnchors(null,null);var a=this.getClosestPair(i);if(n.distance<a.distance){this.sourceAnchor=n.eAnchor,this.destinationAnchor=n.rAnchor;var o=this.relationship.getOppositeAnchor(n.rAnchor),r=this.getClosestPairByAnchor(i,o).eAnchor;e.replaceAnchors(r,o)}else{e.replaceAnchors(a.eAnchor,a.rAnchor);var o=this.relationship.getOppositeAnchor(a.rAnchor),r=this.getClosestPairByAnchor(t,o).eAnchor;this.sourceAnchor=r,this.destinationAnchor=o}this.sourceAnchor.addConnector(this),this.destinationAnchor.addConnector(this)},erd.RelationshipConnector.prototype.updateAnchorsDoubleConnector=function(e){var t=this.computeDistances(),n=e.computeDistances();e.replaceAnchors(null,null);for(var i=Number.MAX_VALUE,a=null,o=0;o<this.relationship.outerAnchors.length;++o){var r={};r.rAnchor1=this.relationship.outerAnchors[o];var s=this.getClosestPairByAnchor(t,r.rAnchor1);r.eAnchor1=s.eAnchor,r.distance=s.distance,r.rAnchor2=this.relationship.getOppositeAnchor(r.rAnchor1),s=this.getClosestPairByAnchor(n,r.rAnchor2),r.eAnchor2=s.eAnchor,r.distance+=s.distance,r.distance<i&&(a=r,i=r.distance)}this.sourceAnchor=a.eAnchor1,this.destinationAnchor=a.rAnchor1,this.sourceAnchor.addConnector(this),this.destinationAnchor.addConnector(this),e.replaceAnchors(a.eAnchor2,a.rAnchor2)},erd.RelationshipConnector.prototype.updateAnchorsUnaryConnector=function(){for(var e=this.computeDistances(),t=[],n=0;n<e.length;++n)("top"===e[n].eAnchor.side||"bottom"===e[n].eAnchor.side)&&t.push(e[n]);e=t;var i,a,o=this.getOtherConnector(),r=this.relationship.getCenterPoint(),s=this.entity.getCenterPoint();Math.abs(r.x-s.x)<Math.abs(r.y-s.y)?this.details.id<o.details.id?(i=this.relationship.outerAnchors[0],a=this.relationship.outerAnchors[2]):(i=this.relationship.outerAnchors[2],a=this.relationship.outerAnchors[0]):this.details.id<o.details.id?(i=this.relationship.outerAnchors[1],a=this.relationship.outerAnchors[3]):(i=this.relationship.outerAnchors[3],a=this.relationship.outerAnchors[1]),o.replaceAnchors(null,null),this.sourceAnchor=this.getClosestPairByAnchor(e,i).eAnchor,this.destinationAnchor=i,this.sourceAnchor.addConnector(this),this.destinationAnchor.addConnector(this);var l=this.getClosestPairByAnchor(e,a).eAnchor;o.replaceAnchors(l,a)},erd.RelationshipConnector.prototype.replaceAnchors=function(e,t){null!==this.sourceAnchor&&(this.sourceAnchor.removeConnector(this),this.sourceAnchor=null),null!==this.destinationAnchor&&(this.destinationAnchor.removeConnector(this),this.destinationAnchor=null),null!==e&&(this.sourceAnchor=e,this.sourceAnchor.addConnector(this)),null!==t&&(this.destinationAnchor=t,this.destinationAnchor.addConnector(this))},erd.RelationshipConnector.prototype.getOtherConnector=function(){for(var e=null,t=0;t<this.relationship.outerAnchors.length;++t){var n=this.relationship.outerAnchors[t];null!==n.firstConnector()&&n.firstConnector().details.id!==this.details.id&&(e=n.firstConnector())}return e},erd.RelationshipConnector.prototype.isUnary=function(){return this.relationship.details.slots[0].entityId===this.relationship.details.slots[1].entityId},erd.RelationshipConnector.prototype.computeDistances=function(){for(var e=[],t=0;t<this.relationship.outerAnchors.length;++t)for(var n=0;n<this.entity.entityAnchors.length;++n){var i={rAnchor:this.relationship.outerAnchors[t],eAnchor:this.entity.entityAnchors[n]};i.distance=erd.utils.distance(i.rAnchor.getPoint(),i.eAnchor.getPoint()),e.push(i)}return e},erd.RelationshipConnector.prototype.getClosestPair=function(e){for(var t=0,n=1;n<e.length;++n)e[n].distance<e[t].distance&&0===e[n].eAnchor.countConnectors()&&(t=n);return e[t]},erd.RelationshipConnector.prototype.getClosestPairByAnchor=function(e,t){for(var n=Number.MAX_VALUE,i=-1,a=0;a<e.length;++a)t===e[a].rAnchor&&e[a].distance<n&&0===e[a].eAnchor.countConnectors()&&(n=e[a].distance,i=a);return e[i]}}(),window.erd=window.erd||{},function(){erd.ConnectHelper=function(e){this.stage=e},erd.ConnectHelper.prototype.items=function(e,t,n){if("object"!=typeof n&&(n={}),"object"==typeof e&&"object"==typeof t){var i=e.getType(),a=t.getType();if("Attribute"===i&&"Entity"===a)return this.attributeToEntity(e,t);if("Entity"===i&&"Attribute"===a)return this.attributeToEntity(t,e);if("Attribute"===i&&"Attribute"===a){if(e.details.isComposite)return this.attributeToAttribute(t,e);if(t.details.isComposite)return this.attributeToAttribute(e,t)}else{if("Entity"===i&&"Relationship"===a)return this.entityToRelationship(e,t,n);if("Relationship"===i&&"Entity"===a)return this.entityToRelationship(t,e,n);if("Attribute"===i&&"Relationship"===a)return this.attributeToRelationship(e,t);if("Relationship"===i&&"Attribute"===a)return this.attributeToRelationship(t,e);if("Table"===i&&"Table"===a){if(e.hasPk())return this.tableToTable(e,t,n);if(t.hasPk())return this.tableToTable(t,e,n)}else if("Dimension"===i&&"Dimension"===a){if(e.hasPk())return this.tableToTable(e,t,n);if(t.hasPk())return this.tableToTable(t,e,n)}else if("Dimension"===i&&"Fact"===a&&e.hasPk())return this.tableToTable(e,t,n)}}},erd.ConnectHelper.prototype.attributeToEntity=function(e,t){this.disconnectAttribute(e);var n=this.stage.factory.createConnector(e,t);t.addAttribute(e),this.stage.addItem(n)},erd.ConnectHelper.prototype.attributeToRelationship=function(e,t){this.disconnectAttribute(e);var n=this.stage.factory.createConnector(e,t);t.addAttribute(e),this.stage.addItem(n)},erd.ConnectHelper.prototype.attributeToAttribute=function(e,t){this.disconnectAttribute(e);var n=this.stage.factory.createConnector(e,t);t.addAttribute(e),this.stage.addItem(n)},erd.ConnectHelper.prototype.entityToRelationship=function(e,t,n){var i=t.getSlot(n.slotIndex);null===i&&(i=t.getAvailableSlot(),n.slotIndex=i.slotIndex),i.entityId=e.details.id;var a=this.stage.factory.createRelationshipConnector(e,t,n);this.stage.addItem(a),t.updateConnectors()},erd.ConnectHelper.prototype.tableToTable=function(e,t,n){if("number"!=typeof n.fkAttributeId||null===t.getAttributeById(n.fkAttributeId)){var i=e.createFk(e);t.addAttribute(i);var a=this.stage.factory.createTableConnector(e,t,{fkAttributeId:i.id});return this.stage.addItem(a),i}var a=this.stage.factory.createTableConnector(e,t,n);this.stage.addItem(a)},erd.ConnectHelper.prototype.disconnectAttribute=function(e){if(null!==e.getOwner()){var t=this.stage.findConnectorByIds(e.details.id,e.getOwner().details.id);null!==t&&this.stage.removeItem(t),e.getOwner().removeAttribute(e),e.setOwner(null)}}}(),window.erd=window.erd||{},function(){var e=2;erd.DiagramArchive=function(e){this.stage=e},erd.DiagramArchive.prototype.toJson=function(){var t={version:e,www:"erdplus.com",shapes:[],connectors:[],width:this.stage.canvas.width,height:this.stage.canvas.height};return this.storeShapes(t),this.storeConnectors(t),JSON.stringify(t)},erd.DiagramArchive.prototype.storeShapes=function(e){for(var t=0;t<this.stage.shapes.length;++t){var n=this.stage.shapes[t],i={type:n.getType(),details:_.clone(n.details)};e.shapes.push(i)}},erd.DiagramArchive.prototype.storeConnectors=function(e){for(var t=0;t<this.stage.connectors.length;++t){var n=this.stage.connectors[t],i={type:n.getType(),details:_.clone(n.details),source:n.sourceItem.details.id,destination:n.destinationItem.details.id};e.connectors.push(i)}},erd.DiagramArchive.prototype.fromJson=function(t){var n=JSON.parse(t);this.stage.shapes=[],this.stage.connectors=[],"undefined"!=typeof n.shapes&&this.loadShapes(n.shapes),"undefined"!=typeof n.connectors&&this.loadConnectors(n.connectors);for(var i=0;i<this.stage.shapes.length;++i)this.stage.shapes[i].postLoad();for(;n.version<e;)switch(n.version){case 1:this.upgrade1to2(n);break;default:return n}return n},erd.DiagramArchive.prototype.loadShapes=function(e){for(var t=0;t<e.length;++t){var n=this.createShape(e[t].type,e[t].details);this.stage.addItem(n)}},erd.DiagramArchive.prototype.createShape=function(e,t){switch(e){case"Entity":return this.stage.factory.entity(t);case"Attribute":return this.stage.factory.attribute(t);case"Relationship":return this.stage.factory.relationship(t);case"Table":return this.stage.factory.table(t);case"Fact":return this.stage.factory.fact(t);case"Dimension":return this.stage.factory.dimension(t);case"Label":return this.stage.factory.label(t);default:throw"erd.DiagramArchive.createShape: unable to create "+e}},erd.DiagramArchive.prototype.loadConnectors=function(e){for(var t=0;t<e.length;++t){var n=e[t],i=this.stage.findById(n.source),a=this.stage.findById(n.destination);this.stage.connect.items(i,a,n.details)}},erd.DiagramArchive.prototype.upgrade1to2=function(e){e.version=2;for(var t=0;t<e.shapes.length;++t)switch(e.shapes[t].type){case"Table":case"Fact":case"Dimension":for(var n=e.shapes[t].details,i=0;i<n.attributes.length;++i)n.attributes[i].dataType="int"}for(var a=0;a<e.connectors.length;++a)if("TableConnector"===e.connectors[a].type){var o=this.stage.findById(e.connectors[a].details.id),r=o.pkTable.createFk(),s=o.fkTable.getAttributeById(o.details.fkAttributeId);s.references=r.references,r.names.length>1&&null!==s&&(s.names=r.names)}}}(),window.erd=window.erd||{},function(){erd.samples={erd1:'{"version":1,"created":1417301189727,"www":"erdplus.com","shapes":[{"type":"Entity","details":{"name":"entity1","type":"regular","x":726,"y":83,"id":13}},{"type":"Entity","details":{"name":"entity2","type":"weak","x":110,"y":350,"id":14}},{"type":"Entity","details":{"name":"entity3","type":"associative","x":697,"y":354,"id":15}},{"type":"Entity","details":{"name":"entity4","type":"regular","x":130,"y":78,"id":16}},{"type":"Attribute","details":{"name":"attribute1","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":637,"y":158,"id":1}},{"type":"Attribute","details":{"name":"attribute2","isDerived":true,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":842,"y":127,"id":2}},{"type":"Attribute","details":{"name":"attribute3","isDerived":false,"isMultivalued":true,"isOptional":false,"isComposite":false,"isUnique":false,"x":808,"y":224,"id":3}},{"type":"Attribute","details":{"name":"attribute4","isDerived":false,"isMultivalued":false,"isOptional":true,"isComposite":false,"isUnique":false,"x":763,"y":169,"id":4}},{"type":"Attribute","details":{"name":"attribute5","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":true,"isUnique":false,"x":118,"y":277,"id":5}},{"type":"Attribute","details":{"name":"attribute6","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":true,"x":687,"y":215,"id":6}},{"type":"Attribute","details":{"name":"attribute7","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":190,"y":226,"id":7}},{"type":"Attribute","details":{"name":"attribute8","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":85,"y":219,"id":8}},{"type":"Attribute","details":{"name":"attribute9","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":true,"isUnique":false,"x":396,"y":188,"id":9}},{"type":"Attribute","details":{"name":"attribute10","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":498,"y":166,"id":10}},{"type":"Attribute","details":{"name":"attribute11","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":500,"y":213,"id":11}},{"type":"Attribute","details":{"name":"attribute12","isDerived":false,"isMultivalued":false,"isOptional":false,"isComposite":false,"isUnique":false,"x":407,"y":279,"id":12}},{"type":"Relationship","details":{"x":458,"y":82,"name":"relationship1","isIdentifying":false,"slots":[{"minimum":0,"maximum":1,"participation":"mandatory","cardinality":"many","role":"aaa","entityId":13},{"minimum":0,"maximum":1,"participation":"mandatory","cardinality":"one","role":"bbb","entityId":16}],"id":27}},{"type":"Relationship","details":{"x":429,"y":348,"name":"relationship2","isIdentifying":true,"slots":[{"minimum":0,"maximum":1,"participation":"optional","cardinality":"many","role":"ccc","entityId":14},{"minimum":0,"maximum":1,"participation":"optional","cardinality":"one","role":"ddd","entityId":15}],"id":28}}],"connectors":[{"type":"Connector","details":{"id":17},"source":1,"destination":13},{"type":"Connector","details":{"id":18},"source":2,"destination":13},{"type":"Connector","details":{"id":19},"source":3,"destination":13},{"type":"Connector","details":{"id":20},"source":4,"destination":13},{"type":"Connector","details":{"id":21},"source":6,"destination":13},{"type":"Connector","details":{"id":22},"source":5,"destination":14},{"type":"Connector","details":{"id":23},"source":7,"destination":5},{"type":"Connector","details":{"id":24},"source":8,"destination":5},{"type":"Connector","details":{"id":25},"source":10,"destination":9},{"type":"Connector","details":{"id":26},"source":11,"destination":9},{"type":"Connector","details":{"id":29},"source":12,"destination":28},{"type":"RelationshipConnector","details":{"id":30},"source":13,"destination":27},{"type":"RelationshipConnector","details":{"id":31},"source":16,"destination":27},{"type":"RelationshipConnector","details":{"id":32},"source":14,"destination":28},{"type":"RelationshipConnector","details":{"id":33},"source":15,"destination":28}]}',
erd2:'{"version":1,"created":1418097001461,"www":"erdplus.com","shapes":[{"type":"Entity","details":{"name":"Entity","type":"regular","x":107,"y":67,"id":44}},{"type":"Entity","details":{"name":"Entity","type":"regular","x":100,"y":315,"id":45}},{"type":"Entity","details":{"name":"Entity","type":"regular","x":324,"y":101,"id":46}},{"type":"Entity","details":{"name":"Entity","type":"regular","x":464,"y":314,"id":47}},{"type":"Entity","details":{"name":"Entity","type":"regular","x":853,"y":74,"id":48}},{"type":"Entity","details":{"name":"Entity","type":"regular","x":852,"y":272,"id":49}},{"type":"Relationship","details":{"name":"Relationship","isIdentifying":false,"x":1027,"y":155,"slots":[{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":49},{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":0}],"id":50}},{"type":"Relationship","details":{"name":"Relationship","isIdentifying":false,"x":262,"y":197,"slots":[{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":47},{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":46}],"id":51}},{"type":"Relationship","details":{"name":"Relationship","isIdentifying":false,"x":669,"y":317,"slots":[{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":47},{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":0}],"id":52}},{"type":"Relationship","details":{"name":"Relationship","isIdentifying":false,"x":1069,"y":338,"slots":[{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":49},{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":0}],"id":53}},{"type":"Relationship","details":{"name":"Relationship","isIdentifying":false,"x":104,"y":176,"slots":[{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":44},{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":45}],"id":54}},{"type":"Relationship","details":{"name":"Relationship","isIdentifying":false,"x":276,"y":296,"slots":[{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":45},{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":47}],"id":57}},{"type":"Relationship","details":{"name":"Relationship","isIdentifying":false,"x":487,"y":194,"slots":[{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":46},{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":47}],"id":63}},{"type":"Relationship","details":{"name":"Relationship","isIdentifying":false,"x":658,"y":91,"slots":[{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":46},{"participation":"unspecified","cardinality":"unspecified","role":"","entityId":48}],"id":66}}],"connectors":[{"type":"RelationshipConnector","details":{"id":55},"source":44,"destination":54},{"type":"RelationshipConnector","details":{"id":56},"source":45,"destination":54},{"type":"RelationshipConnector","details":{"id":58},"source":45,"destination":57},{"type":"RelationshipConnector","details":{"id":59},"source":47,"destination":57},{"type":"RelationshipConnector","details":{"id":60},"source":47,"destination":52},{"type":"RelationshipConnector","details":{"id":61},"source":47,"destination":51},{"type":"RelationshipConnector","details":{"id":62},"source":46,"destination":51},{"type":"RelationshipConnector","details":{"id":64},"source":46,"destination":63},{"type":"RelationshipConnector","details":{"id":65},"source":47,"destination":63},{"type":"RelationshipConnector","details":{"id":67},"source":46,"destination":66},{"type":"RelationshipConnector","details":{"id":68},"source":48,"destination":66},{"type":"RelationshipConnector","details":{"id":69},"source":49,"destination":50},{"type":"RelationshipConnector","details":{"id":70},"source":49,"destination":53}]}'},erd.samples.createDimension=function(e){var t=e.factory.dimension({name:"Region",x:200,y:150,id:1,attributes:[{names:["RegionID"],optional:!1,fk:!1,pk:!0,id:1},{names:["RegionName"],optional:!1,fk:!1,pk:!1,id:2}]}),n=e.factory.dimension({name:"Store",x:500,y:120,id:2,attributes:[{names:["StoreID"],pk:!0,fk:!1,optional:!1,id:1},{names:["StoreZip"],pk:!1,fk:!1,optional:!1,id:2}]}),i=e.factory.fact({name:"Employee",x:800,y:150,id:3,attributes:[{names:["First Name","Last Name"],pk:!0,fk:!1,optional:!1,id:1},{names:["Wage"],pk:!1,fk:!1,optional:!1,id:2}]});e.addItem(t),e.addItem(n),e.addItem(i)},erd.samples.createRelational=function(e){var t=e.factory.table({name:"Region",x:200,y:150,id:1,attributes:[{names:["RegionID"],optional:!1,fk:!1,pk:!0,id:1},{names:["RegionName"],optional:!1,fk:!1,pk:!1,id:2}]});t.details.uniqueGroups=[[1],[1,2],[2,3],[1,3]];var n=e.factory.table({name:"Store",x:500,y:120,id:2,attributes:[{names:["StoreID"],pk:!0,fk:!1,optional:!1,id:1},{names:["StoreZip"],pk:!1,fk:!1,optional:!1,id:2}]});n.details.uniqueGroups=[[1],[1,2],[2,3],[1,3]];var i=e.factory.table({name:"Employee",x:800,y:150,id:3});i.addAttribute({names:["First Name"],pk:!0,fk:!1,optional:!1}),i.addAttribute({names:["Last Name"],pk:!0,fk:!1,optional:!1}),i.addAttribute({names:["Wage"],pk:!1,fk:!1,optional:!1}),i.details.uniqueGroups=[[1],[1,2],[2,3],[1,3]],e.addItem(t),e.addItem(n),e.addItem(i),e.connect.items(i,n),n.details.attributes[2].pk=!0,e.connect.items(t,n),e.connect.items(n,t),e.connect.items(t,t)},erd.samples.create=function(e){var t=e.factory.attribute({x:225,y:100,name:"attribute1",isDerived:!1,isMultivalued:!1,isOptional:!1,isComposite:!1,isUnique:!1}),n=e.factory.attribute({x:225,y:100,name:"attribute2",isDerived:!0,isMultivalued:!1,isOptional:!1,isComposite:!1,isUnique:!1}),i=e.factory.attribute({x:225,y:100,name:"attribute3",isDerived:!1,isMultivalued:!0,isOptional:!1,isComposite:!1,isUnique:!1}),a=e.factory.attribute({x:225,y:100,name:"attribute4",isDerived:!1,isMultivalued:!1,isOptional:!0,isComposite:!1,isUnique:!1}),o=e.factory.attribute({x:225,y:100,name:"attribute5",isDerived:!1,isMultivalued:!1,isOptional:!1,isComposite:!0,isUnique:!1}),r=e.factory.attribute({x:225,y:100,name:"attribute6",isDerived:!1,isMultivalued:!1,isOptional:!1,isComposite:!1,isUnique:!0}),s=e.factory.attribute({x:225,y:100,name:"attribute7",isDerived:!1,isMultivalued:!1,isOptional:!1,isComposite:!1,isUnique:!1}),l=e.factory.attribute({x:225,y:100,name:"attribute8",isDerived:!1,isMultivalued:!1,isOptional:!1,isComposite:!1,isUnique:!1}),d=e.factory.attribute({x:225,y:100,name:"attribute9",isDerived:!1,isMultivalued:!1,isOptional:!1,isComposite:!0,isUnique:!1}),c=e.factory.attribute({x:225,y:100,name:"attribute10",isDerived:!1,isMultivalued:!1,isOptional:!1,isComposite:!1,isUnique:!1}),u=e.factory.attribute({x:225,y:100,name:"attribute11",isDerived:!1,isMultivalued:!1,isOptional:!1,isComposite:!1,isUnique:!1}),p=e.factory.attribute({x:225,y:100,name:"attribute12",isDerived:!1,isMultivalued:!1,isOptional:!1,isComposite:!1,isUnique:!1}),h=e.factory.entity({x:100,y:100,name:"entity1",type:"regular"}),m=e.factory.entity({x:100,y:100,name:"entity2",type:"weak"}),g=e.factory.entity({x:100,y:100,name:"entity3",type:"associative"}),f=e.factory.entity({x:100,y:100,name:"entity4",type:"regular"});e.addItem(h),e.addItem(m),e.addItem(g),e.addItem(f),e.addItem(t),e.addItem(n),e.addItem(i),e.addItem(a),e.addItem(o),e.addItem(r),e.addItem(s),e.addItem(l),e.addItem(d),e.addItem(c),e.addItem(u),e.addItem(p),e.connect.items(h,t),e.connect.items(h,n),e.connect.items(h,i),e.connect.items(h,a),e.connect.items(h,r),e.connect.items(m,o),e.connect.items(o,s),e.connect.items(o,l),e.connect.items(d,c),e.connect.items(d,u);var v={minimum:0,maximum:1,participation:"mandatory",cardinality:"many",role:"aaa",entityId:h.details.id},y={minimum:0,maximum:1,participation:"mandatory",cardinality:"one",role:"bbb",entityId:f.details.id},b={minimum:0,maximum:1,participation:"optional",cardinality:"many",role:"ccc",entityId:m.details.id},w={minimum:0,maximum:1,participation:"optional",cardinality:"one",role:"ddd",entityId:g.details.id},C=e.factory.relationship({x:100,y:175,name:"relationship1",isIdentifying:!1,slots:[v,y]}),A=e.factory.relationship({x:100,y:175,name:"relationship2",isIdentifying:!0,slots:[b,w]});e.addItem(C),e.addItem(A),e.connect.items(A,p),e.connect.items(h,C),e.connect.items(f,C),e.connect.items(m,A),e.connect.items(g,A)},erd.samples.createLabels=function(e){var t=e.factory.label({text:"Here is a sample label and the text here is going to require multiple lines to display properly."});e.addItem(t)}}(),window.erd=window.erd||{},function(){var e=150,t=e/2,n=15,i=2,a=10,o=5,r={names:["Attribute"],order:0,pkMember:!1,optional:!1,soloUnique:!1,fk:!1,dataType:"int",dataTypeSize:null};erd.BaseTable=function(t){erd.Selectable.call(this),this.details={name:"Table",x:0,y:0,sort:"automatic",attributes:[],uniqueGroups:[]},_.assign(this.details,t),this.moved=!1,this.anchors=[],this.anchors.push(new erd.TableAnchor(this,0,n,"left",0)),this.anchors.push(new erd.TableAnchor(this,e,n,"right",0));for(var i=0;i<this.details.attributes.length;++i)this.createAnchors(this.details.attributes[i]);this.updateHeight(),this.updateAllAnchors()},_.assign(erd.BaseTable.prototype,erd.Selectable.prototype),erd.BaseTable.prototype.hitTest=function(t,i){return this.details.x<t&&this.details.y<i&&this.details.x+e>t&&this.details.y+this._attributesHeight+n>i},erd.BaseTable.prototype.getCenterPoint=function(){return{x:this.details.x+t,y:this.details.y+(this._attributesHeight+n)/2}},erd.BaseTable.prototype.containedBy=function(e){var i=this.details.x+t,a=this.details.y+(this._attributesHeight+n)/2;return erd.utils.rectContainsPoint(e,i,a)},erd.BaseTable.prototype.move=function(e,t){this.moved||(this.moved=!0,this.details.x+=e,this.details.y+=t,this.updateConnectors())},erd.BaseTable.prototype.updateConnectors=function(){for(var e=0;e<this.anchors.length;++e){var t=this.anchors[e];t.updateAllConnectors()}},erd.BaseTable.prototype.addAttribute=function(e){_.defaults(e,r);var t=_.reduce(this.details.attributes,function(e,t){return Math.max(e,t.id)},0);e.id=t+1;var n=_.reduce(this.details.attributes,function(e,t){return Math.max(e,t.order)},0);return e.order=n+1,this.details.attributes.push(e),this.updateHeight(),this.createAnchors(e),this.updateAllAnchors(),e},erd.BaseTable.prototype.removeAttribute=function(e,t){if(e.pkMember&&this.removePkConnectors(t),e.fk){for(var n=this.getAnchorsByAttributeId(e.id),i=0;i<n.length;++i)n[i].removeAllConnectorsFromStage(t);this.anchors=_.reject(this.anchors,function(t){return t.attributeId===e.id})}this.details.attributes=_.reject(this.details.attributes,function(t){return t.id===e.id}),this.updateHeight(),this.updateAllAnchors()},erd.BaseTable.prototype.removePkConnectors=function(e){for(var t=this.getAnchorsByAttributeId(0),n=0;n<t.length;++n)t[n].removeAllConnectorsFromStage(e)},erd.BaseTable.prototype.createAnchors=function(t){t.fk&&(this.anchors.push(new erd.TableAnchor(this,0,n,"left",t.id)),this.anchors.push(new erd.TableAnchor(this,e,n,"right",t.id)))},erd.BaseTable.prototype._updateAnchorOffsets=function(e,t){for(var n=0;n<this.anchors.length;++n)this.anchors[n].attributeId===e&&this.anchors[n].setOffsetY(t)},erd.BaseTable.prototype.updateHeight=function(){var e=_.reduce(this.details.attributes,function(e,t){return e+t.names.length},0);this._attributesHeight=Math.max(e*n,n)},erd.BaseTable.prototype.getTableTitle=function(){return this.details.name},erd.BaseTable.prototype.getTableLineWidth=function(){return 1},erd.BaseTable.prototype.draw=function(i){i.save(),i.translate(this.details.x+.5,this.details.y+.5),erd.utils.fillText(i,this.getTableTitle(),{x:t,y:n,maxWidth:e,textAlign:"center",textBaseline:"bottom"}),i.save(),i.beginPath(),this.getIsSelected()?i.fillStyle=erd.settings.selectedShapeFill:i.fillStyle=erd.settings.shapeFill,i.lineWidth=erd.settings.strokeWidth,i.strokeStyle=erd.settings.stroke,i.lineWidth=this.getTableLineWidth(),i.rect(0,n,e,this._attributesHeight),i.fill(),i.stroke(),i.restore();for(var a=n,o=this.getAttributesByOrder(),r=0;r<o.length;++r){var s=o[r],l=this.drawAttribute(i,s,a+n/2);a+=l}i.restore();for(var r=0;r<this.anchors.length;++r)this.anchors[r].draw(i)},erd.BaseTable.prototype.drawAsConnectTarget=function(t,i){this.draw(t),t.save(),t.beginPath(),t.translate(this.details.x,this.details.y),t.rect(0,0,e,n+this._attributesHeight),t.strokeStyle=i,t.lineWidth=2*erd.settings.connectStrokeWidth,t.stroke(),t.restore()},erd.BaseTable.prototype.drawAttribute=function(t,r,s){for(var l=n*r.names.length,d=0,c=0;c<r.names.length;++c){var u=erd.utils.fillText(t,r.names[c],{x:i,y:s+n*c,maxWidth:e-2*i,underline:r.pkMember,font:r.pkMember?erd.settings.boldFont:erd.settings.font});d=Math.max(d,u.width)}var p=0,h=0;if(r.names.length>1){t.beginPath();var p=d+a,h=s-n/2+2;t.moveTo(p,h),t.lineTo(p+o,h),t.lineTo(p+o,h+l-4),t.lineTo(p,h+l-4),t.stroke()}else p=d+a,h=s-n/2;var m="";return r.optional&&(m+="(O)"),r.fk&&(m+="(FK)"),m+=this._getUniqueSuffix(r),m.length>0&&erd.utils.fillText(t,m,{font:erd.settings.smallFont,x:p+a,y:h+l/2,maxWidth:e}),l},erd.BaseTable.prototype.getAttributesByOrder=function(){for(var e=[],t=[],n=[],i=0;i<this.details.attributes.length;++i){var a=this.details.attributes[i];a.pkMember?e.push(a):a.fk?t.push(a):n.push(a)}if("automatic"===this.details.sort)return this._getAutomaticSortOrder(e,n,t);e=_.sortBy(e,function(e){return e.order});var o=n.concat(t);if(o=_.sortBy(o,function(e){return e.order}),0===e.length)return o;if(0===o.length)return e;for(var r=[];o.length>0&&o[0].order<e[0].order;)r=r.concat(o.splice(0,1));return r=r.concat(e),r=r.concat(o)},erd.BaseTable.prototype._getAutomaticSortOrder=function(e,t,n){return e.concat(t).concat(n)},erd.BaseTable.prototype._getUniqueSuffix=function(e){var t=[];e.soloUnique&&!e.pkMember&&t.push("(U)");for(var n=0;n<this.details.uniqueGroups.length;++n)-1!==this.details.uniqueGroups[n].indexOf(e.id)&&t.push("(Ugroup"+(n+1)+")");return t.length>0?t.join(""):""},erd.BaseTable.prototype.getBounds=function(t){for(var i={left:this.details.x,top:this.details.y,right:this.details.x+e+1,bottom:this.details.y+this._attributesHeight+n+1},a=0;a<this.anchors.length;++a){var o=this.anchors[a];o.countConnectors()>0&&("left"===o.side?i.left-=o.getAnchorWidth():i.right+=o.getAnchorWidth())}return i},erd.BaseTable.prototype.hasPk=function(){for(var e=0;e<this.details.attributes.length;++e)if(this.details.attributes[e].pkMember)return!0;return!1},erd.BaseTable.prototype.getAnchorsByAttributeId=function(e){for(var t=[],n=0;n<this.anchors.length;++n)this.anchors[n].attributeId===e&&t.push(this.anchors[n]);return t},erd.BaseTable.prototype.getAttributeById=function(e){for(var t=0;t<this.details.attributes.length;++t)if(this.details.attributes[t].id===e)return this.details.attributes[t];return null},erd.BaseTable.prototype.createFk=function(){var e=_.cloneDeep(r);e.names=[],e.references=[],e.fk=!0;for(var t=0;t<this.details.attributes.length;++t){var n=this.details.attributes[t];if(n.pkMember)if(n.fk)for(var i=0;i<n.names.length;++i)e.names.push(n.names[i]),e.references.push({tableId:this.details.id,attributeId:n.id,fkSubIndex:i});else e.names.push(n.names[0]),e.references.push({tableId:this.details.id,attributeId:n.id})}return e},erd.BaseTable.prototype.removeFromStage=function(e){for(;this.details.attributes.length>0;)this.removeAttribute(this.details.attributes[0],e);for(var t=0;t<this.anchors[t];++t)this.anchors[t].removeAllConnectorsFromStage(e);e.removeItem(this)},erd.BaseTable.prototype.postLoad=function(){this.updateAllAnchors()},erd.BaseTable.prototype.updateAllAnchors=function(){for(var e=n,t=this.getAttributesByOrder(),i=0,a=e,o=0;o<t.length;++o){var r=t[o],s=n*r.names.length;e+=s,r.fk&&this._updateAnchorOffsets(r.id,e-s/2),r.pkMember&&(i+=s,a=e)}this._updateAnchorOffsets(0,a-i/2)}}(),window.erd=window.erd||{},function(){erd.Table=function(e){erd.BaseTable.call(this,e)},_.assign(erd.Table.prototype,erd.BaseTable.prototype),erd.Table.prototype.getType=function(){return"Table"}}(),window.erd=window.erd||{},function(){erd.Fact=function(e){erd.BaseTable.call(this,e)},_.assign(erd.Fact.prototype,erd.BaseTable.prototype),erd.Fact.prototype.getType=function(){return"Fact"},erd.Fact.prototype.getTableTitle=function(){return this.details.name+" fact table"},erd.Fact.prototype.getTableLineWidth=function(){return 2},erd.Fact.prototype.getBounds=function(e){var t=erd.BaseTable.prototype.getBounds.call(this,e);return t.left-=1,t.bottom+=1,t.right+=1,t},erd.Fact.prototype._getAutomaticSortOrder=function(e,t,n){return n.concat(e).concat(t)}}(),window.erd=window.erd||{},function(){erd.Dimension=function(e){erd.BaseTable.call(this,e)},_.assign(erd.Dimension.prototype,erd.BaseTable.prototype),erd.Dimension.prototype.getType=function(){return"Dimension"},erd.Dimension.prototype._getAutomaticSortOrder=function(e,t,n){return n.concat(e).concat(t)}}(),window.erd=window.erd||{},function(){erd.BaseMouseHandler=function(e){this.stage=e},erd.BaseMouseHandler.prototype.onMouseMove=function(e,t,n){},erd.BaseMouseHandler.prototype.onMouseDown=function(e,t,n){},erd.BaseMouseHandler.prototype.onMouseUp=function(e,t,n){},erd.BaseMouseHandler.prototype.drawSpecial=function(e){}}(),window.erd=window.erd||{},function(){erd.SelectMouseHandler=function(e){erd.BaseMouseHandler.call(this,e),this.mouseInteraction=null},_.assign(erd.SelectMouseHandler.prototype,erd.BaseMouseHandler.prototype),erd.SelectMouseHandler.prototype.onMouseMove=function(e,t,n){if(null!==this.mouseInteraction){if(this.mouseInteraction.hasItem){t=Math.max(t,this.mouseInteraction.bounds.left),t=Math.min(t,this.mouseInteraction.bounds.right),n=Math.max(n,this.mouseInteraction.bounds.top),n=Math.min(n,this.mouseInteraction.bounds.bottom);var i=t-this.mouseInteraction.lastMouseX,a=n-this.mouseInteraction.lastMouseY;this.mouseInteraction.lastMouseX=t,this.mouseInteraction.lastMouseY=n,this.mouseInteraction.isMovingShape||(this.stage.invokeStartMoveCallback(),this.mouseInteraction.isMovingShape=!0),this.mouseInteraction.labelResize?this.mouseInteraction.item.resizeLabel(i,a):this.stage.moveSelectedShapes(i,a)}else null!==this.mouseInteraction.multiSelectPoints?(this.mouseInteraction.multiSelectPoints.x2=t,this.mouseInteraction.multiSelectPoints.y2=n):this.mouseInteraction.multiSelectPoints={x1:this.mouseInteraction.lastMouseX,y1:this.mouseInteraction.lastMouseY,x2:t,y2:n};this.stage.draw()}},erd.SelectMouseHandler.prototype.onMouseDown=function(e,t,n){var i=this.stage.hitTest(t,n);this.stage.invokeActiveItemChangedCallback(i);var a=!1;null!==i?"Label"===i.getType()&&i.hitTestResize(t,n)?(this.stage.clearSelection(),i.toggleSelected(),a=!0):e.ctrlKey?i.toggleSelected():i.getIsSelected()||(this.stage.clearSelection(),i.setIsSelected(!0)):this.stage.clearSelection(),this.mouseInteraction={lastMouseX:t,lastMouseY:n,hasItem:null!==i,item:i,multiSelectPoints:null,isMovingShape:!1,labelResize:a};var o=this.stage.getBounds(!0);this.mouseInteraction.bounds={left:t-o.left,top:n-o.top,right:t+this.stage.canvas.width-o.right,bottom:n+this.stage.canvas.height-o.bottom},this.stage.draw()},erd.SelectMouseHandler.prototype.onMouseUp=function(t,n,i){if(null!==this.mouseInteraction){if(null!==this.mouseInteraction.multiSelectPoints){var a=e(this.mouseInteraction.multiSelectPoints);t.ctrlKey||this.stage.clearSelection(),this.stage.selectByRect(a)}this.mouseInteraction.isMovingShape&&this.stage.invokeEndMoveCallback(),this.mouseInteraction=null,this.stage.draw()}},erd.SelectMouseHandler.prototype.drawSpecial=function(t){if(null!==this.mouseInteraction&&null!==this.mouseInteraction.multiSelectPoints){t.beginPath(),t.lineWidth=erd.settings.strokeWidth,t.strokeStyle=erd.settings.stroke,t.fillStyle=erd.settings.selectRectFill;var n=e(this.mouseInteraction.multiSelectPoints);t.rect(n.x,n.y,n.w,n.h),t.fill(),t.stroke()}};var e=function(e){var t={};return t.x=Math.min(e.x1,e.x2),t.y=Math.min(e.y1,e.y2),t.w=Math.abs(e.x1-e.x2),t.h=Math.abs(e.y1-e.y2),t}}(),window.erd=window.erd||{},function(){erd.EntityMouseHandler=function(e){erd.BaseMouseHandler.call(this,e)},_.assign(erd.EntityMouseHandler.prototype,erd.BaseMouseHandler.prototype),erd.EntityMouseHandler.prototype.onMouseDown=function(e,t,n){var i=this.stage.factory.entity({x:t,y:n});this.stage.handleMouseDropItem(i)}}(),window.erd=window.erd||{},function(){erd.AttributeMouseHandler=function(e){erd.BaseMouseHandler.call(this,e)},_.assign(erd.AttributeMouseHandler.prototype,erd.BaseMouseHandler.prototype),erd.AttributeMouseHandler.prototype.onMouseDown=function(e,t,n){var i=this.stage.factory.attribute({x:t,y:n});this.stage.handleMouseDropItem(i)}}(),window.erd=window.erd||{},function(){erd.RelationshipMouseHandler=function(e){erd.BaseMouseHandler.call(this,e)},_.assign(erd.RelationshipMouseHandler.prototype,erd.BaseMouseHandler.prototype),erd.RelationshipMouseHandler.prototype.onMouseDown=function(e,t,n){var i=this.stage.factory.relationship({x:t,y:n});this.stage.handleMouseDropItem(i)}}(),window.erd=window.erd||{},function(){erd.TableMouseHandler=function(e){erd.BaseMouseHandler.call(this,e)},_.assign(erd.TableMouseHandler.prototype,erd.BaseMouseHandler.prototype),erd.TableMouseHandler.prototype.onMouseDown=function(e,t,n){var i=this.stage.factory.table({x:t,y:n});this.stage.handleMouseDropItem(i)}}(),window.erd=window.erd||{},function(){erd.ConnectMouseHandler=function(e){erd.BaseMouseHandler.call(this,e),this.startShape=null,this.endShape=null,this.trackingPoint=null},_.assign(erd.ConnectMouseHandler.prototype,erd.BaseMouseHandler.prototype),erd.ConnectMouseHandler.prototype.onMouseMove=function(e,t,n){if(null!==this.startShape){var i=this.stage.hitTest(t,n);null!==i&&i.details.id!==this.startShape.details.id?(this.endShape=i,this.trackingPoint=null):(this.endShape=null,this.trackingPoint={x:t,y:n}),this.stage.draw()}},erd.ConnectMouseHandler.prototype.onMouseDown=function(e,t,n){var i=this.stage.hitTest(t,n);null!==i&&(this.startShape=i,this.stage.draw())},erd.ConnectMouseHandler.prototype.onMouseUp=function(e,t,n){this.connect(),this.startShape=null,this.endShape=null,this.trackingPoint=null,this.stage.draw(),this.stage.invokeConnectModeEndCallback()},erd.ConnectMouseHandler.prototype.drawSpecial=function(e){if(null!==this.startShape&&(null!==this.trackingPoint||null!==this.endShape)){var t=this.startShape.getCenterPoint(),n=this.trackingPoint;null!==this.endShape&&(n=this.endShape.getCenterPoint());var i=erd.settings.connectMissStroke;this.canConnect()&&(i=erd.settings.connectHitStroke),e.save(),e.strokeStyle=i,e.lineWidth=erd.settings.connectStrokeWidth,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.stroke(),e.restore(),this.startShape.drawAsConnectTarget(e,i),null!==this.endShape&&this.endShape.drawAsConnectTarget(e,i)}},erd.ConnectMouseHandler.prototype.canConnect=function(){if(null!==this.startShape&&null!==this.endShape){var e=this.startShape.getType(),t=this.endShape.getType();return this.limitSingleConnector(e,t)?"Relationship"===this.startShape.getType()&&"Relationship"===this.endShape.getType()?!1:"Relationship"===this.startShape.getType()&&"Entity"===this.endShape.getType()&&2===this.startShape.relatedEntityCount()?!1:"Relationship"===this.endShape.getType()&&"Entity"===this.startShape.getType()&&2===this.endShape.relatedEntityCount()?!1:"Attribute"===this.startShape.getType()&&"Attribute"===this.endShape.getType()&&this.startShape.details.isComposite===!1&&this.endShape.details.isComposite===!1?!1:"Table"===this.startShape.getType()&&"Table"===this.endShape.getType()?this.startShape.hasPk()||this.endShape.hasPk():"Dimension"!==this.startShape.getType()||"Fact"!==this.endShape.getType()&&"Dimension"!==this.endShape.getType()?"Fact"===this.startShape.getType()?!1:!0:this.startShape.hasPk():!1}return!1},erd.ConnectMouseHandler.prototype.limitSingleConnector=function(e,t){for(var n=[["Attribute","Attribute"],["Attribute","Entity"],["Attribute","Relationship"]],i=0;i<n.length;++i)if(n[i][0]===e&&n[i][1]===t||n[i][1]===e&&n[i][0]===t){var a=this.startShape.details.id,o=this.endShape.details.id,r=this.stage.findConnectorByIds(a,o);if(null!==r)return!1}return!0},erd.ConnectMouseHandler.prototype.connect=function(){if(this.canConnect()){if(this.stage.undoManager.startAction(),"Entity"===this.startShape.getType()&&"Entity"===this.endShape.getType()){var e=this.startShape,t=this.endShape,n={x:Math.round((e.details.x+t.details.x)/2),y:Math.round((e.details.y+t.details.y)/2)},i=this.stage.factory.relationship(n);this.stage.addItem(i),this.stage.connect.items(e,i),this.stage.connect.items(t,i),this.stage.clearSelection(),i.setIsSelected(!0),this.stage.invokeActiveItemChangedCallback(i)}else this.stage.connect.items(this.startShape,this.endShape);this.stage.undoManager.endAction(),this.stage.mouseMode="select"}}}(),window.erd=window.erd||{},function(){erd.FactMouseHandler=function(e){erd.BaseMouseHandler.call(this,e)},_.assign(erd.FactMouseHandler.prototype,erd.BaseMouseHandler.prototype),erd.FactMouseHandler.prototype.onMouseDown=function(e,t,n){var i=this.stage.factory.fact({x:t,y:n,name:"Fact"});this.stage.handleMouseDropItem(i)}}(),window.erd=window.erd||{},function(){erd.DimensionMouseHandler=function(e){erd.BaseMouseHandler.call(this,e)},_.assign(erd.DimensionMouseHandler.prototype,erd.BaseMouseHandler.prototype),erd.DimensionMouseHandler.prototype.onMouseDown=function(e,t,n){var i=this.stage.factory.dimension({x:t,y:n,name:"Dimension"});this.stage.handleMouseDropItem(i)}}(),window.erd=window.erd||{},function(){erd.LabelMouseHandler=function(e){erd.BaseMouseHandler.call(this,e)},_.assign(erd.LabelMouseHandler.prototype,erd.BaseMouseHandler.prototype),erd.LabelMouseHandler.prototype.onMouseDown=function(e,t,n){var i=this.stage.factory.label({x:t-50,y:n-25});this.stage.handleMouseDropItem(i)}}(),window.erd=window.erd||{},function(){erd.UndoManager=function(e){this.undoStack=[],this.redoStack=[],this.stage=e,this.archiver=new erd.DiagramArchive(this.stage),this.currentAction=null},erd.UndoManager.prototype.clear=function(){this.undoStack=[],this.redoStack=[]},erd.UndoManager.prototype.hasCurrentAction=function(){return null!==this.currentAction},erd.UndoManager.prototype.startAction=function(){this.stage.invokeDirtyCallback(),null===this.currentAction&&(this.currentAction={undoContent:this.archiver.toJson(),redoContent:null})},erd.UndoManager.prototype.endAction=function(){this.stage.invokeDirtyCallback(),null!==this.currentAction&&(this.undoStack.push(this.currentAction),this.currentAction=null,this.redoStack=[])},erd.UndoManager.prototype.canUndo=function(){return this.undoStack.length>0},erd.UndoManager.prototype.canRedo=function(){return this.redoStack.length>0},erd.UndoManager.prototype.undo=function(){if(this.canUndo()){this.stage.invokeDirtyCallback();var e=this.undoStack.pop();null===e.redoContent&&(e.redoContent=this.archiver.toJson()),this.archiver.fromJson(e.undoContent),this.stage.draw(),this.redoStack.push(e)}},erd.UndoManager.prototype.redo=function(){if(this.canRedo()){this.stage.invokeDirtyCallback();var e=this.redoStack.pop();this.archiver.fromJson(e.redoContent),this.stage.draw(),this.undoStack.push(e)}}}(),window.erd=window.erd||{},function(){var e=20;erd.TableAnchor=function(e,t,n,i,a){erd.Anchor.call(this,e,t,n),this.side=i,this.attributeId=a},_.assign(erd.TableAnchor.prototype,erd.Anchor.prototype),erd.TableAnchor.prototype.getPoint=function(){return"left"===this.side?{x:this.owner.details.x+this.dx-e,y:this.owner.details.y+this.dy}:{x:this.owner.details.x+this.dx+e,y:this.owner.details.y+this.dy}},erd.TableAnchor.prototype.getAnchorWidth=function(){return e},erd.TableAnchor.prototype.draw=function(t){if(null!==this.firstConnector()){var n=this.getPoint();t.save(),t.translate(n.x,n.y),"right"===this.side&&t.rotate(Math.PI),t.strokeStyle=erd.settings.stroke,t.beginPath(),t.moveTo(0,0),t.lineTo(e,0),t.stroke(),this.isPkAnchor()&&(t.beginPath(),t.fillStyle=erd.settings.arrowFill,t.moveTo(e,0),t.lineTo(e-5,-5),t.lineTo(e-5,5),t.closePath(),t.stroke(),t.fill()),t.restore()}},erd.TableAnchor.prototype.isPkAnchor=function(){return 0===this.attributeId}}(),window.erd=window.erd||{},function(){erd.TableConnector=function(e,t,n){erd.Connector.call(this,e,t,n),this.pkTable=e,this.fkTable=t},_.assign(erd.TableConnector.prototype,erd.Connector.prototype),erd.TableConnector.prototype.getType=function(){return"TableConnector"},erd.TableConnector.prototype.updateAnchors=function(){null!==this.sourceAnchor&&(this.sourceAnchor.removeConnector(this),this.sourceAnchor=null),null!==this.destinationAnchor&&(this.destinationAnchor.removeConnector(this),this.destinationAnchor=null);for(var e=this.pkTable.getAnchorsByAttributeId(0),t=this.fkTable.getAnchorsByAttributeId(this.details.fkAttributeId),n=Number.MAX_VALUE,i=0;i<e.length;++i)for(var a=e[i],o=0;o<t.length;++o){var r=t[o],s=erd.utils.distance(a.getPoint(),r.getPoint());n>s&&(this.sourceAnchor=a,this.destinationAnchor=r,n=s)}this.sourceAnchor.addConnector(this),this.destinationAnchor.addConnector(this)},erd.TableConnector.prototype.removeFromStage=function(e){erd.Connector.prototype.removeFromStage.call(this,e);var t=this.fkTable.getAttributeById(this.details.fkAttributeId);null!==t&&this.fkTable.removeAttribute(t,e)}}(),window.erd=window.erd||{},function(){var e=20,t=50,n=50;erd.Label=function(e){erd.Selectable.call(this),this.details={text:"New Label",x:0,y:0,width:100,height:50},_.assign(this.details,e),this.moved=!1},_.assign(erd.Label.prototype,erd.Selectable.prototype),erd.Label.prototype.getType=function(){return"Label"},erd.Label.prototype.hitTest=function(e,t){return this.details.x<e&&this.details.y<t&&this.details.x+this.details.width>e&&this.details.y+this.details.height>t},erd.Label.prototype.hitTestResize=function(t,n){return this.details.x+this.details.width-e<t&&this.details.y+this.details.height-e<n&&this.details.x+this.details.width>t&&this.details.y+this.details.height>n},erd.Label.prototype.containedBy=function(e){var t=this.details.x+this.details.width/2,n=this.details.y+this.details.height/2;return erd.utils.rectContainsPoint(e,t,n)},erd.Label.prototype.move=function(e,t){this.moved||(this.moved=!0,this.details.x+=e,this.details.y+=t)},erd.Label.prototype.resizeLabel=function(e,i){this.details.width=Math.max(this.details.width+e,t),this.details.height=Math.max(this.details.height+i,n)},erd.Label.prototype.draw=function(t){if(t.save(),t.translate(this.details.x+.5,this.details.y+.5),t.beginPath(),this.getIsSelected()?t.fillStyle=erd.settings.selectedShapeFill:t.fillStyle=erd.settings.shapeFill,t.lineWidth=erd.settings.strokeWidth,t.strokeStyle=erd.settings.stroke,t.lineWidth=erd.settings.lineWidth,t.rect(0,0,this.details.width,this.details.height),t.fill(),this.getIsSelected()){t.stroke(),t.beginPath();var n=this.details.width,i=this.details.height;t.fillStyle=erd.settings.labelResizeShapeFill,t.moveTo(n-e,i),t.lineTo(n,i-e),t.lineTo(n,i),t.fill(),t.stroke()}erd.utils.wrapText(t,this.details.text,{x:2,textAlign:"left",textBaseline:"top",width:this.details.width-4,height:this.details.height}),t.restore()},erd.Label.prototype.drawAsConnectTarget=function(e,t){},erd.Label.prototype.getBounds=function(e){var t={left:this.details.x,top:this.details.y,right:this.details.x+this.details.width+1,bottom:this.details.y+this.details.height+1};return t},erd.Label.prototype.removeFromStage=function(e){e.removeItem(this)}}(),angular.module("web").controller("BaseContextCtrl",["$scope","$timeout",function(e,t){e.show=!1,e.dirty=!1,e.ready=!1,e.primaryInputHasFocus=!1,e.$on("startContextEdit",function(t,n){e.isTargetType(n)&&(e.initItem(n),e.dirty=!1,e.show=!0,e.$apply(),e.ready=!0,e.primaryInputHasFocus=!1)}),e.$on("endContextEdit",function(){e.show&&(e.stage.undoManager.hasCurrentAction()&&e.stage.undoManager.endAction(),e.ready=!1,e.show=!1,e.dirty=!1,e.initItem(null))}),e.$on("commitContextEdit",function(){e.show&&e.stage.undoManager.hasCurrentAction()&&e.stage.undoManager.endAction()}),
e.focusTextInput=function(e){t(function(){var t=angular.element(e);t.focus(),t.select()},0)},e.handleChange=function(t){e.ready&&(this.stage.invokeDirtyCallback(),e.primaryInputHasFocus=!0,e.stage.undoManager.hasCurrentAction()||e.stage.undoManager.startAction(),t(),e.dirty=!0,e.stage.draw())},e.addErdAttribute=function(t){e.stage.undoManager.hasCurrentAction()||e.stage.undoManager.startAction(),this.stage.invokeDirtyCallback();var n=t.getNextAutomaticPosition(),i=e.stage.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});e.stage.addItem(i),e.stage.connect.items(i,t),e.stage.draw(),e.$emit("selectNewShape",i)},e.handlePrimaryInputClick=function(t){e.primaryInputHasFocus=!0},e.handlePrimaryInputKeydown=function(t){46===t.keyCode&&e.primaryInputHasFocus===!1?e.$emit("deleteSelection"):(e.primaryInputHasFocus=!0,t.stopPropagation())}}]),angular.module("web").controller("ContextAttributeCtrl",["$controller","$scope","$timeout",function(e,t,n){e("BaseContextCtrl",{$scope:t,$timeout:n}),t.attribute=null,t.isTargetType=function(e){return"Attribute"===e.getType()},t.initItem=function(e){null!==e?(t.attribute=e,t.isPartiallyUnique=t.attribute.isPartiallyUnique(),t.name=t.attribute.details.name,t.isUnique=t.attribute.details.isUnique,t.isMultivalued=t.attribute.details.isMultivalued,t.isOptional=t.attribute.details.isOptional,t.isDerived=t.attribute.details.isDerived,t.isComposite=t.attribute.details.isComposite,t.focusTextInput("#attributeName")):t.attribute=null},t.getParentType=function(){return null!==t.attribute&&null!==t.attribute.getOwner()?t.attribute.getOwner().getType():null},t.$watch("name",function(){t.handleChange(function(){t.attribute.details.name=t.name})}),t.$watch("isUnique",function(){t.handleChange(function(){t.attribute.details.isUnique=t.isUnique})}),t.$watch("isMultivalued",function(){t.handleChange(function(){t.attribute.details.isMultivalued=t.isMultivalued})}),t.$watch("isOptional",function(){t.handleChange(function(){t.attribute.details.isOptional=t.isOptional})}),t.$watch("isDerived",function(){t.handleChange(function(){t.attribute.details.isDerived=t.isDerived})}),t.$watch("isComposite",function(){t.handleChange(function(){t.isComposite||t.attribute.removeAllChildAttributes(t.stage),t.attribute.details.isComposite=t.isComposite})}),t.addSiblingAttribute=function(){t.addErdAttribute(t.attribute.getOwner())},t.addAttribute=function(){t.attribute.details.isComposite===!1&&(t.dirty=!0,t.isComposite=!0,t.attribute.details.isComposite=!0),t.addErdAttribute(t.attribute)}}]),angular.module("web").controller("ContextEntityCtrl",["$controller","$scope","$timeout",function(e,t,n){e("BaseContextCtrl",{$scope:t,$timeout:n}),t.entity=null,t.isTargetType=function(e){return"Entity"===e.getType()},t.initItem=function(e){null!==e?(t.entity=e,t.entityName=t.entity.details.name,t.entityType=t.entity.details.type,t.focusTextInput("#entityName")):t.entity=null},t.$watch("entityName",function(){t.handleChange(function(){t.entity.details.name=t.entityName})}),t.$watch("entityType",function(){t.handleChange(function(){t.entity.details.type=t.entityType})}),t.addAttribute=function(){t.addErdAttribute(t.entity)}}]),angular.module("web").controller("ContextRelationshipCtrl",["$controller","$scope","$timeout",function(e,t,n){var i={details:{id:0,name:"None"}};e("BaseContextCtrl",{$scope:t,$timeout:n}),t.showExactConstraints=!1,t.relationship=null,t.isTargetType=function(e){return"Relationship"===e.getType()},t.initItem=function(e){null!==e?(t.entities=t.stage.findAllByType("Entity"),t.entities.splice(0,0,i),t.$apply(),t.relationship=e,t.name=t.relationship.details.name,t.isIdentifying=t.relationship.details.isIdentifying,t.slot0EntityId=t.relationship.details.slots[0].entityId,t.slot0Participation=t.relationship.details.slots[0].participation,t.slot0Cardinality=t.relationship.details.slots[0].cardinality,t.slot0Minimum=t.relationship.details.slots[0].minimum,t.slot0Maximum=t.relationship.details.slots[0].maximum,t.slot0Role=t.relationship.details.slots[0].role,t.slot1EntityId=t.relationship.details.slots[1].entityId,t.slot1Participation=t.relationship.details.slots[1].participation,t.slot1Cardinality=t.relationship.details.slots[1].cardinality,t.slot1Minimum=t.relationship.details.slots[1].minimum,t.slot1Maximum=t.relationship.details.slots[1].maximum,t.slot1Role=t.relationship.details.slots[1].role,t.focusTextInput("#relationshipName")):t.relationship=null},t.hasSlotEntity=function(e){return null!==t.relationship&&void 0!==t.relationship&&0!==t.relationship.details.slots[e].entityId},t.handleEntityChange=function(e,n,i){if("string"==typeof e&&(e=parseInt(e)),"string"==typeof n&&(n=parseInt(n)),e!==n&&null!==t.relationship&&void 0!==t.relationship){var a=t.relationship.details.slots[i];if(t.hasSlotEntity(i)&&e!==a.entityId){var o=t.relationship.getSlotConnector(i);null!==o&&o.removeFromStage(t.stage)}if(e>0&&e!==a.entityId){var r=t.stage.findById(e);t.stage.connect.items(r,t.relationship,{slotIndex:i})}a.entityId=parseInt(e),t.dirty=!0,t.stage.draw()}},t.$watch("name",function(){t.handleChange(function(){t.relationship.details.name=t.name})}),t.$watch("isIdentifying",function(){t.handleChange(function(){t.relationship.details.isIdentifying=t.isIdentifying})}),t.$watch("slot0EntityId",function(e,n){t.handleChange(function(){t.handleEntityChange(e,n,0)})}),t.$watch("slot0Participation",function(){t.handleChange(function(){t.relationship.details.slots[0].participation=t.slot0Participation})}),t.$watch("slot0Cardinality",function(){t.handleChange(function(){t.relationship.details.slots[0].cardinality=t.slot0Cardinality})}),t.$watch("slot0Minimum",function(){t.handleChange(function(){t.relationship.details.slots[0].minimum=t.slot0Minimum})}),t.$watch("slot0Maximum",function(){t.handleChange(function(){t.relationship.details.slots[0].maximum=t.slot0Maximum})}),t.$watch("slot0Role",function(){t.handleChange(function(){t.relationship.details.slots[0].role=t.slot0Role})}),t.$watch("slot1EntityId",function(e,n){t.handleChange(function(){t.handleEntityChange(e,n,1)})}),t.$watch("slot1Participation",function(){t.handleChange(function(){t.relationship.details.slots[1].participation=t.slot1Participation})}),t.$watch("slot1Cardinality",function(){t.handleChange(function(){t.relationship.details.slots[1].cardinality=t.slot1Cardinality})}),t.$watch("slot1Minimum",function(){t.handleChange(function(){t.relationship.details.slots[1].minimum=t.slot1Minimum})}),t.$watch("slot1Maximum",function(){t.handleChange(function(){t.relationship.details.slots[1].maximum=t.slot1Maximum})}),t.$watch("slot1Role",function(){t.handleChange(function(){t.relationship.details.slots[1].role=t.slot1Role})}),t.addAttribute=function(){t.addErdAttribute(t.relationship)},t.toggleExactConstraints=function(){t.showExactConstraints=!t.showExactConstraints}}]),angular.module("web").directive("erdForceFocus",["$timeout","$parse",function(e,t){return{restrict:"A",link:function(n,i,a){var o=t(a.erdForceFocus);o(n)===!0&&e(function(){i.focus(),i.select()},0)}}}]),angular.module("web").controller("ContextTableCtrl",["$controller","$scope","$timeout","$window",function(e,t,n,i){e("BaseContextCtrl",{$scope:t,$timeout:n}),t.findColumnTypeById=function(e){for(var n=0;n<t.columnTypes.length;++n)if(t.columnTypes[n].id===e)return t.columnTypes[n];return null},t.columnTypes=[{id:"none",name:"No Data Type",hasSize:!1},{id:"custom",name:"Custom Data Type",sql:"",hasSize:!0},{id:"charn",name:"CHAR(n)",sql:"CHAR",hasSize:!0},{id:"varcharn",name:"VARCHAR(n)",sql:"VARCHAR",hasSize:!0},{id:"int",name:"INT",sql:"INT",hasSize:!1},{id:"numeric",name:"NUMERIC(p s)",sql:"NUMERIC",hasSize:!0},{id:"date",name:"DATE",sql:"DATE",hasSize:!1},{id:"float",name:"FLOAT",sql:"FLOAT",hasSize:!1}],t.table=null,t.mode="",t.showDataTypes=!1,t.isTargetType=function(e){return"Table"===e.getType()||"Fact"===e.getType()||"Dimension"===e.getType()},t.initItem=function(e){null!==e?(t.itemType=e.getType(),t.mode="normal",t.table=e,t.name=t.table.details.name,t.buildNormalWrappers(),t.buildUniqueGroupsMenu(),t.focusTextInput("#tableName")):t.table=null,t.initShowDataTypes()},t.buildNormalWrappers=function(e){var n=null;if(e)for(var i=0;i<t.wrappers.length;++i)t.wrappers[i].isCurrent&&(n=t.wrappers[i].id);for(var a=t.table.getAttributesByOrder(),o=[],i=0;i<a.length;++i){var r=a[i],s={isCurrent:n===r.id,optional:r.optional,soloUnique:r.soloUnique,pkMember:r.pkMember,fk:r.fk,names:[],id:r.id,dataType:r.dataType,dataTypeSize:r.dataTypeSize},l=t.findColumnTypeById(r.dataType);null!==l&&(s.hasDataTypeSize=l.hasSize);for(var d=0;d<r.names.length;++d)s.names.push({value:r.names[d]});o.push(s)}t.wrappers=o},t.$watch("name",function(){t.handleChange(function(){t.table.details.name=t.name})}),t.endMode=function(){t.buildNormalWrappers(),t.mode="normal"},t.toggleShowDataTypes=function(){t.showDataTypes=!t.showDataTypes;try{i.localStorage.setItem("showDataTypes",t.showDataTypes?"show":"hide")}catch(e){}},t.initShowDataTypes=function(){try{t.showDataTypes="show"===i.localStorage.getItem("showDataTypes")}catch(e){}},t.addAttribute=function(){t.handleChange(function(){var e=t.table.addAttribute({names:["NewAttribute"]});t.buildNormalWrappers(),t.table.updateAllAnchors(),t.focusAttributeWrapperById(e.id)})},t.focusAttributeWrapperById=function(e){for(var n=0;n<t.wrappers.length;++n)t.wrappers[n].id===e&&(t.wrappers[n].isCurrent=!0,t.wrappers[n].names[0].forceFocus=!0)},t.attributeDataTypeChanged=function(e){t.handleChange(function(){var n=t.table.getAttributeById(e.id),i=t.findColumnTypeById(e.dataType);null!==i?(e.hasDataTypeSize=i.hasSize,n.dataType=i.id,i.hasSize||(n.dataTypeSize=null)):(e.hasDataTypeSize=!1,n.dataType=null)})},t.attributeDataTypeSizeChanged=function(e){t.handleChange(function(){var n=t.table.getAttributeById(e.id);n.dataTypeSize=e.dataTypeSize})},t.getDataTypeSizePlaceholder=function(e){return"custom"===e.dataType?"Enter Custom Type":"Data Type Size"},t.attributeNameChanged=function(e,n){t.handleChange(function(){var i=t.table.getAttributeById(n.id);i.names[e]=n.names[e].value})},t.selectItemGroup=function(e){for(var n=0;n<t.wrappers.length;++n)t.wrappers[n].isCurrent=!1;e.isCurrent=!0},t.moveAttributeUp=function(e,n){e.stopPropagation(),e.preventDefault(),t.handleChange(function(){t.table.details.sort="manual";for(var e=0;e<t.wrappers.length;++e)if(t.wrappers[e]===n&&e>0){var i=t.wrappers[e-1];t.wrappers[e-1]=n,t.wrappers[e]=i,t.renumberAttributeOrder();break}})},t.moveAttributeDown=function(e,n){e.stopPropagation(),e.preventDefault(),t.handleChange(function(){t.table.details.sort="manual";for(var e=0;e<t.wrappers.length;++e)if(t.wrappers[e]===n&&e<t.wrappers.length-1){var i=t.wrappers[e+1];t.wrappers[e+1]=n,t.wrappers[e]=i,t.renumberAttributeOrder();break}})},t.renumberAttributeOrder=function(){for(var e=0;e<t.wrappers.length;++e){var n=t.wrappers[e].id,i=t.table.getAttributeById(n);i.order=e}t.table.updateAllAnchors()},t.startUpdatePrimaryKey=function(){t.buildNormalWrappers(),t.mode="pk"},t.attributePkChanged=function(e){t.handleChange(function(){var n=t.table.getAttributeById(e.id);n.pkMember=e.pkMember,t.table.removePkConnectors(t.stage),t.table.updateAllAnchors()})},t.addRecursivePrimaryKey=function(){t.handleChange(function(){var e=t.stage.connect.items(t.table,t.table);t.buildNormalWrappers(),t.focusAttributeWrapperById(e.id)})},t.startOptionalMode=function(){t.buildNormalWrappers(),t.mode="optional"},t.attributeOptionalChanged=function(e){t.handleChange(function(){var n=t.table.getAttributeById(e.id);n.optional=e.optional})},t.startUniqueMode=function(){t.buildNormalWrappers(),t.mode="soloUnique"},t.attriubteUniqueChanged=function(e){t.handleChange(function(){var n=t.table.getAttributeById(e.id);n.soloUnique=e.soloUnique})},t.startDeleteMode=function(){t.buildNormalWrappers(),t.mode="delete"},t.deleteAttribute=function(e){t.handleChange(function(){var n=t.table.getAttributeById(e.id);t.table.removeAttribute(n,t.stage),t.buildNormalWrappers(),t.table.updateAllAnchors()})},t.buildUniqueWrappers=function(e){for(var n=[],i=0;i<t.table.details.attributes.length;++i){for(var a=t.table.details.attributes[i],o={names:[],id:a.id,member:-1!==e.indexOf(a.id)},r=0;r<a.names.length;++r)o.names.push({value:a.names[r]});n.push(o)}t.uniqueWrappers=n},t.buildUniqueGroupsMenu=function(){t.uniqueGroupsMenu=[];for(var e=0;e<t.table.details.uniqueGroups.length;++e)t.uniqueGroupsMenu.push({name:"U"+(e+1),index:e})},t.addNewUniqueGroup=function(e){e.preventDefault(),e.stopPropagation(),t.table.details.uniqueGroups.push([]),t.uniqueWrappersIndex=t.table.details.uniqueGroups.length-1,t.buildUniqueWrappers([]),t.mode="unique"},t.editUniqueGroup=function(e,n){e.preventDefault(),e.stopPropagation(),t.uniqueWrappersIndex=n.index,t.buildUniqueWrappers(t.table.details.uniqueGroups[n.index]),t.mode="unique"},t.saveUniqueGroup=function(){t.handleChange(function(){for(var e=[],n=0;n<t.uniqueWrappers.length;++n)t.uniqueWrappers[n].member&&e.push(t.uniqueWrappers[n].id);e.length>0?t.table.details.uniqueGroups[t.uniqueWrappersIndex]=e:t.table.details.uniqueGroups.splice(t.uniqueWrappersIndex,1),t.buildUniqueGroupsMenu(),t.mode="normal"})},t.deleteUniqueGroup=function(){t.handleChange(function(){t.table.details.uniqueGroups.splice(t.uniqueWrappersIndex,1),t.buildUniqueGroupsMenu(),t.mode="normal"})}}]),angular.module("web").controller("ContextLabelCtrl",["$controller","$scope","$timeout",function(e,t,n){e("BaseContextCtrl",{$scope:t,$timeout:n}),t.entity=null,t.isTargetType=function(e){return"Label"===e.getType()},t.initItem=function(e){null!==e?(t.label=e,t.text=t.label.details.text,t.focusTextInput("#labelText")):t.label=null},t.$watch("text",function(){t.handleChange(function(){t.label.details.text=t.text})})}]),angular.module("web").controller("ExportImageCtrl",["$scope","$modalInstance","stage","$timeout","$window",function(e,t,n,i,a){var o=25,r=function(){i(function(){s()},1)},s=function(){var t=e.largeSize?4:1,n=e.bounds.left*t,i=e.bounds.right*t,a=e.bounds.top*t,r=e.bounds.bottom*t,s=i-n,l=r-a;n>0&&(n-=2,s+=2),a>0&&(a-=2,l+=2),e.tempCanvasWidth=i,e.tempCanvasHeight=r,e.canvasWidth=s+2*o,e.canvasHeight=l+2*o,e.$digest(),e.tempStage.setScale(t,t),e.tempStage.draw();var d=angular.element("#image-canvas")[0],c=d.getContext("2d");c.clearRect(0,0,d.width,d.height),e.transparentBackground||(c.beginPath(),c.fillStyle="#fff",c.rect(0,0,d.width,d.height),c.fill()),c.drawImage(e.tempStage.canvas,n,a,s,l,o,o,s,l),e.dataURL=d.toDataURL("image/png")};e.init=function(){e.initSettings(),e.bounds=n.getBounds(!1),e.tempStage=new erd.DiagramStage("temp-canvas");var t=new erd.DiagramArchive(n).toJson(),i=new erd.DiagramArchive(e.tempStage);i.fromJson(t),e.$watch("transparentBackground",function(t,n){r(),e.saveSettings()}),e.$watch("largeSize",function(t,n){r(),e.saveSettings()}),r()},e.save=function(){var e=angular.element("#image-canvas")[0];e.toBlob(function(e){saveAs(e,"erdplus-diagram.png")})},e.ok=function(){t.close()},e.initSettings=function(){try{e.transparentBackground="true"===a.localStorage.getItem("transparentBackground")}catch(t){}try{e.largeSize="true"===a.localStorage.getItem("largeSize")}catch(t){}},e.saveSettings=function(){try{a.localStorage.setItem("transparentBackground",e.transparentBackground?"true":"false")}catch(t){}try{a.localStorage.setItem("largeSize",e.largeSize?"true":"false")}catch(t){}},t.opened.then(function(){i(function(){e.init()},1)})}]),angular.module("web").controller("ExportSqlCtrl",["$scope","$modalInstance","sql","name","$timeout",function(e,t,n,i,a){e.sql=n,e.save=function(){var n=new Blob([e.sql],{type:"text/plain;charset=utf-8"});saveAs(n,i+".sql"),t.close()},e.copy=function(){},e.ok=function(){t.close()},e.afterCopy=function(){e.copied=!0,e.$digest()},ZeroClipboard.config({swfPath:"assets/ZeroClipboard.swf",cacheBust:!1}),a(function(){var t=angular.element("#copySql");e._zeroClient=new ZeroClipboard(t),e._zeroClient.setData("text/plain",e.sql),e._zeroClient.on("aftercopy",e.afterCopy)},0)}]),angular.module("web").controller("CanvasDimensionsCtrl",["$scope","stage","$modalInstance","$timeout","$document",function(e,t,n,i,a){var o=25,r=400,s=8e3,l=100;e.bounds=null,e.ok=function(){n.close({width:e.newWidth,height:e.newHeight})},e.cancel=function(){n.dismiss()},e.init=function(){e.bounds=t.getBounds(!1),e.canvas=angular.element("#preview-canvas")[0],e.newWidth=t.canvas.width,e.newHeight=t.canvas.height,e.draw()},e.draw=function(){var n,i,a,r,s,l=e.canvas.width/e.canvas.height,d=e.newWidth/e.newHeight;l>d?(i=o,r=e.canvas.height-2*o,s=r/e.newHeight,a=s*e.newWidth,n=(e.canvas.width-a)/2):(n=o,a=e.canvas.width-2*o,s=a/e.newWidth,r=s*e.newHeight,i=(e.canvas.height-r)/2);var c=e.canvas.getContext("2d");c.save(),c.fillStyle="#ccc",c.fillRect(0,0,e.canvas.width,e.canvas.height),c.fillStyle="#fff",c.fillRect(n,i,a,r),c.restore(),c.save(),c.translate(n,i),c.scale(s,s),c.globalCompositeOperation="multiply",c.drawImage(t.canvas,0,0),c.restore(),c.save(),c.strokeStyle="#777",c.strokeRect(n,i,a,r),c.restore()},e.canWidthDown=function(){var t=e.newWidth-l;return null!==e.bounds&&t>=e.bounds.right&&t>=r},e.widthDown=function(){e.canWidthDown()&&(e.newWidth-=l,e.draw())},e.canWidthUp=function(){return e.newWidth<s},e.widthUp=function(){e.canWidthUp()&&(e.newWidth+=100,e.draw())},e.canHeightDown=function(){var t=e.newHeight-l;return null!==e.bounds&&t>=e.bounds.bottom&&t>=r},e.heightDown=function(){e.canHeightDown()&&(e.newHeight-=l,e.draw())},e.canHeightUp=function(){return e.newHeight<s},e.heightUp=function(){e.canHeightUp()&&(e.newHeight+=l,e.draw())},i(function(){e.init()},500)}]),angular.module("web").factory("resetService",["$q","$http",function(e,t){var n={};return n.createReset=function(n){var i=e.defer(),a={email:n};return t.post("/api/v1/passwordreset",a).success(function(){i.resolve(!0)}).error(function(){i.reject(!1)}),i.promise},n.setNewPassword=function(n,i,a){var o=e.defer(),r={email:i,password:a};return t.put("/api/v1/passwordreset/"+n,r).success(function(){o.resolve(!0)}).error(function(){o.reject(!1)}),o.promise},n}]),angular.module("web").config(["$routeProvider",function(e){e.when("/request-password-reset",{templateUrl:"app/reset/request.html",controller:"RequestResetCtrl",resolve:{requireNoUser:["pageAccessService",function(e){return e.requireNoUser()}]}})}]),angular.module("web").controller("RequestResetCtrl",["$scope","resetService",function(e,t){e.success=!1,e.hasErrors=!1,e.request={email:""},e.requestOnEnter=function(t){13===t.charCode&&e.requestReset()},e.requestReset=function(){e.hasErrors=!1;var n=t.createReset(e.request.email);n.then(function(){e.success=!0},function(){e.hasErrors=!0})}}]),angular.module("web").config(["$routeProvider",function(e){e.when("/finish-password-reset/:identifier",{templateUrl:"app/reset/finish.html",controller:"FinishResetCtrl",resolve:{requireNoUser:["pageAccessService",function(e){return e.requireNoUser()}]}})}]),angular.module("web").controller("FinishResetCtrl",["$scope","resetService","$routeParams","$location",function(e,t,n,i){e.hasErrors=!1,e.request={email:"",password:""},e.finishOnEnter=function(t){13===t.charCode&&e.finish()},e.finish=function(){e.hasErrors=!1;var a=t.setNewPassword(n.identifier,e.request.email,e.request.password);a.then(function(){i.path("/login").search("email",e.request.email)},function(){e.hasErrors=!0})}}]),angular.module("web").config(["$routeProvider",function(e){e.when("/authorization/error",{templateUrl:"app/authorization/error.html",controller:"AuthorizationErrorCtrl"})}]),angular.module("web").controller("AuthorizationErrorCtrl",["$scope","$location",function(e,t){var n=t.search();"string"==typeof n.code&&(e.errorCode=n.code),"string"==typeof n.email&&n.email.length>1&&(e.emailAddress=n.email)}]),angular.module("web").config(["$routeProvider",function(e){e.when("/privacy-policy",{templateUrl:"app/privacy/privacy.html",controller:"PrivacyPolicyCtrl"})}]),angular.module("web").controller("PrivacyPolicyCtrl",["$scope","$location","$anchorScroll","$timeout",function(e,t,n,i){}]),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/account/account.html",'<div class="container narrow pad-container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="page-header"><h1>Account</h1></div><div class="panel panel-default" ng-show="session.provider===\'google\'"><div class="panel-heading"><h3 class="panel-title">You are logged in with your Google account</h3></div><div class="panel-body"><div class="container social-network-account"><div class="row"><div class="col-lg-8"><div>{{user.name}}</div><div>{{user.email}}</div></div><div class="col-lg-4"><img class="google-logo" src="assets/images/Google_2015_logo.svg"></div></div></div></div></div><div class="panel panel-default" ng-show="session.provider===\'facebook\'"><div class="panel-heading"><h3 class="panel-title">You are logged in with your Facebook account</h3></div><div class="panel-body"><div class="container social-network-account"><div class="row"><div class="col-lg-8"><div>{{user.name}}</div><div>{{user.email}}</div></div><div class="col-lg-4"><img class="google-logo" src="assets/images/facebook-logo.png"></div></div></div></div></div><div class="panel panel-default" ng-show="session.provider===\'password\'"><div class="panel-heading"><h3 class="panel-title">Name</h3></div><div class="panel-body"><div ng-hide="isMode(\'name\')"><span>{{user.name}}</span> <button type="button" class="btn btn-primary pull-right" ng-disabled="!isModeNull()" ng-click="startNameChange()">Change</button></div><div ng-show="isMode(\'name\')"><form role="form" novalidate="" name="nameForm"><div class="form-group"><label for="name">New Name</label> <span class="error-info" ng-show="nameHasError()">Name cannot be blank</span> <input id="name" type="text" class="form-control" placeholder="Name" name="name" ng-required="true" ng-model="changeUser.name" ng-class="{\'has-error\': nameHasError()}"></div><div class="form-group"><label for="password">Current Password</label> <span class="error-info" ng-show="currentPasswordHasError()">Your current password is required</span> <input type="password" class="form-control" placeholder="Password" name="currentPassword" ng-required="true" ng-minlength="8" ng-model="changeUser.currentPassword" ng-class="{\'has-error\': currentPasswordHasError()}"></div></form><button type="button" class="btn btn-primary" ng-click="saveNameChange()">Save</button> <button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button></div></div></div><div class="panel panel-default" ng-show="session.provider===\'password\'"><div class="panel-heading"><h3 class="panel-title">Email</h3></div><div class="panel-body"><div ng-hide="isMode(\'email\')"><span>{{user.email}}</span> <button type="button" class="btn btn-primary pull-right" ng-disabled="!isModeNull()" ng-click="startEmailChange()">Change</button></div><div ng-show="isMode(\'email\')"><form role="form" novalidate="" name="emailForm"><div class="form-group"><label for="email">New Email Address</label> <span class="error-info" ng-show="emailHasError()">A valid email address is required</span> <input id="email" type="email" class="form-control" placeholder="Email Address" name="email" ng-required="true" ng-model="changeUser.email" ng-class="{\'has-error\': emailHasError()}"></div><div class="form-group"><label for="password">Current Password</label> <span class="error-info" ng-show="currentPasswordHasError()">Your current password is required</span> <input type="password" class="form-control" placeholder="Password" name="currentPassword" ng-required="true" ng-minlength="8" ng-model="changeUser.currentPassword" ng-class="{\'has-error\': currentPasswordHasError()}"></div></form><button type="button" class="btn btn-primary" ng-click="saveEmailChange()">Save</button> <button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button></div></div></div><div class="panel panel-default" ng-show="session.provider===\'password\'"><div class="panel-heading"><h3 class="panel-title">Password</h3></div><div class="panel-body"><div ng-hide="isMode(\'password\')">&#x25cf;&#x25cf;&#x25cf; <button type="button" class="btn btn-primary pull-right" ng-disabled="!isModeNull()" ng-click="startPasswordChange()">Change</button></div><div ng-show="isMode(\'password\')"><form role="form" novalidate="" name="passwordForm"><div class="form-group"><label for="password">Current Password</label> <span class="error-info" ng-show="currentPasswordHasError()">Your current password is required</span> <input id="currentPassword" type="password" class="form-control" placeholder="Password" name="currentPassword" ng-required="true" ng-minlength="8" ng-model="changeUser.currentPassword" ng-class="{\'has-error\': currentPasswordHasError()}"></div><div class="form-group"><label for="password">New Password</label> <span class="error-info" ng-show="passwordHasError()">Password should be at leat 8 characters</span> <input id="password" type="password" class="form-control" placeholder="Password" name="password" ng-required="true" ng-minlength="8" ng-model="changeUser.password" ng-class="{\'has-error\': passwordHasError()}"></div><div class="form-group"><label for="password">Confirm New Password</label> <span class="error-info" ng-show="confirmPasswordHasError()">Passwords must match</span> <input id="confirmPassword" type="password" class="form-control" placeholder="Confirm Password" name="confirmPassword" ng-required="true" ng-model="changeUser.confirmPassword" ng-class="{\'has-error\': confirmPasswordHasError()}" ui-validate="\'validatePasswordsMatch($value)\'" ui-validate-watch="\'changeUser.password\'"></div></form><button type="button" class="btn btn-primary" ng-click="savePasswordChange()">Save</button> <button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button></div></div></div><div class="social-signins" ng-show="session.provider===\'password\'"><h4>Link your ERDPlus account to another account</h4><div>Using one of your other accounts to access ERDPlus may be more convenient. You will still be able to login with your username password.</div><a href="/api/v1/authorization/google" class="social-signin-link"><div class="google"></div></a> <a href="/api/v1/authorization/facebook" class="social-signin-link"><div class="facebook"></div></a></div><button type="button" class="btn btn-warning" ng-click="startDelete()" ng-hide="isMode(\'delete\')">Delete your account?</button><div class="panel panel-default" ng-show="isMode(\'delete\')"><div class="panel-heading"><h3 class="panel-title">Delete Account</h3></div><p><div class="panel-body"><div class="delete-warning">Your account will be permanently and immediately deleted. It cannot be recovered.</div><div class="container social-network-account"><div class="row"><div class="col-lg-8"><form role="form" novalidate="" name="deleteForm"><div class="form-group"><input id="delete-confirm" type="text" class="form-control" placeholder="Type \'DELETE\' to confirm" ng-required="true" ng-model="deleteConfirmation"></div></form></div><div class="col-lg-4"><button type="button" class="btn btn-danger btn-block" ng-disabled="deleteConfirmation!==\'DELETE\'" ng-click="doDelete()">Delete</button></div></div></div></div></p></div><div ng-repeat="error in errors" ng-show="hasErrors"><div class="alert alert-danger" role="alert">{{error}}</div></div></div><div ng-include="\'components/error/error.html\'"></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/authorization/error.html",'<div class="container narrow pad-container authorization-error"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="page-header"><h1>Auhorization Failed</h1></div><div ng-show="errorCode===\'access-denied\'"><h4 class="error-message">Access denied by user</h4><div class="error-details">The user did not allow ERDPlus access to login.</div></div><div ng-show="errorCode===\'already-linked\'"><h4 class="error-message">Social network account already used</h4><div class="error-details">Unable to link the social network account to this ERDPlus user. The social network account has already been used to create a different ERDPlus user.</div></div><div ng-show="errorCode===\'email-exists\'"><h4 class="error-message">Email address already used: {{emailAddress}}</h4><div class="error-details">An erdplus.com user with that email address already exists. See <a href="#/faq#authorize-with-social-network">this FAQ entry for instructions</a> on how to link an existing user to a social media account.</div></div></div><div ng-include="\'components/error/error.html\'"></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/diagrams/confirm_delete_diagram_modal.html",'<script type="text/ng-template" id="confirmDeleteDiagramModal.html"><div class="modal-header"> <button type="button" class="close" ng-click="cancel()"> <span aria-hidden="true">&times;</span><span class="sr-only">Close</span> </button> <h3 class="modal-title">Delete Diagram?</h3> </div> <div class="modal-body"> <div>{{name}}</div> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="cancel()">Cancel</button> <button class="btn btn-danger" ng-click="ok()">Delete</button> </div></script>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/diagrams/confirm_delete_folder_modal.html",'<script type="text/ng-template" id="confirmDeleteFolderModal.html"><div class="modal-header"> <button type="button" class="close" ng-click="cancel()"> <span aria-hidden="true">&times;</span><span class="sr-only">Close</span> </button> <h3 class="modal-title">Delete Folder?</h3> </div> <div class="modal-body"> <div>{{name}}</div> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="cancel()">Cancel</button> <button class="btn btn-danger" ng-click="ok()">Delete</button> </div></script>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/diagrams/diagrams.html",'<div class="container-fluid diagrams-page"><div ng-include="\'components/navbar/navbar.html\'"></div><div ng-include="\'app/diagrams/rename_diagram_modal.html\'"></div><div ng-include="\'app/diagrams/rename_folder_modal.html\'"></div><div ng-include="\'app/diagrams/confirm_delete_diagram_modal.html\'"></div><div ng-include="\'app/diagrams/confirm_delete_folder_modal.html\'"></div><div class="folder-buttons"><div class="btn-group"><button type="button" class="btn btn-primary" ng-disabled="!enableNewFolder()" ng-click="newFolder()"><span class="glyphicon glyphicon-plus"></span> <span class="button-label">New</span></button></div></div><div class="folder-tree-area"><ul class="list-group"><li class="list-group-item" ng-repeat="folder in folderList | filter : displayFolderListItem" ng-class="{\'current-folder\':folder===currentFolder}" ng-click="selectFolder(folder)" data-drop="true" jqyoui-droppable="{onDrop:\'dropDiagrams\'}" data-folder-id="{{folder.id}}" data-jqyoui-options="{activeClass:\'active-droppable\',hoverClass:\'hover-droppable\',tolerance:\'pointer\'}"><span style="margin-left:{{folder.state.depth*15}}px;"></span> <span class="folder-icon" ng-click="toggleFolder($event, folder)"><span class="diagram-type glyphicon glyphicon-refresh" ng-show="folder.state.icon===\'fetching\'"></span> <span class="diagram-type glyphicon glyphicon-folder-open" ng-show="folder.state.icon===\'open\'"></span> <span class="diagram-type glyphicon glyphicon-folder-close" ng-show="folder.state.icon===\'closed\'||folder.state.icon===\'unknown\'"></span> <span class="diagram-type glyphicon glyphicon-trash" ng-show="folder.state.icon===\'trash\'"></span></span> <span class="folder-name">{{folder.name}}</span> <span class="dropdown pull-right" dropdown="" ng-click="stopPropagationOnDropdown($event)" ng-show="folder.parent_id !== null"><a href="" class="dropdown-toggle" dropdown-toggle=""><span class="glyphicon glyphicon-cog"></span> <span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li><a href="#" ng-click="renameFolder($event, folder)">Rename</a></li><li><a href="#" ng-click="deleteFolder($event, folder)">Delete</a></li></ul></span></li></ul></div><div class="document-area"><ul class="list-group"><li class="list-group-item trash-folder" ng-show="currentFolder.trash">Diagrams here will be deleted after 30 days.</li><li class="list-group-item" ng-repeat="diagram in diagrams | orderBy : \'name\'" data-drag="true" jqyoui-draggable="{containment:\'position\',placeholder:true}" data-jqyoui-options="{containment:\'window\',zIndex:100,revert:\'invalid\',helper:\'clone\',appendTo:\'body\',cursorAt:{top:10,left:10},opacity:0.5}" data-diagram-id="{{diagram.id}}" ng-click="openDiagram($event, diagram)"><span class="dropdown" dropdown="" ng-click="stopPropagationOnDropdown($event)"><a href="" class="dropdown-toggle" dropdown-toggle="" ng-hide="currentFolder.trash"><span class="glyphicon glyphicon-cog"></span> <span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li><a href="#" ng-click="openDiagram($event, diagram)">Open</a></li><li class="divider" ng-show="diagram.kind===\'er\'"></li><li ng-show="diagram.kind===\'er\'"><a href="#" ng-click="convertToRelational($event, diagram)">Convert to Relational Schema (Beta)</a></li><li class="divider"></li><li><a href="#" ng-click="renameDiagram($event, diagram)">Rename</a></li><li><a href="#" ng-click="cloneDiagram($event, diagram)">Clone</a></li><li><a href="#" ng-click="exportDiagram($event, diagram)">Export</a></li><li><a href="#" ng-click="deleteDiagram($event, diagram)">Delete</a></li></ul></span> <span class="diagram-name">{{diagram.name}}</span> <span class="diagram-type" ng-show="diagram.kind===\'er\'"><img src="assets/images/diagram_kind_er.png" class="kind">ER Diagram</span> <span class="diagram-type" ng-show="diagram.kind===\'relational\'"><img src="assets/images/diagram_kind_relational.png" class="kind">Relational Schema</span> <span class="diagram-type" ng-show="diagram.kind===\'star\'"><img src="assets/images/diagram_kind_star.png" class="kind">Star Schema</span> <span class="pull-right last-modified" ng-show="currentFolder.trash">Deleted: {{diagram | diagramDate : \'short\' : true}}</span> <span class="pull-right last-modified" ng-hide="currentFolder.trash">Last modified: {{diagram | diagramDate : \'short\' : false}}</span></li></ul></div><div class="diagram-buttons"><div class="btn-group"><div class="btn-group" dropdown="" is-open="status.isopen"><button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle="" ng-disabled="disabled"><span class="glyphicon glyphicon-plus"></span> <span class="button-label">New</span></button><ul class="dropdown-menu" role="menu"><li><a href="#" ng-click="newDiagram($event, \'er\')"><img src="assets/images/diagram_kind_er.png" class="kind">ER Diagram</a></li><li><a href="#" ng-click="newDiagram($event, \'relational\')"><img src="assets/images/diagram_kind_relational.png" class="kind">Relational Schema</a></li><li><a href="#" ng-click="newDiagram($event, \'star\')"><img src="assets/images/diagram_kind_star.png" class="kind">Star Schema</a></li></ul></div><button type="button" class="btn btn-default" ng-file-select="" ng-file-change="importDiagram($files)">Import</button></div></div></div><div ng-include="\'components/error/error.html\'"></div>');
}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/diagrams/rename_diagram_modal.html",'<script type="text/ng-template" id="renameDiagramModal.html"><div class="modal-header"> <button type="button" class="close" ng-click="cancel()"> <span aria-hidden="true">&times;</span><span class="sr-only">Close</span> </button> <h3 class="modal-title">Rename Diagram</h3> </div> <div class="modal-body"> <form role=\'form\'> <div class="form-group"> <label for="name">Diagram Name</label> <input id="name" type="text" class="form-control" placeholder="Name" ng-model="name"> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()">OK</button> <button class="btn btn-warning" ng-click="cancel()">Cancel</button> </div></script>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/diagrams/rename_folder_modal.html",'<script type="text/ng-template" id="renameFolderModal.html"><div class="modal-header"> <button type="button" class="close" ng-click="cancel()"> <span aria-hidden="true">&times;</span><span class="sr-only">Close</span> </button> <h3 class="modal-title">Rename Folder</h3> </div> <div class="modal-body"> <form role=\'form\'> <div class="form-group"> <label for="name">Folder Name</label> <input id="name" type="text" class="form-control" placeholder="Name" ng-model="name"> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()">OK</button> <button class="btn btn-warning" ng-click="cancel()">Cancel</button> </div></script>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/faq/faq.html",'<div class="container-fluid pad-container faq-page"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="container"><div class="row"><div class="col-lg-12"><h1 class="page-header">Frequently Asked Questions</h1></div></div><div class="row contact"><div class="col-lg-12"><p>Please send any feedback, questions or bug reports to <a href="mailto:info@erdplus.com">info@erdplus.com</a>.</p></div></div><div class="row index"><div class="col-lg-12"><p>Using ERDPlus</p><ul><li><a class="question" ng-click="scrollToQuestion(\'er-unary\')">How do I create a unary relationship in an ER Diagram?</a></li><li><a class="question" ng-click="scrollToQuestion(\'er-ternary\')">How do I make a ternary relationship in an ER Diagram?</a></li><li><a class="question" ng-click="scrollToQuestion(\'relational-fk\')">How do I make a foreign key in a Relational Schema?</a></li><li><a class="question" ng-click="scrollToQuestion(\'authorize-with-social-network\')">I already created an ERDPlus account. Can I still use a social network to login?</a></li></ul><p>Known Issues</p><ul><li><a class="question" ng-click="scrollToQuestion(\'ie11-save-as\')">Internet Explorer 11 on Windows 8: Unable to save and overwrite an existing file in the standalone editor</a></li></ul></div></div><a id="er-unary">&nbsp;</a><div class="row answer"><div class="col-lg-12"><div class="panel panel-default"><div class="panel-heading"><a class="question" ng-click="scrollToQuestion(\'er-unary\')">How do I create a unary relationship in an ER Diagram?</a></div><div class="panel-body"><p>Create a unary relationship by clicking on the relationship icon (diamond), placing the relationship diamond on the drawing surface, naming the relationship, choosing the same entity for Entity One and Entity Two in the Edit relationship dialog box, and choosing appropriate cardinality constraints.</p><img class="img-responsive" src="assets/images/faq/unary-relationship.png"></div></div></div></div><a id="er-ternary">&nbsp;</a><div class="row answer"><div class="col-lg-12"><div class="panel panel-default"><div class="panel-heading"><a class="question" ng-click="scrollToQuestion(\'er-ternary\')">How do I make a ternary relationship in an ER Diagram?</a></div><div class="panel-body"><p>In ERDPlus a ternary relationship is made using the associative entity feature. Here is an example of a ternary relationship.</p><div><img class="img-responsive" src="assets/images/faq/ternary-relationship.png"></div></div></div></div></div><a id="relational-fk">&nbsp;</a><div class="row answer"><div class="col-lg-12"><div class="panel panel-default"><div class="panel-heading"><a class="question" ng-click="scrollToQuestion(\'relational-fk\')">How do I make a foreign key in a Relational Schema?</a></div><div class="panel-body"><p>To create a foreign key, click on the connect button. Then click on the table where the foreign key is sourced from and drag to the table that is getting the foreign key. This sequence of actions is illustrated with the following three figures</p><div><img class="img-responsive" src="assets/images/faq/relational-schema-fk1.png"> <img class="img-responsive" src="assets/images/faq/relational-schema-fk2.png"> <img class="img-responsive" src="assets/images/faq/relational-schema-fk3.png"></div></div></div></div></div><a id="authorize-with-social-network">&nbsp;</a><div class="row answer"><div class="col-lg-12"><div class="panel panel-default"><div class="panel-heading"><a class="question" ng-click="scrollToQuestion(\'authorize-with-social-network\')">I already created an ERDPlus account. Can I still use a social network to login?</a></div><div class="panel-body"><p>If you have an existing account with a username and password you can link that account to your Google or Facebook login by following these steps.</p><ol><li><a href="#/login">Login with your username and password</a></li><li><a href="#/account">Go to the account settings page</a></li><li>Click one of the buttons to connect your account to a social network login</li></ol><p>You can still use the username and password to login if you wish however most people prefer the convenience of using one of their existing social network accounts.</p></div></div></div></div><a id="ie11-save-as">&nbsp;</a><div class="row answer"><div class="col-lg-12"><div class="panel panel-default"><div class="panel-heading"><a class="question" ng-click="scrollToQuestion(\'ie11-save-as\')">Internet Explorer 11 on Windows 8: Unable to save and overwrite an existing file in the standalone editor</a></div><div class="panel-body"><p>There is a known issue affecting Internet Explorer 11 on Windows 8 and 8.1. After opening or importing a file Internet Explorer appears to keep the file in a state that prevents a download from overwriting it later. The following steps will lead to the issue:</p><ol><li>Use <a href="https://erdplus.com/#/standalone">standalone mode</a></li><li>Open a file and optionally make any changes to the diagram</li><li>Save the file and choose to "Save-As" and overwrite the original file</li><li>Internet Explorer will download the file and save it under a different and temporary name but fail to overwrite the original file</li></ol><p>If you experience this issue please consider one of the following workarounds:</p><ul><li>Delete or rename the original file before saving over it</li><li>Save the file as a different name each time</li><li>Use a different browser for ERDPlus if you are on Windows 8</li><li>Consider creating an account and automatically saving your diagrams on our server</li></ul><p>After investigating this problem and attempting to fix it we believe the issue is related to the two issues already reported to Microsoft. Unfortunately Microsoft has no plans to fix either of these bugs.</p><a class="ie-issue-link" href="https://connect.microsoft.com/IE/feedback/details/817183/ie10-and-ie11-keep-files-locked-after-uploading">IE10 and IE11 keep files locked after uploading</a> <a class="ie-issue-link" href="https://connect.microsoft.com/IE/feedback/details/796798/ie-10-leave-open-stream-on-files-selected-for-file-upload">IE10 leave open stream on files selected for file upload</a></div></div></div></div></div></div><div ng-include="\'components/footer/footer.html\'"></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/editor/canvas_dimensions.html",'<script type="text/ng-template" id="canvasDimensions.html"><div class="modal-header"> <button type="button" class="close" ng-click="cancel()"> <span aria-hidden="true">&times;</span><span class="sr-only">Close</span> </button> <h3 class="modal-title">Canvas Size</h3> </div> <div class="modal-body"> <div> <div class="preview-container"> <canvas id="preview-canvas" width="400" height="225"></canvas> </div> <div class="height-buttons"> <button class="btn btn-default" ng-disabled="!canHeightDown()" ng-click="heightDown()"><span class="glyphicon glyphicon-minus"> Height</span></button> <button class="btn btn-default" ng-disabled="!canHeightUp()" ng-click="heightUp()"><span class="glyphicon glyphicon-plus"> Height</span></button> </div> </div> <div class="width-buttons"> <button class="btn btn-default" ng-disabled="!canWidthDown()" ng-click="widthDown()"><span class="glyphicon glyphicon-minus"> Width</span></button> <button class="btn btn-default" ng-disabled="!canWidthUp()" ng-click="widthUp()"><span class="glyphicon glyphicon-plus"> Width</span></button> </div> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="cancel()">Cancel</button> <button class="btn btn-primary" ng-click="ok()">Confirm</button> </div></script>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/editor/context_attribute.html",'<div ng-controller="ContextAttributeCtrl" ng-show="show"><div class="context-title">Edit Attribute</div><form role="form"><div class="form-group"><label for="attributeName">Name</label> <input id="attributeName" type="text" ng-click="handlePrimaryInputClick($event)" ng-keydown="handlePrimaryInputKeydown($event)" class="form-control" placeholder="Name" ng-model="name"></div><div class="form-group"><div class="checkbox"><label ng-hide="isPartiallyUnique"><input type="checkbox" ng-model="isUnique"> Unique</label> <label ng-show="isPartiallyUnique"><input type="checkbox" ng-model="isUnique"> Partially Unique</label></div><div class="checkbox"><label><input type="checkbox" ng-model="isMultivalued"> Multivalued</label></div><div class="checkbox"><label><input type="checkbox" ng-model="isOptional"> Optional</label></div><div class="checkbox"><label><input type="checkbox" ng-model="isComposite"> Composite</label></div><div class="checkbox"><label><input type="checkbox" ng-model="isDerived"> Derived</label></div></div></form><div class="buttons-area"><button class="btn btn-primary btn-block" ng-click="addSiblingAttribute()" ng-show="getParentType()===\'Entity\'"><span class="glyphicon glyphicon-plus"></span> Add Attribute to Entity</button> <button class="btn btn-primary btn-block" ng-click="addSiblingAttribute()" ng-show="getParentType()===\'Relationship\'"><span class="glyphicon glyphicon-plus"></span> Add Attribute to Relationship</button> <button class="btn btn-primary btn-block" ng-click="addSiblingAttribute()" ng-show="getParentType()===\'Attribute\'"><span class="glyphicon glyphicon-plus"></span> Add Attribute to Composite</button> <button class="btn btn-primary btn-block" ng-click="addAttribute()" ng-show="isComposite"><span class="glyphicon glyphicon-plus"></span> Add Component Attribute</button></div></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/editor/context_entity.html",'<div ng-controller="ContextEntityCtrl" ng-show="show"><div class="context-title">Edit Entity</div><form role="form"><div class="form-group"><label for="entityName">Name</label> <input id="entityName" type="text" ng-click="handlePrimaryInputClick($event)" ng-keydown="handlePrimaryInputKeydown($event)" class="form-control" placeholder="Name" ng-model="entityName"></div><div class="form-group"><label for="type">Type</label><div class="radio"><label><input type="radio" name="entityType" value="regular" ng-model="entityType"> Regular</label></div><div class="radio"><label><input type="radio" name="entityType" value="weak" ng-model="entityType"> Weak</label></div><div class="radio"><label><input type="radio" name="entityType" value="associative" ng-model="entityType"> Associative</label></div></div></form><div class="buttons-area"><button class="btn btn-primary btn-block" ng-click="addAttribute()"><span class="glyphicon glyphicon-plus"></span> Add Attribute</button></div></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/editor/context_label.html",'<div ng-controller="ContextLabelCtrl" ng-show="show" class="label-context"><div class="context-title">Edit Label</div><form role="form"><div class="form-group"><label for="labelText">Text</label> <textarea id="labelText" rows="10" ng-click="handlePrimaryInputClick($event)" ng-keydown="handlePrimaryInputKeydown($event)" class="form-control" placeholder="Text" ng-model="text">\n    </textarea></div></form></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/editor/context_relationship.html",'<div ng-controller="ContextRelationshipCtrl" ng-show="show" class="relationship-context"><div class="context-title">Edit Relationship</div><form role="form"><div class="form-group"><label for="relationshipName">Name</label> <input id="relationshipName" type="text" ng-click="handlePrimaryInputClick($event)" ng-keydown="handlePrimaryInputKeydown($event)" class="form-control" placeholder="Name" ng-model="name"></div><div class="form-group"><div class="checkbox"><label><input type="checkbox" ng-model="isIdentifying"> Identifying</label></div></div><div class="form-group"><label>Entity One</label><select class="form-control" ng-model="slot0EntityId" ng-options="entity.details.id as entity.details.name for entity in entities"></select></div><fieldset ng-disabled="false" ng-hide="showExactConstraints"><div class="form-group constraints"><label class="constraint">Participation</label><div class="radio"><label><input type="radio" name="slot0participation" value="mandatory" ng-model="slot0Participation"> Mandatory</label></div><div class="radio"><label><input type="radio" name="slot0participation" value="optional" ng-model="slot0Participation"> Optional</label></div><div class="radio"><label><input type="radio" name="slot0participation" value="unspecified" ng-model="slot0Participation"> Unspecified</label></div></div><div class="form-group constraints second"><label class="constraint">Cardinality</label><div class="radio"><label><input type="radio" name="slot0cardinality" value="one" ng-model="slot0Cardinality"> One</label></div><div class="radio"><label><input type="radio" name="slot0cardinality" value="many" ng-model="slot0Cardinality"> Many</label></div><div class="radio"><label><input type="radio" name="slot0cardinality" value="unspecified" ng-model="slot0Cardinality"> Unspecified</label></div></div></fieldset><fieldset ng-show="showExactConstraints" class="exact-constraints"><div class="form-group constraints first"><label>Minimum</label> <input id="slot0min" type="text" class="form-control minmax" ng-model="slot0Minimum"></div><div class="form-group constraints"><label>Maximum</label> <input id="slot0max" type="text" class="form-control minmax" ng-model="slot0Maximum"></div><div class="form-group constraints"><label for="slot0role">Role</label> <input id="slot0role" type="text" class="form-control" ng-model="slot0Role"></div></fieldset><div class="form-group"><label>Entity Two</label><select class="form-control" ng-model="slot1EntityId" ng-options="entity.details.id as entity.details.name for entity in entities"></select></div><fieldset ng-disabled="false" ng-hide="showExactConstraints"><div class="form-group constraints"><label class="constraint">Participation</label><div class="radio"><label><input type="radio" name="slot1participation" value="mandatory" ng-model="slot1Participation"> Mandatory</label></div><div class="radio"><label><input type="radio" name="slot1participation" value="optional" ng-model="slot1Participation"> Optional</label></div><div class="radio"><label><input type="radio" name="slot1participation" value="unspecified" ng-model="slot1Participation"> Unspecified</label></div></div><div class="form-group constraints second"><label class="constraint">Cardinality</label><div class="radio"><label><input type="radio" name="slot1cardinality" value="one" ng-model="slot1Cardinality"> One</label></div><div class="radio"><label><input type="radio" name="slot1cardinality" value="many" ng-model="slot1Cardinality"> Many</label></div><div class="radio"><label><input type="radio" name="slot1cardinality" value="unspecified" ng-model="slot1Cardinality"> Unspecified</label></div></div></fieldset><fieldset ng-show="showExactConstraints" class="exact-constraints"><div class="form-group constraints first"><label>Minimum</label> <input id="slot1min" type="text" class="form-control minmax" ng-model="slot1Minimum"></div><div class="form-group constraints"><label>Maximum</label> <input id="slot1max" type="text" class="form-control minmax" ng-model="slot1Maximum"></div><div class="form-group constraints"><label for="slot1role">Role</label> <input id="slot1role" type="text" class="form-control" ng-model="slot1Role"></div></fieldset></form><div class="buttons-area"><button class="btn btn-primary btn-block" ng-click="addAttribute()"><span class="glyphicon glyphicon-plus"></span> Add Attribute</button> <button class="btn btn-primary btn-block" ng-click="toggleExactConstraints()" ng-class="{active: showExactConstraints}"><span ng-hide="showExactConstraints">View Exact Constraints</span> <span ng-show="showExactConstraints">Hide Exact Constraints</span></button></div></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/editor/context_table.html",'<div ng-controller="ContextTableCtrl" ng-show="show" class="table-context"><div class="context-title">Edit {{itemType}}</div><div class="context-section-title">Name</div><form role="form"><div class="form-group"><input id="tableName" type="text" class="form-control" ng-click="handlePrimaryInputClick($event)" ng-keydown="handlePrimaryInputKeydown($event)" placeholder="Name" ng-model="name"></div></form><div class="buttons-area" ng-show="mode===\'pk\' || mode===\'optional\' || mode===\'soloUnique\' || mode===\'delete\'"><button type="button" class="btn btn-success btn-block" ng-click="endMode()">Done</button></div><div class="buttons-area" ng-show="mode===\'normal\'"><div class="side-by-side-buttons"><button type="button" class="btn btn-primary col-1" ng-click="startUpdatePrimaryKey()">Primary Key</button> <button type="button" class="btn btn-primary col-2" ng-click="addRecursivePrimaryKey()">Recursive Key</button></div><div class="side-by-side-buttons"><button type="button" class="btn btn-primary col-1" ng-click="startUniqueMode()">Unique (U)</button> <button type="button" class="btn btn-primary col-2" ng-click="startOptionalMode()">Optional (O)</button></div><div class="side-by-side-buttons"><span class="btn-group col-1" dropdown=""><button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle="" ng-disabled="disabled"><span class="button-label">(U) Groups</span> <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li><a href="#" ng-click="addNewUniqueGroup($event)">Add New Unique Group</a></li><li class="divider"></li>><li ng-repeat="group in uniqueGroupsMenu"><a href="#" ng-click="editUniqueGroup($event, group)">Edit Group {{group.name}}</a></li></ul></span> <button type="button" class="btn btn-primary btn-block col-2" ng-click="toggleShowDataTypes()"><span class="glyphicon glyphicon-check" aria-hidden="true" ng-show="showDataTypes"></span> <span class="glyphicon glyphicon-unchecked" aria-hidden="true" ng-hide="showDataTypes"></span> Data Types</button></div></div><div ng-show="mode===\'normal\'" class="context-section-title">Columns</div><div class="buttons-area" ng-show="mode===\'normal\'"><div class="side-by-side-buttons"><button type="button" class="btn btn-success col-1" ng-click="addAttribute()"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add</button> <button type="button" class="btn btn-danger col-2" ng-click="startDeleteMode()"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span> Remove</button></div></div><form role="form" ng-show="mode===\'normal\'"><div class="form-group"><ul class="list-group table-attributes-list mode-normal"><li class="list-group-item" ng-repeat="wrapper in wrappers" ng-class="{\'editing-item\':wrapper.isCurrent, \'hide-borders\':!wrapper.isCurrent}" ng-click="selectItemGroup(wrapper)"><span class="column-item"><div class="column-name-stack"><div ng-repeat="name in wrapper.names" class="column-input"><input type="text" class="form-control" erd-force-focus="name.forceFocus" ng-model="name.value" ng-change="attributeNameChanged($index, wrapper)" ng-focus="selectItemGroup(wrapper)" placeholder="Name"></div><div class="datatype-container" ng-show="showDataTypes && !wrapper.fk"><div class="icon"><span class="fa fa-database"></span></div><div class="controls"><select class="form-control" ng-model="wrapper.dataType" ng-change="attributeDataTypeChanged(wrapper)" ng-options="t.id as t.name for t in columnTypes"></select><div ng-show="wrapper.hasDataTypeSize"><input type="text" class="form-control datatype-size column-input" ng-model="wrapper.dataTypeSize" ng-change="attributeDataTypeSizeChanged(wrapper)" placeholder="{{getDataTypeSizePlaceholder(wrapper)}}"></div></div></div></div><div class="reorder-button-stack"><button type="button" class="up btn btn-sm btn-default" ng-class="{\'editing\':wrapper.isCurrent}" ng-click="moveAttributeUp($event, wrapper)"><span class="glyphicon glyphicon-arrow-up"></span></button> <button type="button" class="down btn btn-sm btn-default" ng-class="{\'editing\':wrapper.isCurrent}" ng-click="moveAttributeDown($event, wrapper)"><span class="glyphicon glyphicon-arrow-down"></span></button></div></span></li></ul></div></form><div ng-show="mode===\'pk\'" class="context-section-title">Select primary key columns</div><form role="form" ng-show="mode===\'pk\'"><div class="form-group"><ul class="list-group table-attributes-list mode-pk" ng-show="mode===\'pk\'"><li class="list-group-item" ng-repeat="wrapper in wrappers"><span><div class="checkbox"><label><input type="checkbox" ng-change="attributePkChanged(wrapper)" ng-model="wrapper.pkMember"><div ng-repeat="name in wrapper.names">{{name.value}}</div></label></div></span></li></ul></div></form><div ng-show="mode===\'optional\'" class="context-section-title">Select optional key columns</div><form role="form" ng-show="mode===\'optional\'"><div class="form-group"><ul class="list-group table-attributes-list mode-optional" ng-show="mode===\'optional\'"><li class="list-group-item" ng-repeat="wrapper in wrappers"><span><div class="checkbox"><label><input type="checkbox" ng-change="attributeOptionalChanged(wrapper)" ng-model="wrapper.optional"><div ng-repeat="name in wrapper.names">{{name.value}}</div></label></div></span></li></ul></div></form><div class="context-section-title" ng-show="mode===\'soloUnique\'">Select unique columns</div><form role="form" ng-show="mode===\'soloUnique\'"><div class="form-group"><ul class="list-group table-attributes-list mode-solo-unique"><li class="list-group-item" ng-repeat="wrapper in wrappers"><span><div class="checkbox"><label ng-show="wrapper.pkMember"><input type="checkbox" disabled="" checked="checked"><div ng-repeat="name in wrapper.names">{{name.value}} (PK)</div></label> <label ng-show="!wrapper.pkMember"><input type="checkbox" ng-change="attriubteUniqueChanged(wrapper)" ng-model="wrapper.soloUnique"><div ng-repeat="name in wrapper.names">{{name.value}}</div></label></div></span></li></ul></div></form><div class="context-section-title" ng-show="mode===\'delete\'">Delete columns</div><form role="form" ng-show="mode===\'delete\'"><div class="form-group"><ul class="list-group table-attributes-list mode-delete"><li class="list-group-item" ng-repeat="wrapper in wrappers"><div class="delete-name"><div><div ng-repeat="name in wrapper.names">{{name.value}}</div></div></div><button type="button" class="btn btn-sm btn-danger" ng-click="deleteAttribute(wrapper)"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button></li></ul></div></form><div class="buttons-area" ng-show="mode===\'unique\'"><div class="side-by-side-buttons"><button type="button" class="btn btn-success col-1" ng-click="saveUniqueGroup()"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Done</button> <button type="button" class="btn btn-danger col-2" ng-click="deleteUniqueGroup()"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span> Delete</button></div></div><div class="context-section-title" ng-show="mode===\'unique\'">Columns</div><form role="form" ng-show="mode===\'unique\'"><div class="form-group"><ul class="list-group table-attributes-list mode-unique"><li class="list-group-item" ng-repeat="wrapper in uniqueWrappers"><span><div class="checkbox"><label><input type="checkbox" ng-change="attributeUniqueChanged(wrapper)" ng-model="wrapper.member"><div ng-repeat="name in wrapper.names">{{name.value}}</div></label></div></span></li></ul></div></form></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/editor/editor.html",'<div class="container-fluid"><div ng-include="\'components/navbar/navbar.html\'"></div><div ng-include="\'app/editor/export_image.html\'"></div><div ng-include="\'app/editor/export_sql.html\'"></div><div ng-include="\'app/editor/canvas_dimensions.html\'"></div><div class="diagram-container" ng-hide="kind===null" ng-class="{er: kind===\'er\', relational: kind===\'relational\', star: kind===\'star\'}"><canvas id="diagram-canvas" width="{{canvasWidth}}" height="{{canvasHeight}}" ng-class="{\'connect-mode\': isMode(\'connect\')}"></canvas></div><div class="buttons-container" ng-hide="kind===null" ng-class="{er: kind===\'er\', relational: kind===\'relational\', star: kind===\'star\'}"><span class="btn-group" dropdown="" is-open="diagramDropdown.isOpen"><button type="button" class="btn btn-default dropdown-toggle main-button" dropdown-toggle="" ng-disabled="disabled"><span class="fa fa-cog"></span> Diagram <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li><a href="#" ng-click="exportImage($event)"><span class="fa fa-picture-o"></span> Export Image</a></li><li><a href="#" ng-click="exportFile($event)"><span class="fa fa-download"></span> Export Diagram File</a></li><li ng-show="kind===\'relational\'||kind===\'star\'"><a href="#" ng-click="exportSql($event)"><span class="fa fa-database"></span> Export SQL (Beta)</a></li><li class="divider"></li><li><a href="#" ng-click="canvasDimensions($event)"><span class="fa fa-arrows"></span> Canvas Size</a></li></ul></span> <button type="button" class="btn btn-default main-button" ng-show="saveState===\'clean\'" ng-disabled="true"><span class="fa fa-check"></span> All Saved</button> <button type="button" class="btn btn-default main-button" ng-show="saveState===\'dirty\'" ng-click="save()"><span class="fa fa-check"></span> Save</button> <button type="button" class="btn btn-default main-button" ng-show="saveState===\'saving\'"><span class="fa fa-spinner fa-spin"></span><span>Saving</span></button> <button type="button" class="btn btn-default" ng-click="undo()" ng-disabled="!canUndo()"><span class="fa fa-undo"></span> Undo</button> <button type="button" class="btn btn-default" ng-click="redo()" ng-disabled="!canRedo()"><span class="fa fa-repeat"></span> Redo</button> <button type="button" class="btn btn-default" ng-click="delete()"><span class="fa fa-trash"></span> Delete</button> <button type="button" class="btn btn-default" ng-class="{currentMode: isMode(\'select\')}" ng-click="changeMode(\'select\')"><span class="fa fa-hand-o-up"></span> Select</button> <button type="button" class="btn btn-default" ng-class="{currentMode: isMode(\'connect\')}" ng-click="changeMode(\'connect\')"><span class="fa fa-crosshairs"></span> Connect</button> <button type="button" class="btn btn-default" ng-show="kind===\'er\'" ng-class="{currentMode: isMode(\'entity\')}" ng-click="changeMode(\'entity\')"><img src="assets/images/entity_icon.png" class="shape-button-icon"> Entity</button> <button type="button" class="btn btn-default" ng-show="kind===\'er\'" ng-class="{currentMode: isMode(\'attribute\')}" ng-click="changeMode(\'attribute\')"><img src="assets/images/attribute_icon.png" class="shape-button-icon"> Attribute</button> <button type="button" class="btn btn-default" ng-show="kind===\'er\'" ng-class="{currentMode: isMode(\'relationship\')}" ng-click="changeMode(\'relationship\')"><img src="assets/images/relationship_icon.png" class="shape-button-icon"> Relationship</button> <button type="button" class="btn btn-default" ng-show="kind===\'relational\'" ng-class="{currentMode: isMode(\'table\')}" ng-click="changeMode(\'table\')"><img src="assets/images/table_icon.png" class="shape-button-icon"> Table</button> <button type="button" class="btn btn-default" ng-show="kind===\'star\'" ng-class="{currentMode: isMode(\'fact\')}" ng-click="changeMode(\'fact\')"><img src="assets/images/fact_icon.png" class="shape-button-icon"> Fact</button> <button type="button" class="btn btn-default" ng-show="kind===\'star\'" ng-class="{currentMode: isMode(\'dimension\')}" ng-click="changeMode(\'dimension\')"><img src="assets/images/table_icon.png" class="shape-button-icon"> Dimension</button> <button type="button" class="btn btn-default" ng-class="{currentMode: isMode(\'label\')}" ng-click="changeMode(\'label\')"><span class="fa fa-font"></span> Label</button></div><div class="context-container" ng-hide="kind===null"><div ng-include="\'app/editor/context_entity.html\'"></div><div ng-include="\'app/editor/context_attribute.html\'"></div><div ng-include="\'app/editor/context_relationship.html\'"></div><div ng-include="\'app/editor/context_table.html\'"></div><div ng-include="\'app/editor/context_label.html\'"></div></div></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/editor/export_image.html",'<script type="text/ng-template" id="exportImage.html"><div class="modal-header"> <button type="button" class="close" ng-click="ok()"> <span aria-hidden="true">&times;</span><span class="sr-only">Close</span> </button> <h3 class="modal-title">Export Image</h3> </div> <div class="temp-container"> <canvas id="image-canvas" width="{{canvasWidth}}" height="{{canvasHeight}}"></canvas> <canvas id="temp-canvas" width="{{tempCanvasWidth}}" height="{{tempCanvasHeight}}"></canvas> </div> <div class="modal-body export-image"> <div class="image-container"> <img id="export-image" ng-src="{{dataURL}}"> </div> </div> <div class="modal-footer"> <form role="from" class="pull-left"> <fieldset> <div class="form-group"> <div class="checkbox pull-left"> <label> <input type="checkbox" ng-model="transparentBackground">Transparent Background </label> </div> </div> <div class="form-group"> <div class="checkbox pull-left"> <label> <input type="checkbox" ng-model="largeSize">High Resolution (4x normal size) </label> </div> </div> </fieldset> </form> <button type="button" class="btn btn-primary" ng-click="save()">Save Image ...</button> <button type="button" class="btn btn-default" ng-click="ok()">Close</button> </div></script>')}])}(),function(e){try{e=angular.module("web");
}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/editor/export_sql.html",'<script type="text/ng-template" id="exportSql.html"><div class="modal-header"> <button type="button" class="close" ng-click="ok()"> <span aria-hidden="true">&times;</span><span class="sr-only">Close</span> </button> <h3 class="modal-title">Export SQL</h3> <h4>Beta: Please email problems, questions, or suggestions to <a href="mailto:info@erdplus.com">info@erdplus.com</a>.</h4> </div> <div class="modal-body export-sql"> <div class="sql-container"> <pre>{{sql}}</pre> </div> <div class="unavailable-notice"> <div> The Export SQL feature is not available in the standalone version of the tool. </div> <div> Please login and use the full ERDPlus editor to use this feature. </div> </div> </div> <div class="modal-footer"> <span ng-show="copied" class="copied-notice">SQL copied to your clipboard</span> <button type="button" id="copySql" class="btn btn-primary copy" ng-click="copy()">Copy</button> <button type="button" class="btn btn-default" ng-click="ok()">Close</button> </div></script>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/editor/standalone.html",'<div class="container-fluid"><div ng-include="\'components/navbar/navbar.html\'"></div><div ng-include="\'app/editor/export_image.html\'"></div><div ng-include="\'app/editor/canvas_dimensions.html\'"></div><div ng-include="\'app/editor/export_sql.html\'"></div><div class="diagram-container" ng-hide="kind===null" ng-class="{er: kind===\'er\', relational: kind===\'relational\', star: kind===\'star\'}"><canvas id="diagram-canvas" ng-hide="kind===\'none\'" width="{{canvasWidth}}" height="{{canvasHeight}}" ng-class="{\'connect-mode\': isMode(\'connect\')}"></canvas></div><div class="buttons-container" ng-hide="kind===null" ng-class="{er: kind===\'er\', relational: kind===\'relational\', star: kind===\'star\'}"><span class="btn-group" dropdown="" is-open="diagramDropdown.isOpen"><button type="button" class="btn btn-default dropdown-toggle main-button" dropdown-toggle="" ng-disabled="disabled"><span class="fa fa-cog"></span> Diagram <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li><a href="#" ng-click="newDiagram($event, \'er\')"><img src="assets/images/diagram_kind_er.png" class="kind">New ER Diagram</a></li><li><a href="#" ng-click="newDiagram($event, \'relational\')"><img src="assets/images/diagram_kind_relational.png" class="kind">New Relational Schema</a></li><li><a href="#" ng-click="newDiagram($event, \'star\')"><img src="assets/images/diagram_kind_star.png" class="kind">New Star Schema</a></li><li class="divider"></li><li><div ng-file-select="" ng-file-accept="*.erdplus" ng-file-change="openFile($files)"><span class="fa fa-download"></span> Open Diagram File</div></li><li><a href="#" ng-click="saveFile($event)"><span class="fa fa-download"></span> Save Diagram File</a></li><li ng-class="{disabled: kind===\'none\'}"><a href="#" ng-click="exportImage($event)"><span class="fa fa-picture-o"></span> Export Image</a></li><li ng-show="kind===\'relational\'||kind===\'star\'"><a href="#" ng-click="exportSql($event)"><span class="fa fa-database"></span> Export SQL</a></li><li class="divider"></li><li><a href="#" ng-click="canvasDimensions($event)"><span class="fa fa-arrows"></span> Canvas Size</a></li></ul></span> <button type="button" class="btn btn-default" ng-disabled="kind===\'none\' || !canUndo()" ng-click="undo()"><span class="fa fa-undo"></span> Undo</button> <button type="button" class="btn btn-default" ng-disabled="kind===\'none\' || !canRedo()" ng-click="redo()"><span class="fa fa-repeat"></span> Redo</button> <button type="button" class="btn btn-default" ng-disabled="kind===\'none\'" ng-click="delete()"><span class="fa fa-trash"></span> Delete</button> <button type="button" class="btn btn-default" ng-disabled="kind===\'none\'" ng-class="{currentMode: isMode(\'select\')}" ng-click="changeMode(\'select\')"><span class="fa fa-hand-o-up"></span> Select</button> <button type="button" class="btn btn-default" ng-disabled="kind===\'none\'" ng-class="{currentMode: isMode(\'connect\')}" ng-click="changeMode(\'connect\')"><span class="fa fa-crosshairs"></span> Connect</button> <button type="button" class="btn btn-default" ng-show="kind===\'er\'" ng-class="{currentMode: isMode(\'entity\')}" ng-click="changeMode(\'entity\')"><img src="assets/images/entity_icon.png" class="shape-button-icon"> Entity</button> <button type="button" class="btn btn-default" ng-show="kind===\'er\'" ng-class="{currentMode: isMode(\'attribute\')}" ng-click="changeMode(\'attribute\')"><img src="assets/images/attribute_icon.png" class="shape-button-icon"> Attribute</button> <button type="button" class="btn btn-default" ng-show="kind===\'er\'" ng-class="{currentMode: isMode(\'relationship\')}" ng-click="changeMode(\'relationship\')"><img src="assets/images/relationship_icon.png" class="shape-button-icon"> Relationship</button> <button type="button" class="btn btn-default" ng-show="kind===\'relational\'" ng-class="{currentMode: isMode(\'table\')}" ng-click="changeMode(\'table\')"><img src="assets/images/table_icon.png" class="shape-button-icon"> Table</button> <button type="button" class="btn btn-default" ng-show="kind===\'star\'" ng-class="{currentMode: isMode(\'fact\')}" ng-click="changeMode(\'fact\')"><img src="assets/images/fact_icon.png" class="shape-button-icon"> Fact</button> <button type="button" class="btn btn-default" ng-show="kind===\'star\'" ng-class="{currentMode: isMode(\'dimension\')}" ng-click="changeMode(\'dimension\')"><img src="assets/images/table_icon.png" class="shape-button-icon"> Dimension</button> <button type="button" class="btn btn-default" ng-disabled="kind===\'none\'" ng-class="{currentMode: isMode(\'label\')}" ng-click="changeMode(\'label\')"><span class="fa fa-font"></span> Label</button></div><div class="context-container" ng-hide="kind===null"><div ng-include="\'app/editor/context_entity.html\'"></div><div ng-include="\'app/editor/context_attribute.html\'"></div><div ng-include="\'app/editor/context_relationship.html\'"></div><div ng-include="\'app/editor/context_table.html\'"></div><div ng-include="\'app/editor/context_label.html\'"></div></div></div><div ng-include="\'components/error/error.html\'"></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/legacy/legacy.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="page-header"><h1>Standalone Legacy Tool</h1></div><div class="panel panel-default legacy-page"><div class="panel-body"><div class="center-container"><img src="assets/images/legacy.png"></div><div><h4>The legacy tool is still available for a short period of time. The tool requires the Silverlight plugin which is being removed by browser vendors and may require changes to browser settings to enable.</h4></div><div class="center-container"><button class="btn btn-primary btn-lg" ng-click="goLegacy()">Launch Legacy Tool</button></div></div></div></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/login/login.html",'<div class="container narrow pad-container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="page-header"><h1>Login</h1></div><div class="social-signins"><h4>Use an account you already have</h4><a href="/api/v1/authorization/google" class="social-signin-link"><div class="google"></div></a> <a href="/api/v1/authorization/facebook" class="social-signin-link"><div class="facebook"></div></a></div><h4>Or login with an existing account on ERDPlus.com</h4><form role="form"><div class="form-group"><label for="emailInput">Email Address</label> <input id="emailInput" type="email" class="form-control" placeholder="Email Address" ng-model="credentials.email" ng-keypress="loginOnEnter($event)"></div><div class="form-group"><label for="passwordInput">Password</label> <input id="passwordInput" type="password" class="form-control" placeholder="Password" ng-model="credentials.password" ng-keypress="loginOnEnter($event)"></div><div class="checkbox"><label><input type="checkbox" ng-model="credentials.remember"> Stay Logged In</label></div></form><button type="button" class="btn btn-primary" ng-click="login()">Login</button> <button type="button" class="btn btn-default" ng-click="resetPassword()">Forgot Password</button><div class="footer-faq"><a href="#/faq#authorize-with-social-network">I already created an ERDPlus account. Can I still use a social network to login?</a></div></div><div ng-include="\'components/error/error.html\'"></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/logout/logout.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><p>Logout Page</p></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="container-fluid home-page pad-container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="container"><div class="row"><div class="col-lg-6"><img class="logo" src="assets/images/erdplus_logo_large.png"></div><div class="col-lg-6 welcome"><h1>Welcome to ERDPlus!</h1><h1><small>A database modeling tool for creating Entity Relationship Diagrams, Relational Schemas, Star Schemas, and SQL DDL statements.</small></h1></div></div><hr><h2 class="page-header"><span class="glyphicon glyphicon-ok"></span>Introduction</h2><div class="row"><div class="col-md-4"><div class="panel panel-default primary"><div class="panel-heading"><h4><i class="fa fa-fw fa-circle"></i> Database Modeling</h4></div><div class="panel-body"><p>ERDPlus is a web-based database modeling tool that lets you quickly and easily create</p><ul><li><a href="#" ng-click="jumpTo($event, \'#er-diagram\')" class="jump-link">Entity Relationship</a> Diagrams (ERDs)</li><li><a href="#" ng-click="jumpTo($event, \'#relational-schema\')" class="jump-link">Relational Schemas</a> (Relational Diagrams)</li><li><a href="#" ng-click="jumpTo($event, \'#star-schema\')" class="jump-link">Star Schemas</a> (Dimensional Models)</li></ul><p>More features</p><ul><li>Automatically <a href="#" ng-click="jumpTo($event, \'#er-relational-conversion\')" class="jump-link">convert ER Diagrams into Relational Schemas</a></li><li><a href="#" ng-click="jumpTo($event, \'#export-sql\')" class="jump-link">Export SQL</a></li><li>Export diagrams as a PNG</li><li>Save diagrams safely on our server</li></ul></div></div></div><div class="col-md-4"><div class="panel panel-default primary"><div class="panel-heading"><h4><i class="fa fa-fw fa-circle"></i> SQL DDL Statements</h4></div><div class="panel-body"><p>Export standard SQL</p><ul><li><a href="#" ng-click="jumpTo($event, \'#export-sql\')" class="jump-link">Generate SQL</a> from Relational Schemas and Star Schemas</li><li>Select from common data types and data sizes</li><li>Works with most contemporary RDBMS tools including Oracle, MySQL, Microsoft SQL Server, PostgresSQL, Teradata, IBM DB2, Microsoft Access, and others.</li></ul></div></div></div><div class="col-md-4"><div class="panel panel-default primary"><div class="panel-heading"><h4><i class="fa fa-fw fa-circle"></i> Textbook</h4></div><div class="panel-body"><p>The <a href="http://dbtextbook.com">textbook using ERDPlus</a> is available from a new publisher at a much lower price! <a href="http://www.prospectpressvt.com/titles/jukic-database-systems/">Get the eBook for $51.50 or paperback for $74.50.</a></p><a href="http://dbtextbook.com"><img class="img-responsive dbtextbook" src="assets/images/dbtextbook_cover.png" alt=""></a></div></div></div></div><a id="er-diagram"></a><h2 class="page-header"><span class="glyphicon glyphicon-ok"></span>Entity Relationship Diagrams (ERDs)</h2><div class="row"><div class="col-lg-12"><img class="img-responsive sample-diagram" src="assets/images/ERDImage.png" alt="sample er diagram"></div></div><div class="row"><div class="col-md-5 schema-description"><p>ERDPlus enables drawing standard ERD components</p><ul><li>Entities</li><li>Attributes</li><li>Relationships</li></ul><p>The notation supports drawing regular and weak entities, various types of attributes (regular, unique, multi-valued, derived, composite, and optional), and all possible cardinality constraints of relationships (mandatory-many, optional-many, mandatory-one and optional-one).</p></div><div class="col-md-7"><div class="well"><img class="img-responsive demo-animation" src="assets/images/ERDemoTiny.gif" alt="sample er diagram"></div></div></div><a id="relational-schema"></a><h2 class="page-header"><span class="glyphicon glyphicon-ok"></span>Relational Schemas</h2><div class="row"><div class="col-md-5 schema-description"><p>ERDPlus enables drawing standard Relational Schema components</p><ul><li>Tables (Relations)</li><li>Table Columns (including Primary and Foreign Keys)</li><li>Referential Integrity Constraint Lines (pointing from a Foreign Key to the Primary Key it refers to)</li></ul><p>The tool supports quick creation of foreign keys and referential integrity lines by simple click-point-connect actions. This simplifies and quickens the process of creating relational schemas.</p></div><div class="col-md-7"><div class="well"><img class="img-responsive demo-animation" src="assets/images/RelationalSchemaDemoTiny.gif" alt="sample relational schema diagram"></div></div></div><div class="row"><div class="col-lg-12"><img class="img-responsive sample-diagram" src="assets/images/RelationalSchemaImage.png" alt="sample relational schema diagram"></div></div><a id="er-relational-conversion"></a><h2 class="page-header"><span class="glyphicon glyphicon-ok"></span>Automatically Convert ER Diagrams to Relational Schemas</h2><div class="row"><div class="col-md-5 schema-description"><p>ERDPlus enables automatic conversion of ER Diagrams to Relational Schemas with one click of a button. This vastly speeds up the process of creating a Relational Schema based on an ER Diagram.</p><p>To use this feature</p><ol><li>Log into your account</li><li>Click on the drop menu next to the name of any ER Diagram and chose “Convert to Relational Schema” option</li><li>This will create a diagram containing the converted Relational Schema</li></ol></div><div class="col-md-7"><div class="well"><img class="img-responsive demo-animation" src="assets/images/ERConversionRelationalDemo.gif" alt="sample converting ER diagram to a relational schema diagram"></div></div></div><div class="row"><div class="col-lg-12"><img class="img-responsive sample-diagram" src="assets/images/ERDImage.png" alt="sample er diagram"></div></div><div class="row"><div class="col-lg-12"><div class="convert-er-relational-arrow glyphicon glyphicon-arrow-down"></div></div></div><div class="row"><div class="col-lg-12"><img class="img-responsive sample-diagram" src="assets/images/RelationalSchemaImage.png" alt="sample relational schema diagram"></div></div><a id="star-schema"></a><h2 class="page-header"><span class="glyphicon glyphicon-ok"></span>Star Schemas</h2><div class="row"><div class="col-md-5 schema-description"><p>ERDPlus enables drawing Star Schema components</p><ul><li>Fact Tables (Facts)</li><li>Dimension Tables (Dimensions)</li></ul><p>The notation distinguishes fact tables from dimension tables by using a thicker frame around fact tables. This makes star schema diagrams easier to interpret. As with relational schemas, the tool supports quick creation of foreign keys and referential integrity lines by simple click-point-connect actions. This simplifies and quickens the process of creating star schemas.</p></div><div class="col-md-7"><div class="well"><img class="img-responsive demo-animation" src="assets/images/StarSchemaDemoTiny.gif" alt="sample star schema diagram"></div></div></div><div class="row"><div class="col-lg-12"><img class="img-responsive sample-diagram" src="assets/images/StarSchemaImage.png" alt="sample star schema diagram"></div></div><a id="export-sql"></a><h2 class="page-header"><span class="glyphicon glyphicon-ok"></span>Export SQL</h2><div class="row"><div class="col-lg-6"><div class="row"><div class="col-lg-12 schema-description"></div></div><div class="row"><div class="col-lg-8"><img class="img-responsive sample-diagram" src="assets/images/relational_schema_for_sql.png" alt="sample relational schema diagram"></div><div class="col-lg-4"><div class="generate-sql-arrow glyphicon glyphicon-arrow-right"></div></div></div></div><div class="col-lg-6"><div><pre class="sql-container">\nCREATE TABLE PRODUCT\n(\n  ProductID INT NOT NULL,\n  ProductName VARCHAR(64) NOT NULL,\n  ProductPrice DECIMAL(4, 2) NOT NULL,\n  PRIMARY KEY (ProductID)\n);\n\nCREATE TABLE CUSTOMER\n(\n  CustomerID INT NOT NULL,\n  CustomerName VARCHAR(40) NOT NULL,\n  CustomerZip VARCHAR(10) NOT NULL,\n  PRIMARY KEY (CustomerID)\n);\n\nCREATE TABLE SALESTRANSACTION\n(\n  TID INT NOT NULL,\n  Tdate DATE NOT NULL,\n  CustomerID INTEGER NOT NULL,\n  PRIMARY KEY (TID),\n  FOREIGN KEY (CustomerID) REFERENCES CUSTOMER(CustomerID)\n);\n\nCREATE TABLE SOLDVIA\n(\n  ProductID INT NOT NULL,\n  TID INT NOT NULL,\n  PRIMARY KEY (ProductID, TID),\n  FOREIGN KEY (ProductID) REFERENCES PRODUCT(ProductID),\n  FOREIGN KEY (TID) REFERENCES SALESTRANSACTION(TID)\n);\n          </pre></div></div></div><hr><div class="well"><div class="row"><div class="col-lg-12"><h1>Get Started Today!</h1></div><div class="col-md-8"><h4>Create an Account</h4><ul><li>Save documents on our server</li><li>Access your documents from any Mac or PC</li><li>Import and export documents to share with others</li><li>Export SQL feature</li></ul><h4>Standalone</h4><ul><li>No account signup required</li><li>Save and open documents from your own computer</li></ul></div><div class="col-md-4"><a class="btn btn-lg btn-primary btn-block" href="#/signup">Signup</a></div><div class="col-md-4"><a class="btn btn-lg btn-primary btn-block standalone" href="#/standalone">Standalone</a></div></div></div><div class="well"><div class="row"><div class="col-md-8"><h4>Where is the old tool?</h4><p>The new version of ERDPlus is fully compatible with diagrams created using the old Silverlight version. You can open, modify, and save all of your old diagrams in the new HTML5 site. The standalone legacy tool is still available for a limited time.</p></div><div class="col-md-4"><a class="btn btn-lg btn-primary btn-block" href="http://legacy.erdplus.com">Legacy Tool</a></div></div></div><hr></div></div><div ng-include="\'components/footer/footer.html\'"></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/reset/finish.html",'<div class="container narrow pad-container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="page-header"><h1>Set New Password</h1></div><form role="form"><div class="form-group"><label for="emailInput">Email Address</label> <input id="emailInput" type="email" class="form-control" placeholder="Email Address" ng-model="request.email" ng-keypress="finishOnEnter($event)"></div><div class="form-group"><label for="passwordInput">Password</label> <input id="passwordInput" type="password" class="form-control" placeholder="Password" ng-model="request.password" ng-keypress="finishOnEnter($event)"></div></form><button type="button" class="btn btn-primary" ng-click="finish()">Submit</button><div ng-show="hasErrors">Unknown email address or incorrect password.</div></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/reset/request.html",'<div class="container narrow pad-container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="page-header"><h1>Request Password Reset</h1></div><div ng-hide="success"><form role="form"><div class="form-group"><label for="emailInput">Email Address</label> <input id="emailInput" type="email" class="form-control" placeholder="Email Address" ng-model="request.email" ng-keypress="requestOnEnter($event)"></div></form><button type="button" class="btn btn-primary" ng-click="requestReset()">Submit</button></div><div ng-show="success">Check your email for password reset instructions.</div><div ng-show="hasErrors">Unknown email address.</div></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/privacy/privacy.html",'<div class="container-fluid pad-container privacy-page"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="container"><h3>Privacy Policy</h3><p>This privacy policy discloses the privacy practices for https://erdplus.com. This privacy policy applies solely to information collected by this web site. It will notify you of the following:</p><p><ol><li>What personally identifiable information is collected from you through the web site, how it is used and with whom it may be shared.</li><li>What choices are available to you regarding the use of your data.</li><li>The security procedures in place to protect the misuse of your information.</li></ol><strong>Information Collection, Use, and Sharing</strong></p><p>We are the sole owners of the information collected on this site. We only have access to/collect information that you voluntarily give us via email or other direct contact from you. We will not sell or rent this information to anyone. We will use your information to respond to you, regarding the reason you contacted us. We will not share your information with any third party outside of our organization.</p><strong>Your Access to and Control Over Information</strong><p>You can do the following at any time by contacting us via the email address on our website:</p><ul><li>See what data we have about you, if any.</li><li>Change/correct any data we have about you.</li><li>Have us delete any data we have about you.</li><li>Express any concern you have about our use of your data.</li></ul><strong>Security</strong><p>We take precautions to protect your information. When you submit sensitive information via the website, your information is protected both online and offline.</p><p>Wherever we collect sensitive information (such as passwords), that information is encrypted and transmitted to us in a secure way. You can verify this by looking for a closed lock icon at the bottom of your web browser, or looking for "https" at the beginning of the address of the web page.</p><p>While we use encryption to protect sensitive information transmitted online, we also protect your information offline. Only employees who need the information to perform a specific job are granted access to personally identifiable information. The computers/servers in which we store personally identifiable information are kept in a secure environment.</p><strong>Registration</strong><p>In order to use this website, a user may first optionally complete the registration form. Registration is required to use some features of the site. During registration a user is required to give certain information (such as name and email address). This information is used to contact you about the products/services on our site in which you have expressed interest.</p><strong>Cookies</strong><p>We use "cookies" on this site. A cookie is a piece of data stored on a site visitor\'s hard drive to help us improve your access to our site and identify repeat visitors to our site. For instance, when we use a cookie to identify you, you would not have to log in a password more than once, thereby saving time while on our site. Cookies can also enable us to track and target the interests of our users to enhance the experience on our site. Usage of a cookie is in no way linked to any personally identifiable information on our site.</p><strong>Updates</strong><p>Our Privacy Policy may change from time to time and all updates will be posted on this page.</p><p>If you feel that we are not abiding by this privacy policy, you should contact us immediately via email to <a href="mailto:info@erdplus.com">info@erdplus.com</a></p></div></div><div ng-include="\'components/footer/footer.html\'"></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("app/signup/signup.html",'<div class="container narrow pad-container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="page-header"><h1>Signup</h1></div><div class="social-signins"><h4>Use an account you already have</h4><a href="/api/v1/authorization/google" class="social-signin-link"><div class="google"></div></a> <a href="/api/v1/authorization/facebook" class="social-signin-link"><div class="facebook"></div></a></div><h4>Or create a new account on ERDPlus.com</h4><form role="form" novalidate="" name="signupForm"><div class="form-group"><label for="name">Name</label> <span class="error-info" ng-show="nameHasError()">Name cannot be blank</span> <input id="name" type="text" class="form-control" placeholder="Name" name="name" ng-required="true" ng-model="user.name" ng-class="{\'has-error\': nameHasError()}"></div><div class="form-group"><label for="email">Email Address</label> <span class="error-info" ng-show="emailHasError()">A valid email address is required</span> <input id="email" type="email" class="form-control" placeholder="Email Address" name="email" ng-required="true" ng-model="user.email" ng-class="{\'has-error\': emailHasError()}"></div><div class="form-group"><label for="password">Password</label> <span class="error-info" ng-show="passwordHasError()">Password should be at least 8 characters</span> <input id="password" type="password" class="form-control" placeholder="Password" name="password" ng-required="true" ng-minlength="8" ng-model="user.password" ng-class="{\'has-error\': passwordHasError()}"></div><div class="form-group"><label for="password">Confirm Password</label> <span class="error-info" ng-show="confirmPasswordHasError()">Passwords must match</span> <input id="confirmPassword" type="password" class="form-control" placeholder="Confirm Password" name="confirmPassword" ng-required="true" ng-model="user.confirmPassword" ng-class="{\'has-error\': confirmPasswordHasError()}" ui-validate="\'validatePasswordsMatch($value)\'" ui-validate-watch="\'user.password\'"></div></form><button type="button" class="btn btn-primary" ng-click="signup()">Create New Account</button> <button type="button" class="btn btn-default" ng-click="resetPassword()">Forgot Password</button><div class="footer-faq"><a href="#/faq#authorize-with-social-network">I already created an ERDPlus account. Can I still use a social network to login?</a></div><div ng-repeat="error in errors" ng-show="hasErrors"><div class="alert alert-danger" role="alert">{{error}}</div></div></div><div ng-include="\'components/error/error.html\'"></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("components/error/error.html",'<div class="error-box" ng-controller="ErrorCtrl" ng-show="showSiteErrors"><div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="closeError()"><span aria-hidden="true">&times;</span></button><ul><li ng-repeat="err in errors"><strong>Error!</strong> {{err}}</li></ul></div></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("components/footer/footer.html",'<div class="container-fluid common-page-footer"><div class="container"><div class="row"><div class="col-lg-4"><p>Copyright &copy; ERDPlus 2015-2016</p></div><div class="col-lg-4"><p class="privacy"><a ng-href="#/privacy-policy">Privacy Policy</a></p></div><div class="col-lg-4"><p><a href="http://browsehappy.com/" class="pull-right">ERDPlus recommends these browsers</a></p></div></div></div></div>')}])}(),function(e){try{e=angular.module("web")}catch(t){e=angular.module("web",[])}e.run(["$templateCache",function(e){e.put("components/navbar/navbar.html",'<nav class="navbar navbar-fixed-top" ng-controller="NavbarCtrl"><div class="navbar-header"><a class="navbar-brand" href="#/"><span class="glyphicon glyphicon-home"></span> ERDPlus</a><ul class="nav navbar-nav"><li ng-class="getNavClass(\'/faq\')"><a href="#/faq"><span>FAQ</span></a></li></ul><ul class="nav navbar-nav textbook-cover"><span><a href="http://dbtextbook.com"><img src="assets/images/dbtextbook_cover.png"></a></span></ul><ul class="nav navbar-nav textbook-description"><span><a href="http://www.prospectpressvt.com/titles/jukic-database-systems/">The textbook using ERDPlus is available.</a></span></ul></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav navbar-right" ng-show="hasUser"><li ng-class="getNavClass(\'/account\')"><a ng-href="#/account">{{user.name}}</a></li><li ng-class="getNavClass(\'/diagrams\')"><a ng-href="#/diagrams">Diagrams</a></li><li ng-class="getNavClass(\'/logout\')"><a ng-href="#/logout">Logout</a></li></ul><ul class="nav navbar-nav navbar-right" ng-hide="hasUser"><li ng-class="getNavClass(\'/login\')"><a ng-href="#/login">Login</a></li><li ng-class="getNavClass(\'/signup\')"><a ng-href="#/signup">Signup</a></li></ul><ul class="nav navbar-nav navbar-right spacer"></ul></div></nav>')}])}();